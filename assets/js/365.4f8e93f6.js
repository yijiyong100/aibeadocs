(window.webpackJsonp=window.webpackJsonp||[]).push([[365],{880:function(t,s,a){"use strict";a.r(s);var r=a(53),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("本文主要是介绍 Mybatis规范和标签 。")])]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#一文搞懂mybatis规范和标签"}},[t._v("一文搞懂mybatis规范和标签")]),a("ul",[a("li",[a("a",{attrs:{href:"#resultmap"}},[t._v("resultMap")])]),a("li",[a("a",{attrs:{href:"#if标签"}},[t._v("if标签")])]),a("li",[a("a",{attrs:{href:"#where标签"}},[t._v("where标签")])]),a("li",[a("a",{attrs:{href:"#choose标签"}},[t._v("choose标签")])]),a("li",[a("a",{attrs:{href:"#foreach标签遍历数组"}},[t._v("foreach标签遍历数组")])])])]),a("li",[a("a",{attrs:{href:"#参考文章"}},[t._v("参考文章")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"一文搞懂mybatis规范和标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一文搞懂mybatis规范和标签"}},[t._v("#")]),t._v(" 一文搞懂mybatis规范和标签")]),t._v(" "),a("h3",{attrs:{id:"resultmap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resultmap"}},[t._v("#")]),t._v(" resultMap")]),t._v(" "),a("p",[t._v("resultType实际上是将数据库表字段与JavaBean中的属性建立映射关系，在编写SQL的时候使用resultMap，mybatis会依据resultMap中的映射关系将数据库返回的记录映射到对应的字段上。")]),t._v(" "),a("p",[t._v("修改TravelRouteMapper.xml增加一个resultMap")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("resultMap "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRoute"')]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_id"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_name"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_price"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_introduce"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteIntroduce"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_flag"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteFlag"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_date"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteDate"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isThemeTour"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isThemeTour"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_count"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteCount"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_cid"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteCid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_image"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteImage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("column")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travel_route_seller_id"')]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteSellerId"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("我们将之前使用as 语法的queryTravelByPage和queryTravelById的as xxx去掉,将resultType改为TravelRoute。留下一个queryTravelByName当作复习语法的例子就好，就不赶尽杀绝了。")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByPage"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java.util.Map"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id\n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("   travel_route "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" travel_route_id "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{startRow},#{endRow}")]),t._v("\n     \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelById"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Long"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("   travel_route "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" travel_route_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteId}")]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n   \n")])])]),a("p",[t._v("运行测试程序，保证代码修改正确！")]),t._v(" "),a("p",[t._v("之前编写的例子中，我们都自己实现了dao接口，其实mybatis提供了动态代理的方式，无需由开发人员编写实现类。使用mapper的动态代理，可以简化冗余代码的编写，也是实际开发中推荐的写法。接下来，我们就一起来看下怎样使用动态代理。")]),t._v(" "),a("p",[t._v("1.在TravelRouteMapper.xml中的mapper标签中使用namespace属性：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mapper namespace"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"com.pz.route.dao.TravelRouteDao"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("这样编写mybatis mapper文件与具体的接口com.pz.route.dao.TravelRouteDao建立映射关系。")]),t._v(" "),a("p",[t._v("2.编写的Dao必须遵守一个命名规范——方法名和mapper文件的id值保持一一对应的关系。")]),t._v(" "),a("p",[t._v("3.使用sqlSession创建dao的代理对象执行数据库操作：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@Test")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" void testQueryTravelByIdProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n              SqlSession sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              try{\n               sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MyBatisUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getSqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n             \n              TravelRouteDaotravelRouteDao"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n             \n              TravelRoute travelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("travelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queryTravelById"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("515")]),t._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("commit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("out")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("println"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Exception e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                     e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("printStackTrace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }finally{\n                     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                            sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                     }\n              }\n             \n       }\n")])])]),a("p",[t._v("通过SqlSession对象的getMapper方法，将要获取的dao接口的class属性传入，会返回MyBatis会使用动态代理的方式创建对象，该对象是有jdk的动态代理自动生成的。由于我们的Sqlsession默认的是手动提交的事务方式，所以我们还是需要在程序中commit。不过，将dao的实现类去除掉之后，代码更加简洁。")]),t._v(" "),a("p",[t._v("我们之前编写的updateById方法其实存在一个问题——如果传入的数据是null或者是空字符串，对应的字段也会被设置为null或者是空字符串，其实这样提供方法比较危险，在实际开发的过程中，往往希望只对传入的数据做更新。还有一个场景，我们上网的时候发现页面上有多个组合查询条件，输入某一个查询条件就匹配一项查询结果，输入多个查询条件，就要求查询结果匹配多个查询条件。针对这样的场景，mybatis提供了动态sql技术来减少开发人员的开发工作。")]),t._v(" "),a("h3",{attrs:{id:"if标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#if标签"}},[t._v("#")]),t._v(" if标签")]),t._v(" "),a("p",[t._v("我们使用if标签来解决数据更新的控制问题——对于一些字段，必须有值传入才做更新:")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"updateById"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),t._v("   \n      travel_route\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteName!= null and travelRouteName != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteName},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice!= null and travelRoutePrice >0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRoutePrice},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteIntroduce!= null and travelRouteIntroduce != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n      travel_route_introduce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteIntroduce},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteFlag!= null "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_flag"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteFlag},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteFlag!= null "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_date"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteDate},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteFlag!= null "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       isThemeTour"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{isThemeTour},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteCount!= null and travelRouteCount > 0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteCount},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteCid!= null and travelRouteCid > 0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_cid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteCid},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteImage!= null and travelRouteImage != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n       travel_route_image"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteImage},")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRouteSellerId!= null and travelRouteSellerId >0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n      travel_route_seller_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteSellerId}")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" travel_route_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteId}")]),t._v("\n   \n   \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("运行测试用例，确保代码没有问题！")]),t._v(" "),a("h3",{attrs:{id:"where标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#where标签"}},[t._v("#")]),t._v(" where标签")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v(" 我们来实现一个新的功能，实现复合查询：如果输入了线路名称，我们就按线路名称模糊查询，如果输入了价格我们就查询大于输入价格的线路。我们可以通过where标签来实现它。\n")])])]),a("p",[t._v("在mapper中编写sql：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByQuery"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRoute"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteName!= null and travelRouteName != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" travel_route_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteName} '%'")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice!= null and travelRoutePrice>0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          andtravel_route_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRoutePrice}")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n编写方法接口："),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" 模糊查询TravelRoute列表\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@param")]),t._v(" travelRoute\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@return")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\nList"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("queryTravelByQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRoute travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("由于项目为了展示之前的例子，解决编译问题 实现类实现一个空方法就好，使用动态代理的方式是无需编写实现类的：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@Override")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("queryTravelByQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRoute travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" {\n              "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO Auto-generated method stub")]),t._v("\n              returnnull"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       }\n编写测试方法：\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@Test")]),t._v("\n       publicvoid testQueryTravelRouteByQuerydProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n              SqlSession sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              try{\n               sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MyBatisUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getSqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRouteDaotravelRouteDao"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRoute travelRoute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new TravelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setTravelRouteName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"春节"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setTravelRoutePrice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setTravelRouteDate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-10-26"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("travelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queryTravelByQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("out")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("println"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Exception e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                     e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("printStackTrace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }finally{\n                     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                            sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                     }\n              }\n             \n       }\n")])])]),a("p",[t._v("运行测试用例，看看效果！")]),t._v(" "),a("h3",{attrs:{id:"choose标签"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#choose标签"}},[t._v("#")]),t._v(" choose标签")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("       我们再提一个小要求，如果用户没有传入travelRouteName也没有传入travelRoutePrice,程序就不返回数据。当然我们可以在程序中做出判断，不过mybatis提供了choose标签也可以实现上述要求。在mapper中编写sql：\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByChooseQuery"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRoute"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteName!= null and travelRouteName != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" travel_route_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteName} '%'")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice!= null and travelRoutePrice >0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          andtravel_route_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRoutePrice}")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("编写dao接口和实现类")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" 模糊查询TravelRoute列表\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@param")]),t._v(" travelRoute\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@return")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n   List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" queryTravelByChooseQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRoutetravelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n编写测试方法\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@Test")]),t._v("\n       publicvoid testQueryTravelRouteByChooseQuerydProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n              SqlSession sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              try{\n               sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MyBatisUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getSqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRouteDao travelRouteDao"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRoute travelRoute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new TravelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("travelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queryTravelByChooseQuery"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("travelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("out")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("println"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Exception e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                     e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("printStackTrace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }finally{\n                     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                            sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                     }\n              }\n             \n       }\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("      运行程序，我们发现返回了一个空的list.\n")])])]),a("p",[t._v("choose标签有多个when子标签，但是只能有一个otherwise子标签，有点类似java中的switch语句，我们在子标签中使用了1>2这种错误条件，在sql层面就屏蔽了数据返回的可能性。")]),t._v(" "),a("h3",{attrs:{id:"foreach标签遍历数组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#foreach标签遍历数组"}},[t._v("#")]),t._v(" foreach标签遍历数组")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("  我们再来完成一个小功能，传入一组id号，批量放回线路数据。我们需要使用到sql语句中的in语句，当然，也可以用拼接字符串的方式实现它，但是mybatis提供了foreach标签，实现了循环拼接的功能。\n\n foreach标签的属性\n")])])]),a("p",[t._v("§ collection 表示要遍历的集合类型，可以传入List和数组。")]),t._v(" "),a("p",[t._v("§ open、close、separator 用于 SQL 拼接，open表示由什么字符开始，colse表示由什么字符结束，separator表示拼接字符串的分隔符。")]),t._v(" "),a("p",[t._v("我们来编写一个例子使用下foreach标签，在mapper文件中编写下面内容：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByForEach"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list != nulland list.size>0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        travel_route_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("foreach collection"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"("')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('")"')]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" separator"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{id}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("foreach"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n")])])]),a("p",[t._v("编写dao接口方法和接口实现：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" 根据travelRouteIdList返回列表\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@param")]),t._v(" travelRouteIdList\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@return")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n   List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" queryTravelByForEach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Long"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("travelRouteIdList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n编写测试方法：\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@Test")]),t._v("\n       publicvoid testQueryTravelRouteByForEachProxy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n              List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Long"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" idList"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Arrays"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("asList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("L"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              SqlSession sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              try{\n               sqlSession"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("MyBatisUtil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getSqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRouteDaotravelRouteDao"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TravelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("class"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              TravelRoute travelRoute "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" new TravelRoute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              List"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("TravelRoute"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("travelRouteDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queryTravelByForEach"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("idList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("out")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("println"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }catch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Exception e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                     e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("printStackTrace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              }finally{\n                     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v("sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("{\n                            sqlSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                     }\n              }\n             \n       }\n \n")])])]),a("p",[t._v("sql标签")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("我们发现编写select语句时需要每次都写很多字段名，每写一条语句就需要写一次，这样很累，当然你要是不怕dba地狱的怒吼和你的Leader的天堂的神罚的话，可以写select * 来解决。Mybatis提供sql标签来解决sql的复用问题，使用sql标签可以把公共的sql语句片段提取出来，在需要使用的时候写上include标签就可以引入公用的sql语句片段了。我们将公共的查询字段使用sql标签提取出来：\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sql")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commonselect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n   \n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sql")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("为了验证一下，我们修改下之前的queryTravelByForEach语句")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByForEach"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("include refid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commonselect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list != nulland list.size>0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        travel_route_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("IN")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("foreach collection"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"("')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('")"')]),t._v("item"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(" separator"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('","')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{id}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("foreach"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("otherwise"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("choose"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n       \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("运行下测试用例，看看效果")]),t._v(" "),a("p",[t._v("注意噢，由于mybatis使用的时xml,在xml中有些符号，是不能直接使用的,遇到这种情况，我们可以使用实体符号代替。下面就是一些数学符号和实体符号之间的关系。")]),t._v(" "),a("p",[t._v("原符号      实体符号")]),t._v(" "),a("p",[t._v("<         <")]),t._v(" "),a("p",[t._v("<=        <=")]),t._v(" "),a("p",[t._v(">         >")]),t._v(" "),a("p",[t._v(">=        >=")]),t._v(" "),a("p",[t._v("&         &")]),t._v(" "),a("p",[t._v('"         "')]),t._v(" "),a("p",[t._v("'         '")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v(" 这里要强调一下<,>=,<=,&,一定不能直接在xml中出现。\n")])])]),a("p",[t._v("我们修改下queryTravelByQuery的程序要求，要求返回大于等于输入价格的线路，示例：")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByQuery"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRoute"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteName!= null and travelRouteName != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" travel_route_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteName} '%'")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice!= null and travelRoutePrice >0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" travel_route_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("gt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRoutePrice}")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("除了使用特殊符号之外，我们还可以将特殊符号放到"),t._v("里面，这里面的内容xml是不会转义的。")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryTravelByQuery"')]),t._v("resultMap"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRouteType"')]),t._v(" parameterType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TravelRoute"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n   \n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v("\n       travel_route_id "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_price "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_introduce "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_flag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_date "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       isThemeTour "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_cid "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_image "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n       travel_route_seller_id \n    \n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" travel_route\n       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"travelRouteName!= null and travelRouteName != ''\"")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" travel_route_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("like")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRouteName} '%'")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"travelRoutePrice!= null and travelRoutePrice >0 "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" \n          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("and")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("CDATA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("travel_route_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#{travelRoutePrice}]]>")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("本文分享自微信公众号 - 猿人工厂（gh_deca5a88e287），作者：山旮旯的胖子")]),t._v(" "),a("p",[t._v("原文出处及转载信息见文内详细说明，如有侵权，请联系 yunjia_community@tencent.com 删除。")]),t._v(" "),a("p",[t._v("原始发表时间：2020-06-05")]),t._v(" "),a("p",[t._v("本文参与"),a("a",{attrs:{href:"https://cloud.tencent.com/developer/support-plan",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯云自媒体分享计划"),a("OutboundLink")],1),t._v("，欢迎正在阅读的你也加入，一起分享。")]),t._v(" "),a("p",[t._v("想学习")]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ul",[a("li",[t._v("https://cloud.tencent.com/developer/article/1670067")])])])}),[],!1,null,null,null);s.default=e.exports}}]);