(window.webpackJsonp=window.webpackJsonp||[]).push([[372],{887:function(s,a,t){"use strict";t.r(a);var n=t(53),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("本文主要是介绍 Jvm调优-工具总结 。")])]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#jvm调优工具的使用-jps-jstat-jstack-jmap-jhat"}},[s._v("JVM调优工具的使用（jps,jstat,jstack,jmap,jhat）")])]),t("li",[t("a",{attrs:{href:"#visualvm可视化工具总结推荐"}},[s._v("VisualVM可视化工具总结推荐：")]),t("ul",[t("li",[t("a",{attrs:{href:"#我们在java的开发中-常常会遇到下面这些问题"}},[s._v("我们在Java的开发中，常常会遇到下面这些问题：")])])])]),t("li",[t("a",{attrs:{href:"#常见的命令方式jvm工具"}},[s._v("常见的命令方式jvm工具")]),t("ul",[t("li",[t("a",{attrs:{href:"#一-jps命令"}},[s._v("一，jps命令")])]),t("li",[t("a",{attrs:{href:"#二-jstat命令"}},[s._v("二 jstat命令")])]),t("li",[t("a",{attrs:{href:"#三-jstack命令"}},[s._v("三 jstack命令")])]),t("li",[t("a",{attrs:{href:"#常用命令-jstack-pid-切换到对应用户下"}},[s._v("常用命令 jstack PID （切换到对应用户下）")])]),t("li",[t("a",{attrs:{href:"#实例找出某个java进程中最耗费cpu的java线程并定位堆栈信息-用到的命令有ps、top、printf、jstack、grep。"}},[s._v("实例找出某个Java进程中最耗费CPU的Java线程并定位堆栈信息，用到的命令有ps、top、printf、jstack、grep。")])]),t("li",[t("a",{attrs:{href:"#四-jmap"}},[s._v("四 jmap")])])])]),t("li",[t("a",{attrs:{href:"#参考文章"}},[s._v("参考文章")])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"jvm调优工具的使用-jps-jstat-jstack-jmap-jhat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm调优工具的使用-jps-jstat-jstack-jmap-jhat"}},[s._v("#")]),s._v(" JVM调优工具的使用（jps,jstat,jstack,jmap,jhat）")]),s._v(" "),t("p",[s._v("JDK本身提供了很丰富的性能监控工具，除了集成式的visualVM和jConsole外，还有jstat,jstack,jps,jmap,jhat小工具，这些都是性能调优的常用工具")]),s._v(" "),t("h2",{attrs:{id:"visualvm可视化工具总结推荐"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#visualvm可视化工具总结推荐"}},[s._v("#")]),s._v(" VisualVM可视化工具总结推荐：")]),s._v(" "),t("p",[s._v("JVM优化之VisualVM工具的使用 链接地址 "),t("a",{attrs:{href:"https://www.cnblogs.com/wishsaber/p/12411872.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("【JVM优化之VisualVM工具的使用】"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/wishsaber/p/12411872.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("【JVM优化之VisualVM工具的使用】"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"我们在java的开发中-常常会遇到下面这些问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我们在java的开发中-常常会遇到下面这些问题"}},[s._v("#")]),s._v(" 我们在Java的开发中，常常会遇到下面这些问题：")]),s._v(" "),t("p",[s._v("1内存不足，2内存泄漏，3锁争用，4线程锁死，5java进程消耗CPU过高等")]),s._v(" "),t("p",[s._v("这些问题出现的时候 大家常常通过重启服务器或者调大内存来临时解决")]),s._v(" "),t("h2",{attrs:{id:"常见的命令方式jvm工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见的命令方式jvm工具"}},[s._v("#")]),s._v(" 常见的命令方式jvm工具")]),s._v(" "),t("h3",{attrs:{id:"一-jps命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-jps命令"}},[s._v("#")]),s._v(" 一，jps命令")]),s._v(" "),t("p",[s._v("jps主要用来输出JVM中运行的进程状态信息")]),s._v(" "),t("p",[s._v("命令行参数选项：")]),s._v(" "),t("p",[s._v("-q 不输出类名、Jar名和传入main方法的参数")]),s._v(" "),t("p",[s._v("-m 输出传入main方法的参数")]),s._v(" "),t("p",[s._v("-l 输出main类或Jar的全限名")]),s._v(" "),t("p",[s._v("-v 输出传入JVM的参数")]),s._v(" "),t("p",[s._v("最常用的是 jps -l")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jps -l")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1217")]),s._v(" sun.tools.jps.Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v(" org.apache.catalina.startup.Bootstrap\n\n也可以通过 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" java  查看所有Java应用进程1.2.3.4.5.\n")])])]),t("h3",{attrs:{id:"二-jstat命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-jstat命令"}},[s._v("#")]),s._v(" 二 jstat命令")]),s._v(" "),t("p",[s._v("jstat 它可以显示出虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据")]),s._v(" "),t("p",[s._v("1 类加载统计：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstat -class 1094")]),s._v("\nLoaded  Bytes  Unloaded  Bytes     Time   \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3133")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6273.2")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.91")]),s._v("\n  \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nLoaded:加载class的数量\nBytes：所占用空间大小\nUnloaded：未加载数量\nBytes:未加载占用空间\nTime：时间\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".3.4.5.6.7.8.9.10.11.\n")])])]),t("p",[s._v("2 编译统计")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstat -compiler 1094")]),s._v("\nCompiled Failed Invalid   Time   FailedType FailedMethod\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1994")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.23")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" org/apache/tomcat/util/IntrospectionUtils setProperty\n    \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nCompiled：编译数量。\nFailed：失败数量\nInvalid：不可用数量\nTime：时间\nFailedType：失败类型\nFailedMethod：失败的方法\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.2")]),s._v(".3.4.5.6.7.8.9.10.11.12.\n")])])]),t("p",[s._v("3 垃圾回收统计")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstat -gc 1094")]),s._v("\n S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT     GCT   \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("832.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("832.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96.4")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7040.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6278.2")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17372.0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16028.9")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20224.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19493.8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2304.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2056.7")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.141")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.030")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.171")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nS0C "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" survivor0区的总容量\nS1C "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" survivor1区的总容量\nS0U "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" survivor0区已使用的容量\nS1C "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" survivor1区已使用的容量\nEC "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Eden区的总容量\nEU "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Eden区已使用的容量\nOC "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Old区的总容量\nOU "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" Old区已使用的容量\nPC 当前perm的容量 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("KB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPU perm的使用 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("KB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nYGC "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 新生代垃圾回收次数\nYGCT "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 新生代垃圾回收时间\nFGC "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 老年代垃圾回收次数\nFGCT "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 老年代垃圾回收时间\nGCT "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 垃圾回收总消耗时间\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\njstat -gc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n\n这个命令意思就是每隔3000ms输出1094的gc情况，一共输出10次\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstat -gcutil 1094    已使用空间占总空间的百分比")]),s._v("\n  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT     GCT   \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12.48")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.74")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("92.27")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("96.39")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("89.27")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.158")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.030")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.187")]),s._v("\n  \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstat -gccapacity 1094    同-gc，不过还会输出Java堆各区域使用到的最大、最小空间 （堆内存统计）")]),s._v("\n NGCMN    NGCMX     NGC     S0C   S1C       EC      OGCMN      OGCMX       OGC         OC       MCMN     MCMX      MC     CCSMN    CCSMX     CCSC    YGC    FGC \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5440.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("83264.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8704.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("832.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("832.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7040.0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10944.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("166592.0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17372.0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17372.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1067008.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20224.0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576.0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2304.0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11.2")]),s._v(".3.4.5.6.7.8.9.10.11.12.13.14.15.16.17.18.19.20.21.22.23.24.25.26.27.28.29.30.31.32.\n")])])]),t("p",[s._v("更多jstat命令参数 可参看https://www.cnblogs.com/lizhonghua34/p/7307139.html")]),s._v(" "),t("h3",{attrs:{id:"三-jstack命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三-jstack命令"}},[s._v("#")]),s._v(" 三 jstack命令")]),s._v(" "),t("p",[s._v("jstack主要用来查看某个Java进程内的线程堆栈信息，jstack可以定位到线程堆栈，根据堆栈信息我们可以定位到具体代码，所以它在JVM性能调优中使用得非常多。")]),s._v(" "),t("p",[s._v("命令行参数选项")]),s._v(" "),t("p",[s._v("-l long listings，会打印出额外的锁信息，在发生死锁时可以用jstack -l pid来观察锁持有情况")]),s._v(" "),t("p",[s._v("-m mixed mode，不仅会输出Java堆栈信息，还会输出C/C++堆栈信息（比如Native方法）")]),s._v(" "),t("h3",{attrs:{id:"常用命令-jstack-pid-切换到对应用户下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令-jstack-pid-切换到对应用户下"}},[s._v("#")]),s._v(" 常用命令 jstack PID （切换到对应用户下）")]),s._v(" "),t("p",[s._v("下面通过一个示例说明；")]),s._v(" "),t("h3",{attrs:{id:"实例找出某个java进程中最耗费cpu的java线程并定位堆栈信息-用到的命令有ps、top、printf、jstack、grep。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例找出某个java进程中最耗费cpu的java线程并定位堆栈信息-用到的命令有ps、top、printf、jstack、grep。"}},[s._v("#")]),s._v(" 实例找出某个Java进程中最耗费CPU的Java线程并定位堆栈信息，用到的命令有ps、top、printf、jstack、grep。")]),s._v(" "),t("p",[s._v("首先找出应用进程的PID")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" java\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jps -l")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1217")]),s._v(" sun.tools.jps.Jps\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v(" org.apache.catalina.startup.Bootstrap\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ps -ef|grep java")]),s._v("\nroot       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(":35 pts/0    00:00:17 /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.161-0.b14.el7_4.x86_64/bin/java -Djava.util.logging.config.file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/apache-tomcat-8.5.31/conf/logging.properties -Djava.util.logging.manager"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" -Djava.protocol.handler.pkgs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0027 -Dignore.endorsed.dirs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" -classpath /home/apache-tomcat-8.5.31/bin/bootstrap.jar:/home/apache-tomcat-8.5.31/bin/tomcat-juli.jar -Dcatalina.base"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/apache-tomcat-8.5.31 -Dcatalina.home"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/apache-tomcat-8.5.31 -Djava.io.tmpdir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/apache-tomcat-8.5.31/temp org.apache.catalina.startup.Bootstrap start1.2.3.4.5.6.7.8.\n")])])]),t("p",[s._v("找到应用进程的PID为1094，接着找出该进程最消耗CPU的线程，可以使用ps -Lfp 1094 或者top -Hp 1094来查看该进程中线程的cpu消耗情况")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# top -Hp 1094")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":40:51 up  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(":52,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" user,  load average: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.05")]),s._v("\nThreads:  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" total,   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" running,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(" sleeping,   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" stopped,   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" zombie\n%Cpu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" us,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.3")]),s._v(" sy,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" ni, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99.7")]),s._v(" id,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" wa,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" hi,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" si,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(" st\nKiB Mem "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("998628")]),s._v(" total,    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84224")]),s._v(" free,   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("690548")]),s._v(" used,   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("223856")]),s._v(" buff/cache\nKiB Swap:  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2097148")]),s._v(" total,  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2068536")]),s._v(" free,    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("28612")]),s._v(" used.   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("146256")]),s._v(" avail Mem \n\n   PID "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND                                         \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1095")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":01.01 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1096")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.54 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1097")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1098")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1099")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1100")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":03.06 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1101")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":01.46 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1102")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.00 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1103")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":06.76 java                                            \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1104")]),s._v(" root      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2778656")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("84996")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5324")]),s._v(" S  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.5")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":00.59 java1.2.3.4.5.6.7.8.9.10.11.12.13.14.15.16.17.18.19.\n")])])]),t("p",[s._v("查看到线程1103的消耗CPU时间是最大的，用命令查看线程的十六进制值")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# printf "%x\\n" 1103')]),s._v("\n44f\n\n查询到的值44f 用于下面jstack 定位信息1.2.3.4.\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jstack 1094|grep 44f")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"VM Periodic Task Thread"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("os_prio")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x00007f602c01bc80 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nid")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x44f waiting on condition1.2.\n")])])]),t("p",[s._v("这样就可以看到VM Periodic Task Thread 是最耗时的类，然后就可以去代码审查代码了。")]),s._v(" "),t("h3",{attrs:{id:"四-jmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四-jmap"}},[s._v("#")]),s._v(" 四 jmap")]),s._v(" "),t("p",[s._v("jmap命令参数")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("dump "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 生成堆转储快照\nfinalizerinfo "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 显示在F-Queue队列等待Finalizer线程执行finalizer方法的对象\nheap "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 显示Java堆详细信息\nhisto "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 显示堆中对象的统计信息\npermstat "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" to print permanent generation statistics\nF "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 当-dump没有响应时，强制生成dump快照1.2.3.4.5.6.\n")])])]),t("p",[s._v("常用情况，用jmap把进程内存使用情况dump到文件中，再用jhat分析查看")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("jmap -dump:format"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("b,file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/dump.dat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1094")]),s._v("\n生成dump.dat文件1.2.\n")])])]),t("p",[s._v("dump出来的文件可以用MAT、VisualVM等工具查看，这里用jhat查看")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jmap -dump:format=b,file=/tmp/dump.dat 1094")]),s._v("\nDumping heap to /tmp/dump.dat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nHeap dump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" created\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@zabbix-agent /"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# jhat -port 9999 /tmp/dump.dat ")]),s._v("\nReading from /tmp/dump.dat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nDump "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" created Sat Jun "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":34:39 CST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v("\nSnapshot read, resolving"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nResolving "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("274150")]),s._v(" objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nChasing references, "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expect")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("54")]),s._v(" dots"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nEliminating duplicate references"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nSnapshot resolved.\nStarted HTTP server on port "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("\nServer is ready.1.2.3.4.5.6.7.8.9.10.11.12.13.\n")])])]),t("p",[s._v("下面就可以浏览器界面查看了")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/dev/tool/jvm-1.png"),alt:"wxmp"}}),s._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),t("ul",[t("li",[s._v("https://blog.51cto.com/superleedo/2132016")]),s._v(" "),t("li",[s._v("https://www.cnblogs.com/wishsaber/p/12411872.html")])])])}),[],!1,null,null,null);a.default=r.exports}}]);