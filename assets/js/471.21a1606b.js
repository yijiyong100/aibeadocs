(window.webpackJsonp=window.webpackJsonp||[]).push([[471],{986:function(a,s,t){"use strict";t.r(s);var e=t(53),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),t("p",[a._v("本文主要是介绍 Ambari-集群安装攻略 。")])]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#ambari-hdp集群搭建全攻略"}},[a._v("Ambari HDP集群搭建全攻略")]),t("ul",[t("li",[t("a",{attrs:{href:"#ambari是什么"}},[a._v("Ambari是什么")])]),t("li",[t("a",{attrs:{href:"#我们能用他干什么-我们为什么要用它呢"}},[a._v("我们能用他干什么？我们为什么要用它呢？")])])])]),t("li",[t("a",{attrs:{href:"#集群搭建"}},[a._v("集群搭建")]),t("ul",[t("li",[t("a",{attrs:{href:"#_1、让我们先做一些安装前的准备工作"}},[a._v("1、让我们先做一些安装前的准备工作")])]),t("li",[t("a",{attrs:{href:"#_2、然后在做一些ubuntu系统的优化"}},[a._v("2、然后在做一些Ubuntu系统的优化")])]),t("li",[t("a",{attrs:{href:"#_3、安装部署ambari-server-环境-ubuntu-14-04-ambari-2-2-1"}},[a._v("3、安装部署ambari-server (环境：Ubuntu 14.04 + Ambari 2.2.1)")])]),t("li",[t("a",{attrs:{href:"#_4、修改ambari-agent配置指向ambari-server"}},[a._v("4、修改ambari-agent配置指向ambari-server")])]),t("li",[t("a",{attrs:{href:"#_5、经过头痛的shell命令-开始连点人间的东西了。"}},[a._v("5、经过头痛的Shell命令，开始连点人间的东西了。")])]),t("li",[t("a",{attrs:{href:"#_6、给集群起一个名字"}},[a._v("6、给集群起一个名字")])]),t("li",[t("a",{attrs:{href:"#_7、这个里要注意一点确定你的hdp版本不然后面会有麻烦"}},[a._v("7、这个里要注意一点确定你的hdp版本不然后面会有麻烦")])]),t("li",[t("a",{attrs:{href:"#_8、我在这里面配置的是hdp2-4-3"}},[a._v("8、我在这里面配置的是HDP2.4.3")])]),t("li",[t("a",{attrs:{href:"#_9、填入hostname-master-slave1-slave2-因为在slave安装ambari-agent-所以直接选择不使用ssh"}},[a._v("9、填入hostname master slave1 slave2 因为在slave安装ambari-agent 所以直接选择不使用ssh")])]),t("li",[t("a",{attrs:{href:"#_10、检查服务器状态-这里需要等待一下-如果等待时间过长可以重启ambari-server"}},[a._v("10、检查服务器状态--这里需要等待一下 如果等待时间过长可以重启ambari-server")])]),t("li",[t("a",{attrs:{href:"#_11、选择我们需要的服务-hdfs-yarn-zk"}},[a._v("11、选择我们需要的服务 HDFS YARN ZK")])]),t("li",[t("a",{attrs:{href:"#_12、直接使用ambari默认分配方式-点击下一步开始安装"}},[a._v("12、直接使用Ambari默认分配方式 点击下一步开始安装")])]),t("li",[t("a",{attrs:{href:"#_13、下面就是考虑网速的时候了"}},[a._v("13、下面就是考虑网速的时候了")])]),t("li",[t("a",{attrs:{href:"#_14、安装完成之后一路next刷新主页面就看到了我们的hadoop集群这里默认都是启动的"}},[a._v("14、安装完成之后一路Next刷新主页面就看到了我们的Hadoop集群这里默认都是启动的")])]),t("li",[t("a",{attrs:{href:"#_15、进入hdfs下-点击restart-all-可以重启所有组件"}},[a._v("15、进入HDFS下 点击restart ALL 可以重启所有组件")])]),t("li",[t("a",{attrs:{href:"#_16、验证一下是否安装成功-点击namenodeui"}},[a._v("16、验证一下是否安装成功 点击NameNodeUI")])]),t("li",[t("a",{attrs:{href:"#_17、基础信息页"}},[a._v("17、基础信息页")])]),t("li",[t("a",{attrs:{href:"#_18、hadoop已经搭建完成完成了不想跑一个任务试试吗"}},[a._v("18、Hadoop已经搭建完成完成了不想跑一个任务试试吗？")])]),t("li",[t("a",{attrs:{href:"#_19、结果如下-生成-success-和文件"}},[a._v("19、结果如下 生成_SUCCESS 和文件")])]),t("li",[t("a",{attrs:{href:"#下面是不正经叙述"}},[a._v("下面是不正经叙述")])]),t("li",[t("a",{attrs:{href:"#参考文章"}},[a._v("参考文章")])])])])])]),t("p"),a._v(" "),t("h2",{attrs:{id:"ambari-hdp集群搭建全攻略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ambari-hdp集群搭建全攻略"}},[a._v("#")]),a._v(" Ambari HDP集群搭建全攻略")]),a._v(" "),t("blockquote",[t("p",[a._v("世界上最快的捷径，就是脚踏实地，本文已收录【"),t("a",{attrs:{href:"https://www.jiagoujishu.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("架构技术专栏"),t("OutboundLink")],1),a._v("】关注这个喜欢分享的地方。")])]),a._v(" "),t("blockquote",[t("p",[a._v("最近因为工作上需要重新用Ambari搭了一套Hadoop集群，就把搭建的过程记录了下来，也希望给有同样需求的小伙伴们一个参考，")]),a._v(" "),t("p",[a._v("作者：图头数据")]),a._v(" "),t("p",[a._v("Ambari Ubuntu14.04 最新版本 2.2.1")]),a._v(" "),t("p",[a._v("HDP Ubuntu14.04 最新版本 2.4.3.0")])]),a._v(" "),t("h3",{attrs:{id:"ambari是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ambari是什么"}},[a._v("#")]),a._v(" Ambari是什么")]),a._v(" "),t("p",[a._v("Apache Ambari是一种基于Web的工具，支持Apache Hadoop集群的供应、管理和监控。")]),a._v(" "),t("p",[a._v("Ambari已支持大多数Hadoop组件，包括HDFS、MapReduce、Hive、Pig、 Hbase、Zookeeper、Sqoop和Hcatalog等。")]),a._v(" "),t("p",[a._v("Apache Ambari 支持HDFS、MapReduce、Hive、Pig、Hbase、Zookeepr、Sqoop和Hcatalog等的集中管理。也是5个顶级hadoop管理工具之一。（就是一个开源的hadoop一键式安装服务）")]),a._v(" "),t("h3",{attrs:{id:"我们能用他干什么-我们为什么要用它呢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#我们能用他干什么-我们为什么要用它呢"}},[a._v("#")]),a._v(" 我们能用他干什么？我们为什么要用它呢？")]),a._v(" "),t("p",[a._v("我们可以使用ambari快速的搭建和管理hadoop和经常使用的服务组件。")]),a._v(" "),t("p",[a._v("比如hdfs、yarn、hive、hbase、oozie、sqoop、flume、zookeeper、kafka等等。（说白了就是可以偷好多懒）")]),a._v(" "),t("p",[a._v("再说说我们为什么要用它")]),a._v(" "),t("ul",[t("li",[a._v("第一是ambari还算是一个早期的Hadoop管理集群工具")]),a._v(" "),t("li",[a._v("第二主要是现在Hadoop官网也在推荐使用Ambari。")]),a._v(" "),t("li",[a._v("通过一步一步的安装向导简化了集群供应。")]),a._v(" "),t("li",[a._v("预先配置好关键的运维指标（metrics），可以直接查看Hadoop Core（HDFS和MapReduce）及相关项目（如HBase、Hive和HCatalog）是否健康。")]),a._v(" "),t("li",[a._v("支持作业与任务执行的可视化与分析，能够更好地查看依赖和性能。")]),a._v(" "),t("li",[a._v("通过一个完整的RESTful API把监控信息暴露出来，集成了现有的运维工具。")]),a._v(" "),t("li",[a._v("用户界面非常直观，用户可以轻松有效地查看信息并控制集群。")])]),a._v(" "),t("p",[a._v("Ambari使用"),t("a",{attrs:{href:"https://baike.baidu.com/item/Ganglia",target:"_blank",rel:"noopener noreferrer"}},[a._v("Ganglia"),t("OutboundLink")],1),a._v("收集度量指标，用"),t("a",{attrs:{href:"https://baike.baidu.com/item/Nagios",target:"_blank",rel:"noopener noreferrer"}},[a._v("Nagios"),t("OutboundLink")],1),a._v("支持系统报警，当需要引起管理员的关注时（比如，节点停机或磁盘剩余空间不足等问题），系统将向其发送邮件。")]),a._v(" "),t("p",[a._v("此外，Ambari能够安装安全的（基于Kerberos）Hadoop集群，以此实现了对Hadoop 安全的支持，提供了基于角色的用户认证、授权和审计功能，并为用户管理集成了LDAP和Active Directory。")]),a._v(" "),t("h2",{attrs:{id:"集群搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群搭建"}},[a._v("#")]),a._v(" 集群搭建")]),a._v(" "),t("h3",{attrs:{id:"_1、让我们先做一些安装前的准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、让我们先做一些安装前的准备工作"}},[a._v("#")]),a._v(" 1、让我们先做一些安装前的准备工作")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 先告诉服务器们他们都是谁，小名都叫啥（修改配置hosts文件）")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/hosts\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10.1")]),a._v(".10.1 master\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10.1")]),a._v(".10.2 slave1\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10.1")]),a._v(".10.3 slave2\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 然后让我们拿着门禁卡自由的出入他们家 哔咔进站（配置免密登录）")]),a._v("\nssh-keygen -t rsa "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##在所有的机器上执行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" ~/.ssh/id_rsa.pub "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 查看公钥")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" ~/.ssh/id_rsa.pub "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">>")]),a._v(" ~/.ssh/authorized_keys "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 将公钥写入authorized_keys文件中")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 首先把所有的公钥都写入master服务器")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 其次把master的公钥别写入slave1,slave2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 最后使用scp命令把口令告诉别人 （我不会告诉你我的口令是“老狼老狼几点了”）")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" ~/.ssh/authorized_keys slave1:~/.ssh/authorized_keys\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" ~/.ssh/authorized_keys slave2:~/.ssh/authorized_keys\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##更新时区和系统本地化的配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" localepurge "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 一顿enter不要管 （卸载那些不被使用的local翻译文档）")]),a._v("\ndpkg-reconfigure localepurge "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" locale-gen zh_CN.UTF-8 en_US.UTF-8 "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 一顿enter不要管")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y tzdata \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Asia/Shanghai"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /etc/timezone  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 修改时区为上海")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" /etc/localtime\ndpkg-reconfigure -f noninteractive tzdata\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v("  /etc/ntp.conf\nserver "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10.1")]),a._v(".10.1\n")])])]),t("h3",{attrs:{id:"_2、然后在做一些ubuntu系统的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、然后在做一些ubuntu系统的优化"}},[a._v("#")]),a._v(" 2、然后在做一些Ubuntu系统的优化")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("###1.1 关闭交换分区")]),a._v("\nswapoff -a\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/fstab "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 删除注释swap那一行 类似下面")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## swap was on /dev/sda2 during installation")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#UUID=8aba5009-d557-4a4a-8fd6-8e6e8c687714 none swap  sw   0   0")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 1.2 修改文件描述符打开数 在最后添加 ulimit")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/profile\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("ulimit")]),a._v(" -SHn "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("512000")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/security/limits.conf "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 调整大小都增大10倍")]),a._v("\n* soft nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("600000")]),a._v("\n* hard nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("655350")]),a._v("\n* soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("600000")]),a._v("\n* hard nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("655350")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 1.2 使用命令是修改生效")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("###1.3 修改内核配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/sysctl.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 贴上去就行")]),a._v("\nfs.file-max "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("65535000")]),a._v("\nnet.core.somaxconn "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30000")]),a._v("\nvm.swappiness "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\nnet.core.rmem_max "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16777216")]),a._v("\nnet.core.wmem_max "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16777216")]),a._v("\nnet.ipv4.tcp_rmem "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4096")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("87380")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16777216")]),a._v("\nnet.ipv4.tcp_wmem "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4096")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16384")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16777216")]),a._v("\nnet.core.netdev_max_backlog "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("16384")]),a._v("\nnet.ipv4.tcp_max_syn_backlog "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8192")]),a._v("\nnet.ipv4.tcp_syncookies "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nnet.ipv4.tcp_tw_reuse "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nnet.ipv4.tcp_tw_recycle "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nnet.ipv4.ip_local_port_range "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("65000")]),a._v("\nnet.ipv6.conf.all.disable_ipv6"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nnet.ipv6.conf.default.disable_ipv6"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\nnet.ipv6.conf.lo.disable_ipv6"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 执行命令让配置生效")]),a._v("\nsysctl -p\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("###1.4 配置内核关闭THP功能")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" never "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /sys/kernel/mm/transparent_hugepage/enabled\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##永久关闭。")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/rc.local   \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" -f /sys/kernel/mm/transparent_hugepage/enabled"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("  \n   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" never "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /sys/kernel/mm/transparent_hugepage/enabled  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("test")]),a._v(" -f /sys/kernel/mm/transparent_hugepage/defrag"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("  \n   "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" never "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /sys/kernel/mm/transparent_hugepage/defrag  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("  \n")])])]),t("h3",{attrs:{id:"_3、安装部署ambari-server-环境-ubuntu-14-04-ambari-2-2-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、安装部署ambari-server-环境-ubuntu-14-04-ambari-2-2-1"}},[a._v("#")]),a._v(" 3、安装部署ambari-server (环境：Ubuntu 14.04 + Ambari 2.2.1)")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 更新下载源")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" -O /etc/apt/sources.list.d/ambari.list http://public-repo-1.hortonworks.com/ambari/ubuntu14/2.x/updates/2.2.1.0/ambari.list\napt-key adv --recv-keys --keyserver keyserver.ubuntu.com B9733A7A07513CAD\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" update\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 在master节点安装ambari-server ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ambari-server -y\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 在所有节点安装 ambari-agent ")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-get")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ambari-agent -y\n")])])]),t("h3",{attrs:{id:"_4、修改ambari-agent配置指向ambari-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、修改ambari-agent配置指向ambari-server"}},[a._v("#")]),a._v(" 4、修改ambari-agent配置指向ambari-server")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/ambari-agent/conf/ambari-agent.ini\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 修改hostname")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("hostname")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("master\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("url_port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8440")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("secured_url_port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8441")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 初始化ambari-server配置ambari 服务 Database, JDK(默认1.7), LDAP 一般选默认  ")]),a._v("\nambari-server setup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 狂点enter")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 启动ambari")]),a._v("\nambari-server start\nambari-agent start\n")])])]),t("h3",{attrs:{id:"_5、经过头痛的shell命令-开始连点人间的东西了。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、经过头痛的shell命令-开始连点人间的东西了。"}},[a._v("#")]),a._v(" 5、经过头痛的Shell命令，开始连点人间的东西了。")]),a._v(" "),t("p",[a._v("使用你的浏览器访问 http://10.1.10.1:8080/ 账号密码默认为"),t("code",[a._v("amdin/admin")]),a._v("点击"),t("code",[a._v("LAUNCH INSTALL WIZARD")]),a._v("让我们愉快的开始吧")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/5d8ea94ef2db4c23bfec7b26afd21b53_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_6、给集群起一个名字"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、给集群起一个名字"}},[a._v("#")]),a._v(" 6、给集群起一个名字")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/cb0b9669334642d3ba99aaa45e3c7c11_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_7、这个里要注意一点确定你的hdp版本不然后面会有麻烦"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7、这个里要注意一点确定你的hdp版本不然后面会有麻烦"}},[a._v("#")]),a._v(" 7、这个里要注意一点确定你的hdp版本不然后面会有麻烦")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/c73a8333635445a9895b3d1893ee2c6b_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_8、我在这里面配置的是hdp2-4-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8、我在这里面配置的是hdp2-4-3"}},[a._v("#")]),a._v(" 8、我在这里面配置的是HDP2.4.3")]),a._v(" "),t("p",[a._v("例子： http://public-repo-1.hortonworks.com/HDP/debian7/2.x/updates/2.4.3.0")]),a._v(" "),t("p",[a._v('点击next 会检查数据源是否正常，如果这里报错可以点击 "Skip Repository Base URL validation (Advanced) " 进行跳过检查')]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/d24581fba7bd4b70972112d8604eaa32_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_9、填入hostname-master-slave1-slave2-因为在slave安装ambari-agent-所以直接选择不使用ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9、填入hostname-master-slave1-slave2-因为在slave安装ambari-agent-所以直接选择不使用ssh"}},[a._v("#")]),a._v(" 9、填入hostname master slave1 slave2 因为在slave安装ambari-agent 所以直接选择不使用ssh")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/70d427250053476394efc6461de92d24_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_10、检查服务器状态-这里需要等待一下-如果等待时间过长可以重启ambari-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10、检查服务器状态-这里需要等待一下-如果等待时间过长可以重启ambari-server"}},[a._v("#")]),a._v(" 10、检查服务器状态--这里需要等待一下 如果等待时间过长可以重启ambari-server")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/cc5cf3905cf14558949c141ff9214bbb_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_11、选择我们需要的服务-hdfs-yarn-zk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11、选择我们需要的服务-hdfs-yarn-zk"}},[a._v("#")]),a._v(" 11、选择我们需要的服务 HDFS YARN ZK")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/931d6a9c74d4458891ff6fdab899e65a_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_12、直接使用ambari默认分配方式-点击下一步开始安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12、直接使用ambari默认分配方式-点击下一步开始安装"}},[a._v("#")]),a._v(" 12、直接使用Ambari默认分配方式 点击下一步开始安装")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/003e3788bf214a639ff4fb5a3ac09dea_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_13、下面就是考虑网速的时候了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13、下面就是考虑网速的时候了"}},[a._v("#")]),a._v(" 13、下面就是考虑网速的时候了")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/1cf3da5b668245ceb991f0688ef7a395_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_14、安装完成之后一路next刷新主页面就看到了我们的hadoop集群这里默认都是启动的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14、安装完成之后一路next刷新主页面就看到了我们的hadoop集群这里默认都是启动的"}},[a._v("#")]),a._v(" 14、安装完成之后一路Next刷新主页面就看到了我们的Hadoop集群这里默认都是启动的")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/46b22860a5cb46f6b0963ec973f54604_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_15、进入hdfs下-点击restart-all-可以重启所有组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15、进入hdfs下-点击restart-all-可以重启所有组件"}},[a._v("#")]),a._v(" 15、进入HDFS下 点击restart ALL 可以重启所有组件")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/7914defe51264e6a859ca134f7de2e34_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_16、验证一下是否安装成功-点击namenodeui"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_16、验证一下是否安装成功-点击namenodeui"}},[a._v("#")]),a._v(" 16、验证一下是否安装成功 点击NameNodeUI")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/e0403b185c50456eb8e7378d81208919_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_17、基础信息页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_17、基础信息页"}},[a._v("#")]),a._v(" 17、基础信息页")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/98781b308f274b328510b73d9765ad0a_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/50bf843545a1497cb22d08ac2db40467_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/8f1146e491dd46828cef0f61e823eb0a_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/7b3077ab32274718b62370f85e3207ee_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_18、hadoop已经搭建完成完成了不想跑一个任务试试吗"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_18、hadoop已经搭建完成完成了不想跑一个任务试试吗"}},[a._v("#")]),a._v(" 18、Hadoop已经搭建完成完成了不想跑一个任务试试吗？")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("### 进入服务器执行")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 创建hdfs目录 可以再http://master:50070/explorer.html#/界面")]),a._v("\nhdfs dfs -mkdir -p /data/input \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 从服务器上传文件到hdfs上")]),a._v("\nhdfs dfs -put 文件  /data/input/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#### 使用官网提供的例子进行测试")]),a._v("\nhadoop jar hdfs://tesla-cluster/data/hadoop-mapreduce-examples-2.7.1.2.4.0.0-169.jar wordcount /data/input /data/output1\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/3423adf101fd40118e9c60983ab631f7_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/5161c2d3e85b415699d88f877aef334e_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"_19、结果如下-生成-success-和文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_19、结果如下-生成-success-和文件"}},[a._v("#")]),a._v(" 19、结果如下 生成_SUCCESS 和文件")]),a._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/dw/ambari/install/93c0356378c845dab7da220403ed2aee_tplv-k3u1fbpfcp-zoom-1.png"),alt:"wxmp"}}),a._v(" "),t("h3",{attrs:{id:"下面是不正经叙述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下面是不正经叙述"}},[a._v("#")]),a._v(" 下面是不正经叙述")]),a._v(" "),t("p",[a._v("终于，通过上面的步骤我们搭建了一套hadoop集群，但随之而来的还有一些问题，NameNode 和ResouceManage 都是单点的模式，ambari支持HA(高可用) 因为篇幅有限，图头后面会单开一张来讲。")]),a._v(" "),t("h3",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),t("ul",[t("li",[a._v("https://www.cnblogs.com/jiagoujishu/p/14101235.html")])])])}),[],!1,null,null,null);s.default=r.exports}}]);