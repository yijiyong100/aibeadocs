(window.webpackJsonp=window.webpackJsonp||[]).push([[510],{1026:function(a,t,_){"use strict";_.r(t);var v=_(53),s=Object(v.a)({},(function(){var a=this,t=a.$createElement,_=a._self._c||t;return _("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),_("p",[a._v("本文主要是介绍 Kibana-安装和配置 。")])]),a._v(" "),_("p"),_("div",{staticClass:"table-of-contents"},[_("ul",[_("li",[_("a",{attrs:{href:"#kibana安装"}},[a._v("Kibana安装")])]),_("li",[_("a",{attrs:{href:"#kibana简介"}},[a._v("Kibana简介")])]),_("li",[_("a",{attrs:{href:"#下载-安装"}},[a._v("下载&安装")]),_("ul",[_("li",[_("a",{attrs:{href:"#下载"}},[a._v("下载")])]),_("li",[_("a",{attrs:{href:"#安装"}},[a._v("安装")])])])]),_("li",[_("a",{attrs:{href:"#使用kibana访问elasticsearch"}},[a._v("使用Kibana访问ElasticSearch")])]),_("li",[_("a",{attrs:{href:"#【-】"}},[a._v("【----------------------------】")])]),_("li",[_("a",{attrs:{href:"#简介"}},[a._v("简介")])]),_("li",[_("a",{attrs:{href:"#界面"}},[a._v("界面")]),_("ul",[_("li",[_("a",{attrs:{href:"#支持的平台"}},[a._v("支持的平台")])]),_("li",[_("a",{attrs:{href:"#elasticsearch-版本"}},[a._v("Elasticsearch 版本")])]),_("li",[_("a",{attrs:{href:"#安装-kibana"}},[a._v("安装 Kibana")])]),_("li",[_("a",{attrs:{href:"#使用-tar-gz-安装-kibanakibana-为-linux-和-darwin-平台提供了-tar-gz-安装包。这些类型的包非常容易使用。"}},[a._v("使用 .tar.gz 安装 KibanaKibana 为 Linux 和 Darwin 平台提供了 .tar.gz 安装包。这些类型的包非常容易使用。")])]),_("li",[_("a",{attrs:{href:"#tar-gz-文件目录"}},[a._v(".tar.gz 文件目录")])])])]),_("li",[_("a",{attrs:{href:"#"}}),_("ul",[_("li",[_("a",{attrs:{href:"#在-windows-上安装-kibana"}},[a._v("在 Windows 上安装 Kibana")])]),_("li",[_("a",{attrs:{href:"#zip-文件目录"}},[a._v(".zip 文件目录")])]),_("li",[_("a",{attrs:{href:"#使用-debian-包安装-kibana"}},[a._v("使用 Debian 包安装 Kibana")])]),_("li",[_("a",{attrs:{href:"#使用-rpm-包安装-kibana"}},[a._v("使用 RPM 包安装 Kibana")])]),_("li",[_("a",{attrs:{href:"#docker-容器中运行-kibana"}},[a._v("Docker 容器中运行 Kibana")])])])]),_("li",[_("a",{attrs:{href:"#访问-kibana"}},[a._v("访问 Kibana")])]),_("li",[_("a",{attrs:{href:"#参考文章"}},[a._v("参考文章")])])])]),_("p"),a._v(" "),_("h2",{attrs:{id:"kibana安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#kibana安装"}},[a._v("#")]),a._v(" Kibana安装")]),a._v(" "),_("h2",{attrs:{id:"kibana简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#kibana简介"}},[a._v("#")]),a._v(" Kibana简介")]),a._v(" "),_("blockquote",[_("p",[a._v("Kibana 是一个免费且开放的用户界面，能够让您对 Elasticsearch 数据进行可视化，并让您在 Elastic Stack 中进行导航。您可以进行各种操作，从跟踪查询负载，到理解请求如何流经您的整个应用，都能轻松完成。")])]),a._v(" "),_("ul",[_("li",[a._v("Kibana是ElasticSearch的一个工具，用来分析ES中的数据并以各种图形界面显示出来")]),a._v(" "),_("li",[a._v("可以作为ElasticSearch的一个客户端，在Kibana中可以很轻松的调用ES的RESTful接口")])]),a._v(" "),_("h2",{attrs:{id:"下载-安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#下载-安装"}},[a._v("#")]),a._v(" 下载&安装")]),a._v(" "),_("h3",{attrs:{id:"下载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),_("ul",[_("li",[a._v("官网下载地址：https://www.elastic.co/cn/kibana")]),a._v(" "),_("li",[a._v("华为镜像市场：https://mirrors.huaweicloud.com/kibana/ （需先注册一个账号）")])]),a._v(" "),_("h3",{attrs:{id:"安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("下载压缩包并解压之后，需要关注两个文件夹，一个是config文件夹，里面的kibana.yml是配置文件；一个是bin文件夹，里面有kibana启动的bat脚本")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/installdetail/718864-20200707152330746-264461601.png"),alt:"wxmp"}})]),a._v(" "),_("li",[_("p",[a._v("修改kibana.yml，添加上ElasticSearch的访问地址")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/installdetail/718864-20200707152625227-1259162038.png"),alt:"wxmp"}})]),a._v(" "),_("li",[_("p",[a._v("打开MSDos，或者PowerShell，然后进入到bin文件夹，启动kibana")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/installdetail/718864-20200707152800327-1076412309.png"),alt:"wxmp"}})]),a._v(" "),_("li",[_("p",[a._v("当看到输出[listening] Server running at "),_("a",{attrs:{href:"http://localhost:5601/",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://localhost:5601"),_("OutboundLink")],1),a._v(" 那么启动成功了， 可以在浏览器中进行访问了")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/installdetail/718864-20200707152957384-1303678749.png"),alt:"wxmp"}})])]),a._v(" "),_("h2",{attrs:{id:"使用kibana访问elasticsearch"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用kibana访问elasticsearch"}},[a._v("#")]),a._v(" 使用Kibana访问ElasticSearch")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("在kibana的左侧Menu中找到一个大钳子的图标【DevTools】，这个是开发者工具。在这个界面可以编写es的查询DSL语句，并发起对es的请求")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/installdetail/718864-20200707153227294-255824452.png"),alt:"wxmp"}})])]),a._v(" "),_("h2",{attrs:{id:"【-】"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#【-】"}},[a._v("#")]),a._v(" 【----------------------------】")]),a._v(" "),_("h2",{attrs:{id:"简介"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),_("p",[a._v("Kibana 是一款开源的数据分析和可视化平台，它是 Elastic Stack 成员之一，设计用于和 Elasticsearch 协作。您可以使用 Kibana 对 Elasticsearch 索引中的数据进行搜索、查看、交互操作。您可以很方便的利用图表、表格及地图对数据进行多元化的分析和呈现。")]),a._v(" "),_("p",[a._v("Kibana 可以使大数据通俗易懂。它很简单，基于浏览器的界面便于您快速创建和分享动态数据仪表板来追踪 Elasticsearch 的实时数据变化。")]),a._v(" "),_("p",[a._v("搭建 Kibana 非常简单。您可以分分钟完成 Kibana 的安装并开始探索 Elasticsearch 的索引数据 — 没有代码、不需要额外的基础设施。")]),a._v(" "),_("h2",{attrs:{id:"界面"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#界面"}},[a._v("#")]),a._v(" 界面")]),a._v(" "),_("p",[a._v("为了给大家一个直观的感觉，先上个图让大家来围观一下它靓照：")]),a._v(" "),_("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/es/kibana/install-1.png"),alt:"wxmp"}}),a._v(" "),_("h3",{attrs:{id:"支持的平台"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#支持的平台"}},[a._v("#")]),a._v(" 支持的平台")]),a._v(" "),_("p",[a._v("Kibana 有 Linux、Darwin 和 Windows 版本的安装包。由于 Kibana 基于 Node.js 运行，我们在这些平台上包含了一些必要的 Node.js 二进制文件。Kibana 不支持在独立维护的 Node.js 版本上运行。")]),a._v(" "),_("h3",{attrs:{id:"elasticsearch-版本"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-版本"}},[a._v("#")]),a._v(" Elasticsearch 版本")]),a._v(" "),_("p",[a._v("Kibana 的版本需要和 Elasticsearch 的版本一致。这是官方支持的配置。")]),a._v(" "),_("p",[a._v("运行不同主版本号的 Kibana 和 Elasticsearch 是不支持的（例如 Kibana 5.x 和 Elasticsearch 2.x），若主版本号相同，运行 Kibana 子版本号比 Elasticsearch 子版本号新的版本也是不支持的（例如 Kibana 5.1 和 Elasticsearch 5.0）。")]),a._v(" "),_("p",[a._v("运行一个 Elasticsearch 子版本号大于 Kibana 的版本基本不会有问题，这种情况一般是便于先将 Elasticsearch 升级（例如 Kibana 5.0 和 Elasticsearch 5.1）。在这种配置下，Kibana 启动日志中会出现一个警告，所以一般只是使用于 Kibana 即将要升级到和 Elasticsearch 相同版本的场景。")]),a._v(" "),_("p",[a._v("运行不同的 Kibana 和 Elasticsearch 补丁版本一般是支持的（例如：Kibana 5.0.0 和 Elasticsearch 5.0.1），尽管我们鼓励用户去运行最新的补丁更新版本。")]),a._v(" "),_("h3",{attrs:{id:"安装-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安装-kibana"}},[a._v("#")]),a._v(" 安装 Kibana")]),a._v(" "),_("p",[a._v("从6.0.0开始，Kibana 只支持64位操作系统。")]),a._v(" "),_("p",[a._v("Kibana 提供以下格式的安装包：")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("tar.gz/zip")]),a._v(" "),_("th",[a._v("tar.gz 包用来在 Linux 和 Darwin 系统下安装，也是最方便的一种选择。zip 包是唯一支持 Windows 系统的安装包。使用 .tar.gz 安装 Kibana 或者 在 Windows 上安装 Kibana")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("deb")]),a._v(" "),_("td",[a._v("deb 包用来在 Debian、Ubuntu 和其他基于 Debian 的系统下安装，Debian 包可以从 Elastic 官网或者我们的 Debian 仓库中下载。使用 Debian 包安装 Kibana")])]),a._v(" "),_("tr",[_("td",[a._v("rpm")]),a._v(" "),_("td",[a._v("rpm 包用来在 Red Hat、Centos、SLES、OpenSuSe 以及其他基于 RPM 的系统下安装。RPM 包可以从 Elastic 官网或者我们的 RPM 仓库下载。使用 RPM 包安装 Kibana")])]),a._v(" "),_("tr",[_("td",[a._v("docker")]),a._v(" "),_("td",[a._v("Elastic Docker 仓库中有现有的可以运行 Kibana 的 Docker 镜像，并预装了 X-Pack 。"),_("em",[a._v("Docker 容器中运行 Kibana")])])])])]),a._v(" "),_("h3",{attrs:{id:"使用-tar-gz-安装-kibanakibana-为-linux-和-darwin-平台提供了-tar-gz-安装包。这些类型的包非常容易使用。"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-tar-gz-安装-kibanakibana-为-linux-和-darwin-平台提供了-tar-gz-安装包。这些类型的包非常容易使用。"}},[a._v("#")]),a._v(" 使用 .tar.gz 安装 KibanaKibana 为 Linux 和 Darwin 平台提供了 .tar.gz 安装包。这些类型的包非常容易使用。")]),a._v(" "),_("p",[a._v("Kibana 的最新稳定版本可以在 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibana 下载"),_("OutboundLink")],1),a._v("页找到。其它版本可以在 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("已发布版本"),_("OutboundLink")],1),a._v("中查看。")]),a._v(" "),_("h4",{attrs:{id:"下载安装-linux-64-位包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-linux-64-位包"}},[a._v("#")]),a._v(" 下载安装 Linux 64 位包")]),a._v(" "),_("p",[a._v("Kibana v6.0.0 的 Linux 文件可以按照如下方式下载和安装：")]),a._v(" "),_("p",[a._v("wget https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-linux-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("sha1sum kibana-6.0.0-linux-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("tar -xzf kibana-6.0.0-linux-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("cd kibana/")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th"),a._v(" "),_("th",[a._v("比较 sha1sum 或 shasum 产生的 SHA 跟 "),_("a",{attrs:{href:"https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-linux-x86_64.tar.gz.sha1",target:"_blank",rel:"noopener noreferrer"}},[a._v("发布 SHA"),_("OutboundLink")],1),a._v("是否一致。")])])]),a._v(" "),_("tbody",[_("tr",[_("td"),a._v(" "),_("td",[a._v("该目录是 $KIBANA_HOME 。")])])])]),a._v(" "),_("h4",{attrs:{id:"下载安装-darwin-包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-darwin-包"}},[a._v("#")]),a._v(" 下载安装 Darwin 包")]),a._v(" "),_("p",[a._v("Kibana v6.0.0 的 Darwin 文件可以按照如下方式下载和安装：")]),a._v(" "),_("p",[a._v("wget https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-darwin-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("shasum kibana-6.0.0-darwin-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("tar -xzf kibana-6.0.0-darwin-x86_64.tar.gz")]),a._v(" "),_("p",[a._v("cd kibana/")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th"),a._v(" "),_("th",[a._v("比较 sha1sum 或 shasum 产生的SHA 跟 "),_("a",{attrs:{href:"https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-darwin-x86_64.tar.gz.sha1",target:"_blank",rel:"noopener noreferrer"}},[a._v("发布的 SHA"),_("OutboundLink")],1),a._v("是否一致。")])])]),a._v(" "),_("tbody",[_("tr",[_("td"),a._v(" "),_("td",[a._v("该目录是 $KIBANA_HOME 。")])])])]),a._v(" "),_("h4",{attrs:{id:"从命令行启动-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从命令行启动-kibana"}},[a._v("#")]),a._v(" 从命令行启动 Kibana")]),a._v(" "),_("p",[a._v("Kibana 可以从命令行启动，命令如下：")]),a._v(" "),_("p",[a._v("./bin/kibana")]),a._v(" "),_("p",[a._v("默认 Kibana 在前台启动，打印日志到标准输出 (stdout)，可以通过 Ctrl-C 命令终止运行。")]),a._v(" "),_("h4",{attrs:{id:"通过配置文件配置-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件配置-kibana"}},[a._v("#")]),a._v(" 通过配置文件配置 Kibana")]),a._v(" "),_("p",[a._v("Kibana 默认情况下从 $KIBANA_HOME/config/kibana.yml 加载配置文件。该配置文件的格式在 "),_("a",{attrs:{href:"https://www.cnblogs.com/BlogNetSpace/p/9633653.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("配置 Kibana "),_("OutboundLink")],1),a._v("中做了说明。")]),a._v(" "),_("h3",{attrs:{id:"tar-gz-文件目录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tar-gz-文件目录"}},[a._v("#")]),a._v(" .tar.gz 文件目录")]),a._v(" "),_("p",[a._v(".tar.gz 整个包是独立的。默认情况下，所有的文件和目录都在 $KIBANA_HOME — 解压包时创建的目录下。这样非常方便，因为您不需要创建任何目录来使用 Kibana，卸载 Kibana 就是简单地删除 $KIBANA_HOME 目录。但还是建议修改一下配置文件和数据目录，这样就不会删除重要数据。")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("类型")]),a._v(" "),_("th",[a._v("描述")]),a._v(" "),_("th",[a._v("默认位置")]),a._v(" "),_("th",[a._v("设置")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("home")]),a._v(" "),_("td",[a._v("Kibana home 目录或 $KIBANA_HOME 。")]),a._v(" "),_("td",[a._v("解压包时创建的目录")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("bin")]),a._v(" "),_("td",[a._v("二进制脚本，包括 kibana 启动 Kibana 服务和 kibana-plugin 安装插件。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\bin")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("config")]),a._v(" "),_("td",[a._v("配置文件，包括 kibana.yml 。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\config")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("data")]),a._v(" "),_("td",[a._v("Kibana 和其插件写入磁盘的数据文件位置。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\data")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("optimize")]),a._v(" "),_("td",[a._v("编译过的源码。某些管理操作(如，插件安装)导致运行时重新编译源码。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\optimize")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("plugins")]),a._v(" "),_("td",[a._v("插件文件位置。每一个插件都有一个单独的二级目录。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\plugins")]),a._v(" "),_("td")])])]),a._v(" "),_("h2",{attrs:{id:""}},[_("a",{staticClass:"header-anchor",attrs:{href:"#"}},[a._v("#")])]),a._v(" "),_("h3",{attrs:{id:"在-windows-上安装-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#在-windows-上安装-kibana"}},[a._v("#")]),a._v(" 在 Windows 上安装 Kibana")]),a._v(" "),_("p",[a._v("在 Windows 中安装 Kibana 使用 .zip 包。")]),a._v(" "),_("p",[a._v("最新稳定版 Kibana 可以从 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibana 下载"),_("OutboundLink")],1),a._v("页获得。其他版本可以在 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("已发布版本"),_("OutboundLink")],1),a._v("中查看。")]),a._v(" "),_("h4",{attrs:{id:"下载安装-zip-包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#下载安装-zip-包"}},[a._v("#")]),a._v(" 下载安装 .zip 包")]),a._v(" "),_("p",[a._v("下载 Kibana v6.0.0 的 .zip windows 文件： https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-windows-x86_64.zip")]),a._v(" "),_("p",[a._v("用您喜欢的解压工具解压下载的 zip 包。会创建一个文件夹叫 kibana-6.0.0-windows-x86_64，也就是我们指的 $KIBANA_HOME 。在一个终端窗口中， CD 到 $KIBANA_HOME 目录，例如：")]),a._v(" "),_("p",[a._v("CD c:\\kibana-6.0.0-windows-x86_64")]),a._v(" "),_("h4",{attrs:{id:"从命令行启动-kibana-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从命令行启动-kibana-2"}},[a._v("#")]),a._v(" 从命令行启动 Kibana")]),a._v(" "),_("p",[a._v("Kibana 可以从命令行启动，如下：")]),a._v(" "),_("p",[a._v(".\\bin\\kibana")]),a._v(" "),_("p",[a._v("默认情况下，Kibana 在前台启动，输出 log 到 STDOUT ，可以通过 Ctrl-C 停止 Kibana。")]),a._v(" "),_("h4",{attrs:{id:"通过配置文件配置-kibana-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件配置-kibana-2"}},[a._v("#")]),a._v(" 通过配置文件配置 Kibana")]),a._v(" "),_("p",[a._v("Kibana 默认情况下从 $KIBANA_HOME/config/kibana.yml 加载配置文件。该配置文件的格式在 "),_("a",{attrs:{href:"https://www.cnblogs.com/BlogNetSpace/p/9633653.html",target:"_blank",rel:"noopener noreferrer"}},[_("em",[a._v("配置 Kibana")]),a._v(" "),_("OutboundLink")],1),a._v("中做了说明。")]),a._v(" "),_("h3",{attrs:{id:"zip-文件目录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#zip-文件目录"}},[a._v("#")]),a._v(" .zip 文件目录")]),a._v(" "),_("p",[a._v(".zip 整个包是独立的。默认情况下，所有的文件和目录都在 $KIBANA_HOME — 解压包时创建的目录下。这是非常方便的，因为您不需要创建任何目录来使用 Kibana，卸载 Kibana 只需要简单的删除 $KIBANA_HOME目录。但还是建议修改一下配置文件和数据目录，这样就不会删除重要数据。")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("类型")]),a._v(" "),_("th",[a._v("描述")]),a._v(" "),_("th",[a._v("默认位置")]),a._v(" "),_("th",[a._v("设置")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("home")]),a._v(" "),_("td",[a._v("Kibana home 目录或 $KIBANA_HOME 。")]),a._v(" "),_("td",[a._v("解压包时创建的目录")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("bin")]),a._v(" "),_("td",[a._v("二进制脚本，包括 kibana 启动 Kibana 服务和 kibana-plugin 安装插件。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\bin")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("config")]),a._v(" "),_("td",[a._v("配置文件包括 kibana.yml 。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\config")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("data")]),a._v(" "),_("td",[a._v("Kibana 和其插件写入磁盘的数据文件位置。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\data")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("optimize")]),a._v(" "),_("td",[a._v("编译过的源码。某些管理操作(如，插件安装)导致运行时重新编译源码。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\optimize")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("plugins")]),a._v(" "),_("td",[a._v("插件文件位置。每一个插件都一个单独的二级目录。")]),a._v(" "),_("td",[a._v("$KIBANA_HOME\\plugins")]),a._v(" "),_("td")])])]),a._v(" "),_("h3",{attrs:{id:"使用-debian-包安装-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-debian-包安装-kibana"}},[a._v("#")]),a._v(" 使用 Debian 包安装 Kibana")]),a._v(" "),_("p",[a._v("Kibana Debian 安装包可以在官网下载或者从APT 仓库下载。它可以用来在任何基于 Debian 的系统，如 Debian 和 Ubuntu 上安装 Kibana。")]),a._v(" "),_("p",[a._v("Kibana 最新稳定版本可以在官方 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibana 下载"),_("OutboundLink")],1),a._v("页找到。其他版本可以在 官方"),_("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("已发布版本"),_("OutboundLink")],1),a._v("中查看。")]),a._v(" "),_("h4",{attrs:{id:"导入-elastic-pgp-密钥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#导入-elastic-pgp-密钥"}},[a._v("#")]),a._v(" 导入 Elastic PGP 密钥")]),a._v(" "),_("p",[a._v("我们所有部署包的签名使用的是 Elastic Signing Key (PGP key "),_("a",{attrs:{href:"https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4",target:"_blank",rel:"noopener noreferrer"}},[a._v("D88E42B4"),_("OutboundLink")],1),a._v(", 从 "),_("a",{attrs:{href:"https://pgp.mit.edu/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://pgp.mit.edu"),_("OutboundLink")],1),a._v(" 可以获得)，指纹为：")]),a._v(" "),_("p",[a._v("4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4")]),a._v(" "),_("p",[a._v("下载并安装签名公钥：")]),a._v(" "),_("p",[a._v("wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -")]),a._v(" "),_("h4",{attrs:{id:"从-apt-仓库安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从-apt-仓库安装"}},[a._v("#")]),a._v(" 从 APT 仓库安装")]),a._v(" "),_("p",[a._v("在开始之前，您需要在 Debian 系统上安装 apt-transport-https 包：")]),a._v(" "),_("p",[a._v("sudo apt-get install apt-transport-https")]),a._v(" "),_("p",[a._v("保存仓库的定义到 /etc/apt/sources.list.d/elastic-6.x.list:")]),a._v(" "),_("p",[a._v('echo "deb https://artifacts.elastic.co/packages/6.x/apt stable main" | sudo tee -a /etc/apt/sources.list.d/elastic-6.x.list')]),a._v(" "),_("p",[a._v("请不要用 add-apt-repository 因为它需要添加 deb-src 入口，但是我们没有提供包源。如果您已经添加了 deb-src 入口，您将会遇到如下错误：")]),a._v(" "),_("p",[a._v("Unable to find expected entry 'main/source/Sources' in Release file")]),a._v(" "),_("p",[a._v("(Wrong sources.list entry or malformed file)")]),a._v(" "),_("p",[a._v("从 /etc/apt/sources.list 文件中删除 deb-src 入口，便可以正常安装。")]),a._v(" "),_("p",[a._v("使用以下命令安装 Kibana Debian 包：")]),a._v(" "),_("p",[a._v("sudo apt-get update && sudo apt-get install kibana")]),a._v(" "),_("p",[a._v("如果在仓库中有两条相同的 Kibana 入口，执行 apt-get update 命令时您将会遇到如下错误：")]),a._v(" "),_("p",[a._v("Duplicate sources.list entry https://artifacts.elastic.co/packages/6.x/apt/ ...`")]),a._v(" "),_("p",[a._v("检查这些文件中是否有重复记录： /etc/apt/sources.list.d/kibana-6.x.list 、 /etc/apt/sources.list.d/ 和 /etc/apt/sources.list 。")]),a._v(" "),_("h4",{attrs:{id:"手动下载安装-debian-包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#手动下载安装-debian-包"}},[a._v("#")]),a._v(" 手动下载安装 Debian 包")]),a._v(" "),_("p",[a._v("Kibana v6.0.0 的 Debian 包可以使用如下命令从网站下载安装：")]),a._v(" "),_("p",[a._v("wget https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-amd64.deb")]),a._v(" "),_("p",[a._v("sha1sum kibana-6.0.0-amd64.deb")]),a._v(" "),_("p",[a._v("sudo dpkg -i kibana-6.0.0-amd64.deb")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th"),a._v(" "),_("th",[a._v("比较 sha1sum 或 shasum 产生的 SHA跟 "),_("a",{attrs:{href:"https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-amd64.deb.sha1",target:"_blank",rel:"noopener noreferrer"}},[a._v("发布的 SHA"),_("OutboundLink")],1),a._v("。")])])]),a._v(" "),_("tbody",[_("tr",[_("td"),a._v(" "),_("td")])])]),a._v(" "),_("h4",{attrs:{id:"sysv-init-和-systemd-对比"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sysv-init-和-systemd-对比"}},[a._v("#")]),a._v(" SysV init 和 systemd 对比")]),a._v(" "),_("p",[a._v("Kibana 安装后不会自动启动。如何启动和停止 Kibana，依赖与您的操作系统。使用 SysV init 还是 systemd （新的发行版使用），可以通过以下命令来显示使用的是哪种：")]),a._v(" "),_("p",[a._v("ps -p 1")]),a._v(" "),_("h4",{attrs:{id:"使用-sysv-init-运行-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-sysv-init-运行-kibana"}},[a._v("#")]),a._v(" 使用 SysV init 运行 Kibana")]),a._v(" "),_("p",[a._v("使用 update-rc.d 命令配置 Kibana 开机自动启动：")]),a._v(" "),_("p",[a._v("sudo update-rc.d kibana defaults 95 10")]),a._v(" "),_("p",[a._v("Kibana 可以使用 service 命令来启动和停止：")]),a._v(" "),_("p",[a._v("sudo -i service kibana start")]),a._v(" "),_("p",[a._v("sudo -i service kibana stop")]),a._v(" "),_("p",[a._v("不管什么原因，如果 Kibana 启动失败，它会输出失败原因到 STDOUT。日志文件在 /var/log/kibana/ 目录下面。")]),a._v(" "),_("h4",{attrs:{id:"使用-systemd-运行-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-systemd-运行-kibana"}},[a._v("#")]),a._v(" 使用 systemd 运行 Kibana")]),a._v(" "),_("p",[a._v("配置 Kibana 开机自动启动，执行以下命令：")]),a._v(" "),_("p",[a._v("sudo /bin/systemctl daemon-reload")]),a._v(" "),_("p",[a._v("sudo /bin/systemctl enable kibana.service")]),a._v(" "),_("p",[a._v("Kibana 启动和停止命令如下：")]),a._v(" "),_("p",[a._v("sudo systemctl start kibana.service")]),a._v(" "),_("p",[a._v("sudo systemctl stop kibana.service")]),a._v(" "),_("p",[a._v("这些命令不会提供任何关于 Kibana 是否成功启动的反馈信息。而是将这些信息写入日志文件中，日志文件的位置在 /var/log/kibana/ 。")]),a._v(" "),_("h4",{attrs:{id:"通过配置文件配置-kibana-3"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件配置-kibana-3"}},[a._v("#")]),a._v(" 通过配置文件配置 Kibana")]),a._v(" "),_("p",[a._v("Kibana 默认情况下从 $KIBANA_HOME/config/kibana.yml 加载配置文件。该配置文件的格式在 "),_("a",{attrs:{href:"https://www.cnblogs.com/BlogNetSpace/p/9633653.html",target:"_blank",rel:"noopener noreferrer"}},[_("em",[a._v("配置 Kibana")]),_("OutboundLink")],1),a._v(" 中有相关说明。")]),a._v(" "),_("h4",{attrs:{id:"debian-包目录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#debian-包目录"}},[a._v("#")]),a._v(" Debian 包目录")]),a._v(" "),_("p",[a._v("在 Debian 包结构中，Debian 会把配置文件、日志和数据目录放在如下位置：")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("类型")]),a._v(" "),_("th",[a._v("描述")]),a._v(" "),_("th",[a._v("默认位置")]),a._v(" "),_("th",[a._v("设置")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("home")]),a._v(" "),_("td",[a._v("Kibana home 目录或 $KIBANA_HOME 。")]),a._v(" "),_("td",[a._v("/usr/share/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("bin")]),a._v(" "),_("td",[a._v("二进制脚本，包括 kibana 启动 Kibana server 和 kibana-plugin 安装插件。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/bin")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("config")]),a._v(" "),_("td",[a._v("配置文件，包括 kibana.yml 。")]),a._v(" "),_("td",[a._v("/etc/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("data")]),a._v(" "),_("td",[a._v("Kibana 和其插件写入磁盘的数据文件位置。")]),a._v(" "),_("td",[a._v("/var/lib/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("optimize")]),a._v(" "),_("td",[a._v("编译过的源码。某些管理操作 (如，插件安装) 导致运行时重新编译源码。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/optimize")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("plugins")]),a._v(" "),_("td",[a._v("插件文件位置。每一个插件都有一个单独的二级目录。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/plugins")]),a._v(" "),_("td")])])]),a._v(" "),_("h3",{attrs:{id:"使用-rpm-包安装-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-rpm-包安装-kibana"}},[a._v("#")]),a._v(" 使用 RPM 包安装 Kibana")]),a._v(" "),_("p",[a._v("Kibana RPM 包可以从官方网站下载或者从官方推荐的 RPM 仓库下载。RPM 包可以用来安装 Kibana 在任何基于 RPM 包管理的系统上，如 OpenSuSE 、SLES、Centos、Red Hat 和 Oracle 企业版等系统上。")]),a._v(" "),_("p",[a._v("RPM 安装不支持旧的系统版本，例如 SLES 11 和 CentOS 5。详情请参考 使用 .tar.gz 安装 Kibana 。")]),a._v(" "),_("p",[a._v("Kibana 的最新稳定版本可以在官方网站 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/kibana",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kibana 下载"),_("OutboundLink")],1),a._v("页找到。其它版本可以在 "),_("a",{attrs:{href:"https://www.elastic.co/downloads/past-releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("已发布版本"),_("OutboundLink")],1),a._v("中查看。")]),a._v(" "),_("h4",{attrs:{id:"导入-elastic-pgp-密钥-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#导入-elastic-pgp-密钥-2"}},[a._v("#")]),a._v(" 导入 Elastic PGP 密钥")]),a._v(" "),_("p",[a._v("我们所有部署包的签名使用的是 Elastic Signing Key (PGP key "),_("a",{attrs:{href:"https://pgp.mit.edu/pks/lookup?op=vindex&search=0xD27D666CD88E42B4",target:"_blank",rel:"noopener noreferrer"}},[a._v("D88E42B4"),_("OutboundLink")],1),a._v(", 从 "),_("a",{attrs:{href:"https://pgp.mit.edu/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://pgp.mit.edu"),_("OutboundLink")],1),a._v(" 可以获得)，指纹为：")]),a._v(" "),_("p",[a._v("4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4")]),a._v(" "),_("p",[a._v("下载并安装签名公钥：")]),a._v(" "),_("p",[a._v("rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch")]),a._v(" "),_("h4",{attrs:{id:"从-rpm-仓库安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#从-rpm-仓库安装"}},[a._v("#")]),a._v(" 从 RPM 仓库安装")]),a._v(" "),_("p",[a._v("对于 RedHat 的发行版，在 /etc/yum.repos.d/ 目录下新建一个 kibana.repo 文件，对于 OpenSuSE 的发行版，在 /etc/zypp/repos.d/ 目录下新建一个 kibana.repo 文件，包含如下内容:")]),a._v(" "),_("p",[a._v("[kibana-6.x]")]),a._v(" "),_("p",[a._v("name=Kibana repository for 6.x packages")]),a._v(" "),_("p",[a._v("baseurl=https://artifacts.elastic.co/packages/6.x/yum")]),a._v(" "),_("p",[a._v("gpgcheck=1")]),a._v(" "),_("p",[a._v("gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch")]),a._v(" "),_("p",[a._v("enabled=1")]),a._v(" "),_("p",[a._v("autorefresh=1")]),a._v(" "),_("p",[a._v("type=rpm-md")]),a._v(" "),_("p",[a._v("您的仓库已经准备好了。现在您可以用下面的命令来安装 Kibana：")]),a._v(" "),_("p",[a._v("sudo yum install kibana")]),a._v(" "),_("p",[a._v("sudo dnf install kibana")]),a._v(" "),_("p",[a._v("sudo zypper install kibana")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th"),a._v(" "),_("th",[a._v("在 CentOS 和基于较低版本的 Red Hat 发行版上使用 yum 。")])])]),a._v(" "),_("tbody",[_("tr",[_("td"),a._v(" "),_("td",[a._v("在 Fedora 和较高版本的 Red Hat 发行版上使用 dnf 。")])]),a._v(" "),_("tr",[_("td"),a._v(" "),_("td",[a._v("在基于 OpenSUSE 的发行版上使用 zypper 。")])])])]),a._v(" "),_("h4",{attrs:{id:"手动下载安装-rpm"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#手动下载安装-rpm"}},[a._v("#")]),a._v(" 手动下载安装 RPM")]),a._v(" "),_("p",[a._v("Kibana v6.0.0 的 RPM 包可以使用如下命令从网站下载安装 ：")]),a._v(" "),_("p",[a._v("wget https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-x86_64.rpm")]),a._v(" "),_("p",[a._v("sha1sum kibana-6.0.0-x86_64.rpm")]),a._v(" "),_("p",[a._v("sudo rpm --install kibana-6.0.0-x86_64.rpm")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th"),a._v(" "),_("th",[a._v("比较 sha1sum 或 shasum 产生的 SHA 跟 "),_("a",{attrs:{href:"https://artifacts.elastic.co/downloads/kibana/kibana-6.0.0-x86_64.rpm.sha1",target:"_blank",rel:"noopener noreferrer"}},[a._v("发布的 SHA"),_("OutboundLink")],1),a._v("。")])])]),a._v(" "),_("tbody",[_("tr",[_("td"),a._v(" "),_("td")])])]),a._v(" "),_("h4",{attrs:{id:"sysv-init-和-systemd-对比-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sysv-init-和-systemd-对比-2"}},[a._v("#")]),a._v(" SysV init 和 systemd 对比")]),a._v(" "),_("p",[a._v("Kibana 安装后不会自动启动。如何启动和停止 Kibana，依赖与您的操作系统。使用 SysV init 还是 systemd （新的发行版使用），可以通过以下命令来显示使用的是哪种：")]),a._v(" "),_("p",[a._v("ps -p 1")]),a._v(" "),_("h4",{attrs:{id:"sysv-init-运行-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sysv-init-运行-kibana"}},[a._v("#")]),a._v(" SysV init 运行 Kibana")]),a._v(" "),_("p",[a._v("使用 chkconfig 命令配置 Kibana 开机自动启动：")]),a._v(" "),_("p",[a._v("sudo chkconfig --add kibana")]),a._v(" "),_("p",[a._v("Kibana 可以用 service 命令来启动和停止：")]),a._v(" "),_("p",[a._v("sudo -i service kibana start")]),a._v(" "),_("p",[a._v("sudo -i service kibana stop")]),a._v(" "),_("p",[a._v("任何原因导致的 Kibana 启动失败，都会输出失败原因到 STDOUT。日志文件在 /var/log/kibana/ 目录下面。")]),a._v(" "),_("h4",{attrs:{id:"使用-systemd-运行-kibana-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用-systemd-运行-kibana-2"}},[a._v("#")]),a._v(" 使用 systemd 运行 Kibana")]),a._v(" "),_("p",[a._v("配置 Kibana 开机自动启动，执行以下命令：")]),a._v(" "),_("p",[a._v("sudo /bin/systemctl daemon-reload")]),a._v(" "),_("p",[a._v("sudo /bin/systemctl enable kibana.service")]),a._v(" "),_("p",[a._v("Kibana 启动和停止命令如下：")]),a._v(" "),_("p",[a._v("sudo systemctl start kibana.service")]),a._v(" "),_("p",[a._v("sudo systemctl stop kibana.service")]),a._v(" "),_("p",[a._v("这些命令不会提供任何关于 Kibana 是否成功启动的反馈信息。而是将这些信息写入日志文件中，日志文件的位置在 /var/log/kibana/ 。")]),a._v(" "),_("h4",{attrs:{id:"通过配置文件配置-kibana-4"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件配置-kibana-4"}},[a._v("#")]),a._v(" 通过配置文件配置 Kibana")]),a._v(" "),_("p",[a._v("Kibana 默认情况下从 $KIBANA_HOME/config/kibana.yml 加载配置文件。该配置文件的格式在 "),_("a",{attrs:{href:"https://www.cnblogs.com/BlogNetSpace/p/9633653.html",target:"_blank",rel:"noopener noreferrer"}},[_("em",[a._v("配置 Kibana")]),_("OutboundLink")],1),a._v(" 中有相关说明。")]),a._v(" "),_("h4",{attrs:{id:"rpm-文件目录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#rpm-文件目录"}},[a._v("#")]),a._v(" RPM 文件目录")]),a._v(" "),_("p",[a._v("在 RPM 包中，会把配置文件、日志和数据目录放在如下位置：")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("类型")]),a._v(" "),_("th",[a._v("描述")]),a._v(" "),_("th",[a._v("默认位置")]),a._v(" "),_("th",[a._v("设置")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("home")]),a._v(" "),_("td",[a._v("Kibana home 目录或 $KIBANA_HOME 。")]),a._v(" "),_("td",[a._v("/usr/share/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("bin")]),a._v(" "),_("td",[a._v("二进制脚本，包括 kibana 启动 Kibana server 和 kibana-plugin 安装插件。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/bin")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("config")]),a._v(" "),_("td",[a._v("配置文件，包括 kibana.yml 。")]),a._v(" "),_("td",[a._v("/etc/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("data")]),a._v(" "),_("td",[a._v("Kibana 和其插件写入磁盘的数据文件位置。")]),a._v(" "),_("td",[a._v("/var/lib/kibana")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("optimize")]),a._v(" "),_("td",[a._v("编译过的源码。某些管理操作(如，插件安装)导致运行时重新编译源码。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/optimize")]),a._v(" "),_("td")]),a._v(" "),_("tr",[_("td",[a._v("plugins")]),a._v(" "),_("td",[a._v("插件文件位置。每一个插件都有一个单独的二级目录。")]),a._v(" "),_("td",[a._v("/usr/share/kibana/plugins")]),a._v(" "),_("td")])])]),a._v(" "),_("h3",{attrs:{id:"docker-容器中运行-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器中运行-kibana"}},[a._v("#")]),a._v(" Docker 容器中运行 Kibana")]),a._v(" "),_("p",[a._v("Kibana 的 Docker 镜像可以从 Elastic 官网上的 Docker 镜像仓库获取。该镜像是随 X-Pack 一起打包的。")]),a._v(" "),_("p",[a._v("X-Pack 在这个 image 中是预装好的。安装了 X-Pack，Kibana 会去连接同样带有 X-Pack 的 Elasticsearch 集群。")]),a._v(" "),_("h4",{attrs:{id:"获取镜像"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#获取镜像"}},[a._v("#")]),a._v(" 获取镜像")]),a._v(" "),_("p",[a._v("向 Elastic Docker 仓库发送一条 docker pull 命令就可以获取 Kibana Docker 镜像。")]),a._v(" "),_("p",[a._v("命令如下:")]),a._v(" "),_("p",[a._v("docker pull docker.elastic.co/kibana/kibana:6.0.0")]),a._v(" "),_("h4",{attrs:{id:"配置-docker-中的-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#配置-docker-中的-kibana"}},[a._v("#")]),a._v(" 配置 Docker 中的 Kibana")]),a._v(" "),_("p",[a._v("Docker 镜像提供了几种方法来配置 Kibana。传统的方法是给出一个 "),_("a",{attrs:{href:"https://www.cnblogs.com/BlogNetSpace/p/9633653.html",target:"_blank",rel:"noopener noreferrer"}},[_("em",[a._v("配置 Kibana")]),_("OutboundLink")],1),a._v(" 中描述的配置文件 kibana.yml ，也可以使用环境变量来定义设置项。")]),a._v(" "),_("h5",{attrs:{id:"绑定配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#绑定配置"}},[a._v("#")]),a._v(" 绑定配置")]),a._v(" "),_("p",[a._v("一种配置 Docker 中 Kibana 的方法是通过绑定配置文件 kibana.yml 。使用 docker-compose 工具，向下面这样绑定：")]),a._v(" "),_("p",[a._v("services:")]),a._v(" "),_("p",[a._v("kibana:")]),a._v(" "),_("p",[a._v("image: docker.elastic.co/kibana/kibana:6.0.0")]),a._v(" "),_("p",[a._v("volumes:")]),a._v(" "),_("p",[a._v("- ./kibana.yml:/usr/share/kibana/config/kibana.yml")]),a._v(" "),_("h5",{attrs:{id:"环境变量设置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#环境变量设置"}},[a._v("#")]),a._v(" 环境变量设置")]),a._v(" "),_("p",[a._v("在 Docker 中，Kibana 可以通过环境变量的方法设置。环境变量如下：")]),a._v(" "),_("p",[a._v("表 1. Docker 环境变量")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("Environment Variable")]),a._v(" "),_("th",[a._v("Kibana Setting")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("ELASTICSEARCH_CUSTOMHEADERS")]),a._v(" "),_("td",[a._v("elasticsearch.customHeaders")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_PASSWORD")]),a._v(" "),_("td",[a._v("elasticsearch.password")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_PINGTIMEOUT")]),a._v(" "),_("td",[a._v("elasticsearch.pingTimeout")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_PRESERVEHOST")]),a._v(" "),_("td",[a._v("elasticsearch.preserveHost")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_REQUESTHEADERSWHITELIST")]),a._v(" "),_("td",[a._v("elasticsearch.requestHeadersWhitelist")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_REQUESTTIMEOUT")]),a._v(" "),_("td",[a._v("elasticsearch.requestTimeout")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_SHARDTIMEOUT")]),a._v(" "),_("td",[a._v("elasticsearch.shardTimeout")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_SSL_CA")]),a._v(" "),_("td",[a._v("elasticsearch.ssl.ca")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_SSL_CERT")]),a._v(" "),_("td",[a._v("elasticsearch.ssl.cert")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_SSL_KEY")]),a._v(" "),_("td",[a._v("elasticsearch.ssl.key")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_SSL_VERIFY")]),a._v(" "),_("td",[a._v("elasticsearch.ssl.verify")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_STARTUPTIMEOUT")]),a._v(" "),_("td",[a._v("elasticsearch.startupTimeout")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_URL")]),a._v(" "),_("td",[a._v("elasticsearch.url")])]),a._v(" "),_("tr",[_("td",[a._v("ELASTICSEARCH_USERNAME")]),a._v(" "),_("td",[a._v("elasticsearch.username")])]),a._v(" "),_("tr",[_("td",[a._v("KIBANA_DEFAULTAPPID")]),a._v(" "),_("td",[a._v("kibana.defaultAppId")])]),a._v(" "),_("tr",[_("td",[a._v("KIBANA_INDEX")]),a._v(" "),_("td",[a._v("kibana.index")])]),a._v(" "),_("tr",[_("td",[a._v("LOGGING_DEST")]),a._v(" "),_("td",[a._v("logging.dest")])]),a._v(" "),_("tr",[_("td",[a._v("LOGGING_QUIET")]),a._v(" "),_("td",[a._v("logging.quiet")])]),a._v(" "),_("tr",[_("td",[a._v("LOGGING_SILENT")]),a._v(" "),_("td",[a._v("logging.silent")])]),a._v(" "),_("tr",[_("td",[a._v("LOGGING_VERBOSE")]),a._v(" "),_("td",[a._v("logging.verbose")])]),a._v(" "),_("tr",[_("td",[a._v("OPS_INTERVAL")]),a._v(" "),_("td",[a._v("ops.interval")])]),a._v(" "),_("tr",[_("td",[a._v("PID_FILE")]),a._v(" "),_("td",[a._v("pid.file")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_BASEPATH")]),a._v(" "),_("td",[a._v("server.basePath")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_HOST")]),a._v(" "),_("td",[a._v("server.host")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_MAXPAYLOADBYTES")]),a._v(" "),_("td",[a._v("server.maxPayloadBytes")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_NAME")]),a._v(" "),_("td",[a._v("server.name")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_PORT")]),a._v(" "),_("td",[a._v("server.port")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_SSL_CERT")]),a._v(" "),_("td",[a._v("server.ssl.cert")])]),a._v(" "),_("tr",[_("td",[a._v("SERVER_SSL_KEY")]),a._v(" "),_("td",[a._v("server.ssl.key")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_ELASTICSEARCH_URL")]),a._v(" "),_("td",[a._v("xpack.monitoring.elasticsearch.url")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_ELASTICSEARCH_USERNAME")]),a._v(" "),_("td",[a._v("xpack.monitoring.elasticsearch.username")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_ELASTICSEARCH_PASSWORD")]),a._v(" "),_("td",[a._v("xpack.monitoring.elasticsearch.password")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_ENABLED")]),a._v(" "),_("td",[a._v("xpack.monitoring.enabled")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_MAX_BUCKET_SIZE")]),a._v(" "),_("td",[a._v("xpack.monitoring.max_bucket_size")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_MIN_INTERVAL_SECONDS")]),a._v(" "),_("td",[a._v("xpack.monitoring.min_interval_seconds")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_NODE_RESOLVER")]),a._v(" "),_("td",[a._v("xpack.monitoring.node_resolver")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_REPORT_STATS")]),a._v(" "),_("td",[a._v("xpack.monitoring.report_stats")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_KIBANA_COLLECTION_ENABLED")]),a._v(" "),_("td",[a._v("xpack.monitoring.kibana.collection.enabled")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_KIBANA_COLLECTION_INTERVAL")]),a._v(" "),_("td",[a._v("xpack.monitoring.kibana.collection.interval")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_MONITORING_UI_CONTAINER_ELASTICSEARCH_ENABLED")]),a._v(" "),_("td",[a._v("xpack.monitoring.ui.container.elasticsearch.enabled")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_SECURITY_ENABLED")]),a._v(" "),_("td",[a._v("xpack.security.enabled")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_SECURITY_COOKIENAME")]),a._v(" "),_("td",[a._v("xpack.security.cookieName")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_SECURITY_ENCRYPTIONKEY")]),a._v(" "),_("td",[a._v("xpack.security.encryptionKey")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_SECURITY_SECURECOOKIES")]),a._v(" "),_("td",[a._v("xpack.security.secureCookies")])]),a._v(" "),_("tr",[_("td",[a._v("XPACK_SECURITY_SESSIONTIMEOUT")]),a._v(" "),_("td",[a._v("xpack.security.sessionTimeout")])])])]),a._v(" "),_("p",[a._v("这些变量可以像下面这样，用 docker-compose 设置：")]),a._v(" "),_("p",[a._v("services:")]),a._v(" "),_("p",[a._v("kibana:")]),a._v(" "),_("p",[a._v("image: docker.elastic.co/kibana/kibana:6.0.0")]),a._v(" "),_("p",[a._v("environment:")]),a._v(" "),_("p",[a._v("SERVER_NAME: kibana.example.org")]),a._v(" "),_("p",[a._v("ELASTICSEARCH_URL: http://elasticsearch.example.org")]),a._v(" "),_("p",[a._v("优先使用环境变量，然后是配置文件 kibana.yml 中的配置项。")]),a._v(" "),_("h5",{attrs:{id:"docker-默认值"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#docker-默认值"}},[a._v("#")]),a._v(" Docker 默认值")]),a._v(" "),_("p",[a._v("使用 Docker 时，下面的配置项有不同的默认值 ：")]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("server.host")]),a._v(" "),_("th",[a._v('"0"')])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("elasticsearch.url")]),a._v(" "),_("td",[a._v("http://elasticsearch:9200")])]),a._v(" "),_("tr",[_("td",[a._v("elasticsearch.username")]),a._v(" "),_("td",[a._v("elastic")])]),a._v(" "),_("tr",[_("td",[a._v("elasticsearch.password")]),a._v(" "),_("td",[a._v("changeme")])]),a._v(" "),_("tr",[_("td",[a._v("xpack.monitoring.ui.container.elasticsearch.enabled")]),a._v(" "),_("td",[a._v("true")])])])]),a._v(" "),_("p",[a._v("这些配置项的默认值在 kibana.yml 中设置。可以通过 自定义 kibana.yml 或者 环境变量覆盖这些默认值。")]),a._v(" "),_("h2",{attrs:{id:"访问-kibana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#访问-kibana"}},[a._v("#")]),a._v(" 访问 Kibana")]),a._v(" "),_("p",[a._v("Kibana 是一个 web 应用，可以通过5601端口访问。只需要在浏览器中指定 Kibana 运行的机器，然后指定端口号即可。例如， "),_("code",[a._v("localhost:5601")]),a._v(" 或者 "),_("code",[a._v("http://YOURDOMAIN.com:5601")]),a._v(" ,详见之前界面章节展现靓照。")]),a._v(" "),_("h2",{attrs:{id:"参考文章"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),_("ul",[_("li",[a._v("https://www.cnblogs.com/Naylor/p/13261136.html")]),a._v(" "),_("li",[a._v("https://www.cnblogs.com/BlogNetSpace/p/9633697.html")])])])}),[],!1,null,null,null);t.default=s.exports}}]);