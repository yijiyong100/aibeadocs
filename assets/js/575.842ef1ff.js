(window.webpackJsonp=window.webpackJsonp||[]).push([[575],{1091:function(t,s,a){"use strict";a.r(s);var e=a(53),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("本文主要是介绍 Java 13语言新特性 。")])]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#版本号"}},[t._v("版本号")])]),a("li",[a("a",{attrs:{href:"#特性列表"}},[t._v("特性列表")]),a("ul",[a("li",[a("a",{attrs:{href:"#_350-dynamic-cds-archives-http-openjdk-java-net-jeps-350"}},[t._v("350: Dynamic CDS Archives")])]),a("li",[a("a",{attrs:{href:"#_351-zgc-uncommit-unused-memory-http-openjdk-java-net-jeps-351"}},[t._v("351: ZGC: Uncommit Unused Memory")])]),a("li",[a("a",{attrs:{href:"#_353-reimplement-the-legacy-socket-api-http-openjdk-java-net-jeps-353"}},[t._v("353: Reimplement the Legacy Socket API")])]),a("li",[a("a",{attrs:{href:"#_354-switch-expressions-preview-http-openjdk-java-net-jeps-354"}},[t._v("354: Switch Expressions (Preview)")])]),a("li",[a("a",{attrs:{href:"#_355-text-blocks-preview-http-openjdk-java-net-jeps-355"}},[t._v("355: Text Blocks (Preview)")])])])]),a("li",[a("a",{attrs:{href:"#细项解读"}},[t._v("细项解读")]),a("ul",[a("li",[a("a",{attrs:{href:"#添加项"}},[t._v("添加项")])]),a("li",[a("a",{attrs:{href:"#移除项"}},[t._v("移除项")])]),a("li",[a("a",{attrs:{href:"#废弃项"}},[t._v("废弃项")])]),a("li",[a("a",{attrs:{href:"#已知问题"}},[t._v("已知问题")])]),a("li",[a("a",{attrs:{href:"#其他事项"}},[t._v("其他事项")])])])]),a("li",[a("a",{attrs:{href:"#小结"}},[t._v("小结")])]),a("li",[a("a",{attrs:{href:"#参考文章"}},[t._v("参考文章")])])])]),a("p"),t._v(" "),a("p",[t._v("本文主要讲述一下Java13的新特性")]),t._v(" "),a("h2",{attrs:{id:"版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#版本号"}},[t._v("#")]),t._v(" 版本号")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("java "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("version\nopenjdk version "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"13"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("09")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OpenJDK")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Runtime")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Environment")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("OpenJDK")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Server")]),t._v(" VM "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("33")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mixed mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sharing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("从version信息可以看出是build 13+33")]),t._v(" "),a("h2",{attrs:{id:"特性列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#特性列表"}},[t._v("#")]),t._v(" 特性列表")]),t._v(" "),a("h3",{attrs:{id:"_350-dynamic-cds-archives"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_350-dynamic-cds-archives"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"http://openjdk.java.net/jeps/350",target:"_blank",rel:"noopener noreferrer"}},[t._v("350: Dynamic CDS Archives"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("JDK5引入了Class-Data Sharing可以用于多个JVM共享class，提升启动速度，最早只支持system classes及serial GC\nJDK9对其进行扩展以支持application classes及其他GC算法\njava10的新特性"),a("a",{attrs:{href:"http://openjdk.java.net/jeps/310",target:"_blank",rel:"noopener noreferrer"}},[t._v("JEP 310: Application Class-Data Sharing"),a("OutboundLink")],1),t._v("扩展了JDK5引入的Class-Data Sharing，支持application的Class-Data Sharing并开源出来(以前是commercial feature)\nJDK11将-Xshare:off改为默认-Xshare:auto，以更加方便使用CDS特性\nJDK12的"),a("a",{attrs:{href:"http://openjdk.java.net/jeps/341",target:"_blank",rel:"noopener noreferrer"}},[t._v("341: Default CDS Archives"),a("OutboundLink")],1),t._v("即在64-bit平台上编译jdk的时候就默认在${JAVA_HOME}/lib/server目录下生成一份名为classes.jsa的默认archive文件(大概有18M)方便大家使用\nJDK13的这个特性支持在Java application执行之后进行动态archive")]),t._v(" "),a("ul",[a("li",[t._v("导出jsa")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("java "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("XX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArchiveClassesAtExit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cp hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Hello")]),t._v("\n")])])]),a("ul",[a("li",[t._v("使用jsa")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("java "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("XX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SharedArchiveFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cp hello"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jar "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Hello")]),t._v("\n")])])]),a("h3",{attrs:{id:"_351-zgc-uncommit-unused-memory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_351-zgc-uncommit-unused-memory"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"http://openjdk.java.net/jeps/351",target:"_blank",rel:"noopener noreferrer"}},[t._v("351: ZGC: Uncommit Unused Memory"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java12")]),t._v("的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("346")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promptly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Unused")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Committed")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Memory")]),t._v(" from G1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("openjdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("net"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jeps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("346")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("新增了两个参数分别是"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("G1PeriodicGCInterval")]),t._v("及"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("G1PeriodicGCSystemLoadThreshold")]),t._v("用于GC之后重新调整"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java")]),t._v(" heap size，然后将多余的内存归还给操作系统\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java12")]),t._v("的"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("189")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Shenandoah")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Low")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pause")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Garbage")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Collector")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Experimental")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("openjdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("net"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("jeps"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("189")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("拥有参数"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("XX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ShenandoahUncommitDelay")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("milliseconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("来指定"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZPage")]),t._v("的page cache的失效时间，然后归还内存\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Java13")]),t._v("则给ZGC新增归还unused heap memory给操作系统的特性；它新增了几个参数，"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("XX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZUncommitDelay")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("seconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("用于指定"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZPage")]),t._v("的page cache的失效时间；ZGC的归还内存默认是开启的，可以使用"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("XX"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ZUncommit")]),t._v("来显式禁用\n")])])]),a("h3",{attrs:{id:"_353-reimplement-the-legacy-socket-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_353-reimplement-the-legacy-socket-api"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"http://openjdk.java.net/jeps/353",target:"_blank",rel:"noopener noreferrer"}},[t._v("353: Reimplement the Legacy Socket API"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("本特性替换了java.net.Socket以及java.net.ServerSocket API的底层实现；它使用NioSocketImpl来替换JDK1.0的PlainSocketImpl；如果要继续使用旧版的Socket实现，可以使用-Djdk.net.usePlainSocketImpl参数来切换到旧版本")]),t._v(" "),a("p",[t._v("/Library/Java/JavaVirtualMachines/jdk-13.jdk/Contents/Home/lib/src.zip!/java.base/java/net/SocketImpl.java")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("abstract")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketImpl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketOptions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" USE_PLAINSOCKETIMPL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlainSocketImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usePlainSocketImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PrivilegedAction")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Stringpa")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NetProperties")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdk.net.usePlainSocketImpl"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccessController")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPrivileged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equalsIgnoreCase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"false"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * Creates an instance of platform's SocketImpl\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SuppressWarnings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unchecked"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("S")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SocketImpl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlatformSocketImplS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createPlatformSocketImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("USE_PLAINSOCKETIMPL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PlainSocketImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("S")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NioSocketImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//......")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("SocketImpl的USE_PLAINSOCKETIMPL取决于usePlainSocketImpl方法，而它会从NetProperties读取dk.net.usePlainSocketImpl配置，如果不为null且不为false，则usePlainSocketImpl方法返回true；createPlatformSocketImpl会根据USE_PLAINSOCKETIMPL来创建PlainSocketImpl或者NioSocketImpl")]),t._v(" "),a("h3",{attrs:{id:"_354-switch-expressions-preview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_354-switch-expressions-preview"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"http://openjdk.java.net/jeps/354",target:"_blank",rel:"noopener noreferrer"}},[t._v("354: Switch Expressions (Preview)"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("本特性主要是使用yield替换了break来避免歧义，因为break可以用来进行跳转执行类似goto的操作")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("testSwitchYield")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" dayOfWeek "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" day "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Monday"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" day"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" day "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Tuesday"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("yield")]),t._v(" day"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Unknown"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dayOfWeek"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_355-text-blocks-preview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_355-text-blocks-preview"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"http://openjdk.java.net/jeps/355",target:"_blank",rel:"noopener noreferrer"}},[t._v("355: Text Blocks (Preview)"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v('本特性主要引入了Text Blocks，使用"""来包围一段text block，可以内置占位符最后使用String.format来填充')]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("testTextBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Without Text Blocks")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<html>\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"   <body>\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"      <p>Hello, Escapes</p>\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"   </body>\\n"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"</html>\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// With Text Blocks")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" html2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n            <html>\n                <body>\n                <p>Hello, %s</p>\n                </body>\n            </html>"""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"World"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" htmlWithNewLine "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[t._v('"""\n            <html>\n                <body>\n                <p>Hello World</p>\n                </body>\n            </html>\n            """')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("htmlWithNewLine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a new line"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v('需要注意text blocks不能在一行，另外如果结尾的"""在新的一行则会输出新的一行')]),t._v(" "),a("h2",{attrs:{id:"细项解读"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#细项解读"}},[t._v("#")]),t._v(" 细项解读")]),t._v(" "),a("p",[t._v("上面列出的是大方面的特性，除此之外还有一些api的更新及废弃，主要见"),a("a",{attrs:{href:"https://jdk.java.net/13/release-notes",target:"_blank",rel:"noopener noreferrer"}},[t._v("JDK 13 Release Notes"),a("OutboundLink")],1),t._v("，这里举几个例子。")]),t._v(" "),a("h3",{attrs:{id:"添加项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加项"}},[t._v("#")]),t._v(" 添加项")]),t._v(" "),a("ul",[a("li",[t._v("添加FileSystems.newFileSystem(Path, Map<String, ?>) Method")]),t._v(" "),a("li",[t._v("新的java.nio.ByteBuffer Bulk get/put Methods Transfer Bytes Without Regard to Buffer Position")]),t._v(" "),a("li",[t._v("支持Unicode 12.1")]),t._v(" "),a("li",[t._v("添加-XX:SoftMaxHeapSize Flag，目前仅仅对ZGC起作用")]),t._v(" "),a("li",[t._v("ZGC的最大heap大小增大到16TB")])]),t._v(" "),a("h3",{attrs:{id:"移除项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除项"}},[t._v("#")]),t._v(" 移除项")]),t._v(" "),a("ul",[a("li",[t._v("移除awt.toolkit System Property")]),t._v(" "),a("li",[t._v("移除Runtime Trace Methods")]),t._v(" "),a("li",[t._v("移除-XX:+AggressiveOpts")]),t._v(" "),a("li",[t._v("移除Two Comodo Root CA Certificates、Two DocuSign Root CA Certificates")]),t._v(" "),a("li",[t._v("移除内部的com.sun.net.ssl包")])]),t._v(" "),a("h3",{attrs:{id:"废弃项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#废弃项"}},[t._v("#")]),t._v(" 废弃项")]),t._v(" "),a("ul",[a("li",[t._v("废弃-Xverify:none及-noverify")]),t._v(" "),a("li",[t._v("废弃rmic Tool并准备移除")]),t._v(" "),a("li",[t._v("废弃javax.security.cert并准备移除")])]),t._v(" "),a("h3",{attrs:{id:"已知问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#已知问题"}},[t._v("#")]),t._v(" 已知问题")]),t._v(" "),a("ul",[a("li",[t._v("不再支持Windows 2019 Core Server")]),t._v(" "),a("li",[t._v("使用ZIP File System (zipfs) Provider来更新包含Uncompressed Entries的ZIP或JAR可能造成文件损坏")])]),t._v(" "),a("h3",{attrs:{id:"其他事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他事项"}},[t._v("#")]),t._v(" 其他事项")]),t._v(" "),a("ul",[a("li",[t._v("GraphicsEnvironment.getCenterPoint()及getMaximumWindowBounds()已跨平台统一")]),t._v(" "),a("li",[t._v("增强了JAR Manifest的Class-Path属性处理")])]),t._v(" "),a("p",[t._v("jdk.net.URLClassPath.showIgnoredClassPathEntries属性设置为true可以用来帮助查看非法的Class-Path entries")]),t._v(" "),a("ul",[a("li",[t._v("针对Negatively Sized Argument，StringBuffer(CharSequence)及StringBuilder(CharSequence)会抛出NegativeArraySizeException")]),t._v(" "),a("li",[t._v("linux的默认进程启动机制已经使用posix_spawn")]),t._v(" "),a("li",[t._v("Lookup.unreflectSetter(Field)针对static final fields会抛出IllegalAccessException")]),t._v(" "),a("li",[t._v("使用了java.net.Socket.setSocketImplFactory及java.net.ServerSocket.setSocketFactory方法的要注意，要求客户端及服务端要一致，不能一端使用自定义的factory一端使用默认的factory")]),t._v(" "),a("li",[t._v("SocketImpl的supportedOptions, getOption及setOption方法的默认实现发生了变化，默认的supportedOptions返回空，而默认的getOption,及setOption方法抛出UnsupportedOperationException")]),t._v(" "),a("li",[t._v("JNI NewDirectByteBuffer创建的Direct Buffer为java.nio.ByteOrder.BIG_ENDIAN")]),t._v(" "),a("li",[t._v("Base64.Encoder及Base64.Decoder可能抛出OutOfMemoryError")]),t._v(" "),a("li",[t._v("改进了Serial GC Young pause time report")]),t._v(" "),a("li",[t._v("改进了MaxRAM及UseCompressedOops参数的行为")])]),t._v(" "),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("ul",[a("li",[t._v("Java13主要新增了如下特性\n"),a("ul",[a("li",[t._v("350: Dynamic CDS Archives")]),t._v(" "),a("li",[t._v("351: ZGC: Uncommit Unused Memory")]),t._v(" "),a("li",[t._v("353: Reimplement the Legacy Socket API")]),t._v(" "),a("li",[t._v("354: Switch Expressions (Preview)")]),t._v(" "),a("li",[t._v("355: Text Blocks (Preview)")])])]),t._v(" "),a("li",[t._v("语法层面，改进了Switch Expressions，新增了Text Blocks，二者皆处于Preview状态；API层面主要使用NioSocketImpl来替换JDK1.0的PlainSocketImpl")]),t._v(" "),a("li",[t._v("GC层面则改进了ZGC，以支持Uncommit Unused Memory")])]),t._v(" "),a("h2",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),a("ul",[a("li",[t._v("https://segmentfault.com/a/1190000020426123")])])])}),[],!1,null,null,null);s.default=n.exports}}]);