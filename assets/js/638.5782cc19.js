(window.webpackJsonp=window.webpackJsonp||[]).push([[638],{1154:function(a,s,t){"use strict";t.r(s);var n=t(53),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[a._v("TIP")]),a._v(" "),t("p",[a._v("本文主要是介绍 虚拟机优化命令 。")])]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#jps"}},[a._v("jps")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#option参数"}},[a._v("option参数")])]),t("li",[t("a",{attrs:{href:"#示例"}},[a._v("示例")])])])]),t("li",[t("a",{attrs:{href:"#jstat"}},[a._v("jstat")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#参数"}},[a._v("参数")])])])]),t("li",[t("a",{attrs:{href:"#jmap"}},[a._v("jmap")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#option参数"}},[a._v("option参数")])]),t("li",[t("a",{attrs:{href:"#示例"}},[a._v("示例")])])])]),t("li",[t("a",{attrs:{href:"#jhat"}},[a._v("jhat")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#参数"}},[a._v("参数")])]),t("li",[t("a",{attrs:{href:"#示例"}},[a._v("示例")])]),t("li",[t("a",{attrs:{href:"#分析"}},[a._v("分析")])])])]),t("li",[t("a",{attrs:{href:"#jstack"}},[a._v("jstack")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#option参数"}},[a._v("option参数")])]),t("li",[t("a",{attrs:{href:"#示例"}},[a._v("示例")])]),t("li",[t("a",{attrs:{href:"#分析"}},[a._v("分析")])])])]),t("li",[t("a",{attrs:{href:"#jinfo"}},[a._v("jinfo")]),t("ul",[t("li",[t("a",{attrs:{href:"#命令格式"}},[a._v("命令格式")])]),t("li",[t("a",{attrs:{href:"#option参数"}},[a._v("option参数")])]),t("li",[t("a",{attrs:{href:"#示例"}},[a._v("示例")])])])]),t("li",[t("a",{attrs:{href:"#参考文章"}},[a._v("参考文章")])])])]),t("p"),a._v(" "),t("p",[a._v("运用jvm自带的命令可以方便的在生产监控和打印堆栈的日志信息帮忙我们来定位问题！虽然jvm调优成熟的工具已经有很多：jconsole、大名鼎鼎的VisualVM，IBM的Memory Analyzer等等，但是在生产环境出现问题的时候，一方面工具的使用会有所限制，另一方面喜欢装X的我们，总喜欢在出现问题的时候在终端输入一些命令来解决。所有的工具几乎都是依赖于jdk的接口和底层的这些命令，研究这些命令的使用也让我们更能了解jvm构成和特性。")]),a._v(" "),t("p",[a._v("Sun JDK监控和故障处理命令有jps jstat jmap jhat jstack jinfo下面做一一介绍")]),a._v(" "),t("h2",{attrs:{id:"jps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jps"}},[a._v("#")]),a._v(" jps")]),a._v(" "),t("p",[a._v("JVM Process Status Tool,显示指定系统内所有的HotSpot虚拟机进程。")]),a._v(" "),t("h3",{attrs:{id:"命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("jps [options] [hostid]\n")])])]),t("h3",{attrs:{id:"option参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option参数"}},[a._v("#")]),a._v(" option参数")]),a._v(" "),t("ul",[t("li",[a._v("-l : 输出主类全名或jar路径")]),a._v(" "),t("li",[a._v("-q : 只输出LVMID")]),a._v(" "),t("li",[a._v("-m : 输出JVM启动时传递给main()的参数")]),a._v(" "),t("li",[a._v("-v : 输出JVM启动时显示指定的JVM参数")])]),a._v(" "),t("p",[a._v("其中[option]、[hostid]参数也可以不写。")]),a._v(" "),t("h3",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jps "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("l "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("m\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("catalina"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Bootstrap")]),a._v(" start\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11589")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("catalina"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("startup"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Bootstrap")]),a._v(" start\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("25816")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("sun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tools"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jps"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Jps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("l "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("m\n")])])]),t("h2",{attrs:{id:"jstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jstat"}},[a._v("#")]),a._v(" jstat")]),a._v(" "),t("p",[a._v("jstat(JVM statistics Monitoring)是用于监视虚拟机运行时状态信息的命令，它可以显示出虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据。")]),a._v(" "),t("h3",{attrs:{id:"命令格式-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式-2"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("jstat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" LVMID "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("interval"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("ul",[t("li",[a._v("[option] : 操作参数")]),a._v(" "),t("li",[a._v("LVMID : 本地虚拟机进程ID")]),a._v(" "),t("li",[a._v("[interval] : 连续输出的时间间隔")]),a._v(" "),t("li",[a._v("[count] : 连续输出的次数")])]),a._v(" "),t("h4",{attrs:{id:"option-参数总览"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-参数总览"}},[a._v("#")]),a._v(" option 参数总览")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("Option")]),a._v(" "),t("th",[a._v("Displays…")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("class")]),a._v(" "),t("td",[a._v("class loader的行为统计。Statistics on the behavior of the class loader.")])]),a._v(" "),t("tr",[t("td",[a._v("compiler")]),a._v(" "),t("td",[a._v("HotSpt JIT编译器行为统计。Statistics of the behavior of the HotSpot Just-in-Time compiler.")])]),a._v(" "),t("tr",[t("td",[a._v("gc")]),a._v(" "),t("td",[a._v("垃圾回收堆的行为统计。Statistics of the behavior of the garbage collected heap.")])]),a._v(" "),t("tr",[t("td",[a._v("gccapacity")]),a._v(" "),t("td",[a._v("各个垃圾回收代容量(young,old,perm)和他们相应的空间统计。Statistics of the capacities of the generations and their corresponding spaces.")])]),a._v(" "),t("tr",[t("td",[a._v("gcutil")]),a._v(" "),t("td",[a._v("垃圾回收统计概述。Summary of garbage collection statistics.")])]),a._v(" "),t("tr",[t("td",[a._v("gccause")]),a._v(" "),t("td",[a._v("垃圾收集统计概述（同-gcutil），附加最近两次垃圾回收事件的原因。Summary of garbage collection statistics (same as -gcutil), with the cause of the last and")])]),a._v(" "),t("tr",[t("td",[a._v("gcnew")]),a._v(" "),t("td",[a._v("新生代行为统计。Statistics of the behavior of the new generation.")])]),a._v(" "),t("tr",[t("td",[a._v("gcnewcapacity")]),a._v(" "),t("td",[a._v("新生代与其相应的内存空间的统计。Statistics of the sizes of the new generations and its corresponding spaces.")])]),a._v(" "),t("tr",[t("td",[a._v("gcold")]),a._v(" "),t("td",[a._v("年老代和永生代行为统计。Statistics of the behavior of the old and permanent generations.")])]),a._v(" "),t("tr",[t("td",[a._v("gcoldcapacity")]),a._v(" "),t("td",[a._v("年老代行为统计。Statistics of the sizes of the old generation.")])]),a._v(" "),t("tr",[t("td",[a._v("gcpermcapacity")]),a._v(" "),t("td",[a._v("永生代行为统计。Statistics of the sizes of the permanent generation.")])]),a._v(" "),t("tr",[t("td",[a._v("printcompilation")]),a._v(" "),t("td",[a._v("HotSpot编译方法统计。HotSpot compilation method statistics.")])])])]),a._v(" "),t("h4",{attrs:{id:"option-参数详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-参数详解"}},[a._v("#")]),a._v(" option 参数详解")]),a._v(" "),t("h5",{attrs:{id:"class"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#class"}},[a._v("#")]),a._v(" -class")]),a._v(" "),t("p",[a._v("监视类装载、卸载数量、总空间以及耗费的时间")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11589")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Loaded")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Bytes")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Unloaded")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Bytes")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Time")]),a._v("   \n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7035")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("14506.3")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.67")]),a._v("\n")])])]),t("ul",[t("li",[a._v("Loaded : 加载class的数量")]),a._v(" "),t("li",[a._v("Bytes : class字节大小")]),a._v(" "),t("li",[a._v("Unloaded : 未加载class的数量")]),a._v(" "),t("li",[a._v("Bytes : 未加载class的字节大小")]),a._v(" "),t("li",[a._v("Time : 加载时间")])]),a._v(" "),t("h5",{attrs:{id:"compiler"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compiler"}},[a._v("#")]),a._v(" -compiler")]),a._v(" "),t("p",[a._v("输出JIT编译过的方法数量耗时等")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("compiler "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1262")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Compiled")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failed")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Invalid")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Time")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FailedType")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("FailedMethod")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2573")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("47.60")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" org"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("catalina"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WebappClassLoader")]),a._v(" findResourceInternal  \n")])])]),t("ul",[t("li",[a._v("Compiled : 编译数量")]),a._v(" "),t("li",[a._v("Failed : 编译失败数量")]),a._v(" "),t("li",[a._v("Invalid : 无效数量")]),a._v(" "),t("li",[a._v("Time : 编译耗时")]),a._v(" "),t("li",[a._v("FailedType : 失败类型")]),a._v(" "),t("li",[a._v("FailedMethod : 失败方法的全限定名")])]),a._v(" "),t("h5",{attrs:{id:"gc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gc"}},[a._v("#")]),a._v(" -gc")]),a._v(" "),t("p",[a._v("垃圾回收堆的行为统计，常用命令")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gc "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1262")]),a._v("\n S0C    S1C     S0U     S1U   EC       EU        OC         OU        PC       PU         YGC    YGCT    FGC    FGCT     GCT   \n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("26112.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("24064.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6562.5")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("564224.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("76274.5")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("434176.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("388518.3")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("524288.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("42724.7")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("320")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6.417")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.398")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6.815")]),a._v("\n")])])]),t("p",[a._v("C即Capacity 总容量，U即Used 已使用的容量")]),a._v(" "),t("ul",[t("li",[a._v("S0C : survivor0区的总容量")]),a._v(" "),t("li",[a._v("S1C : survivor1区的总容量")]),a._v(" "),t("li",[a._v("S0U : survivor0区已使用的容量")]),a._v(" "),t("li",[a._v("S1U : survivor1区已使用的容量")]),a._v(" "),t("li",[a._v("EC : Eden区的总容量")]),a._v(" "),t("li",[a._v("EU : Eden区已使用的容量")]),a._v(" "),t("li",[a._v("OC : Old区的总容量")]),a._v(" "),t("li",[a._v("OU : Old区已使用的容量")]),a._v(" "),t("li",[a._v("PC 当前perm的容量 (KB)")]),a._v(" "),t("li",[a._v("PU perm的使用 (KB)")]),a._v(" "),t("li",[a._v("YGC : 新生代垃圾回收次数")]),a._v(" "),t("li",[a._v("YGCT : 新生代垃圾回收时间")]),a._v(" "),t("li",[a._v("FGC : 老年代垃圾回收次数")]),a._v(" "),t("li",[a._v("FGCT : 老年代垃圾回收时间")]),a._v(" "),t("li",[a._v("GCT : 垃圾回收总消耗时间")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jstat -gc 1262 2000 20\n")])])]),t("p",[a._v("这个命令意思就是每隔2000ms输出1262的gc情况，一共输出20次")]),a._v(" "),t("h5",{attrs:{id:"gccapacity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gccapacity"}},[a._v("#")]),a._v(" -gccapacity")]),a._v(" "),t("p",[a._v("同-gc，不过还会输出Java堆各区域使用到的最大、最小空间")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gccapacity "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1262")]),a._v("\n NGCMN    NGCMX     NGC    S0C   S1C       EC         OGCMN      OGCMX      OGC        OC       PGCMN    PGCMX     PGC      PC         YGC    FGC \n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("614400.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("614400.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("614400.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("26112.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("24064.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("564224.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("434176.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("434176.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("434176.0")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("434176.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("524288.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1048576.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("524288.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("524288.0")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("320")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("  \n")])])]),t("ul",[t("li",[a._v("NGCMN : 新生代占用的最小空间")]),a._v(" "),t("li",[a._v("NGCMX : 新生代占用的最大空间")]),a._v(" "),t("li",[a._v("OGCMN : 老年代占用的最小空间")]),a._v(" "),t("li",[a._v("OGCMX : 老年代占用的最大空间")]),a._v(" "),t("li",[a._v("OGC：当前年老代的容量 (KB)")]),a._v(" "),t("li",[a._v("OC：当前年老代的空间 (KB)")]),a._v(" "),t("li",[a._v("PGCMN : perm占用的最小空间")]),a._v(" "),t("li",[a._v("PGCMX : perm占用的最大空间")])]),a._v(" "),t("h5",{attrs:{id:"gcutil"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcutil"}},[a._v("#")]),a._v(" -gcutil")]),a._v(" "),t("p",[a._v("同-gc，不过输出的是已使用空间占总空间的百分比")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gcutil "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v("  S0     S1     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("E")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("O")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P")]),a._v("     YGC     YGCT    FGC    FGCT     GCT    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.45")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.00")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("33.85")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.00")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.44")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.242")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.000")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.242")]),a._v("\n")])])]),t("h5",{attrs:{id:"gccause"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gccause"}},[a._v("#")]),a._v(" -gccause")]),a._v(" "),t("p",[a._v("垃圾收集统计概述（同-gcutil），附加最近两次垃圾回收事件的原因")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gccause "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v("  S0     S1     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("E")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("O")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("P")]),a._v("       YGC     YGCT    FGC    FGCT     GCT    LGCC                 GCC                  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12.45")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.00")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("33.85")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.00")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.44")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.242")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.000")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.242")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Allocation")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Failure")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("No")]),a._v(" GC  \n")])])]),t("ul",[t("li",[a._v("LGCC：最近垃圾回收的原因")]),a._v(" "),t("li",[a._v("GCC：当前垃圾回收的原因")])]),a._v(" "),t("h5",{attrs:{id:"gcnew"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcnew"}},[a._v("#")]),a._v(" -gcnew")]),a._v(" "),t("p",[a._v("统计新生代的行为")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gcnew "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v(" S0C      S1C      S0U        S1U  TT  MTT  DSS      EC        EU         YGC     YGCT   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("52231.8")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("209696.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3355520.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1172246.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.242")]),a._v("\n")])])]),t("ul",[t("li",[a._v("TT：Tenuring threshold(提升阈值)")]),a._v(" "),t("li",[a._v("MTT：最大的tenuring threshold")]),a._v(" "),t("li",[a._v("DSS：survivor区域大小 (KB)")])]),a._v(" "),t("h5",{attrs:{id:"gcnewcapacity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcnewcapacity"}},[a._v("#")]),a._v(" -gcnewcapacity")]),a._v(" "),t("p",[a._v("新生代与其相应的内存空间的统计")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("gcnewcapacity "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v("  NGCMN      NGCMX       NGC      S0CMX     S0C     S1CMX     S1C       ECMX        EC        YGC   FGC  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4194304.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4194304.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4194304.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("419392.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3355520.0")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3355520.0")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n")])])]),t("ul",[t("li",[a._v("NGC:当前年轻代的容量 (KB)")]),a._v(" "),t("li",[a._v("S0CMX:最大的S0空间 (KB)")]),a._v(" "),t("li",[a._v("S0C:当前S0空间 (KB)")]),a._v(" "),t("li",[a._v("ECMX:最大eden空间 (KB)")]),a._v(" "),t("li",[a._v("EC:当前eden空间 (KB)")])]),a._v(" "),t("h5",{attrs:{id:"gcold"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcold"}},[a._v("#")]),a._v(" -gcold")]),a._v(" "),t("p",[a._v("统计旧生代的行为")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jstat -gcold 28920   PC       PU        OC           OU       YGC    FGC    FGCT     GCT   1048576.0  46561.7   6291456.0     0.0      4      0      0.000    0.242\n")])])]),t("h5",{attrs:{id:"gcoldcapacity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcoldcapacity"}},[a._v("#")]),a._v(" -gcoldcapacity")]),a._v(" "),t("p",[a._v("统计旧生代的大小和空间")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jstat -gcoldcapacity 28920   OGCMN       OGCMX        OGC         OC         YGC   FGC    FGCT     GCT     6291456.0   6291456.0   6291456.0   6291456.0     4     0    0.000    0.242\n")])])]),t("h5",{attrs:{id:"gcpermcapacity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gcpermcapacity"}},[a._v("#")]),a._v(" -gcpermcapacity")]),a._v(" "),t("p",[a._v("永生代行为统计")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jstat -gcpermcapacity 28920    PGCMN      PGCMX       PGC         PC      YGC   FGC    FGCT     GCT    1048576.0  2097152.0  1048576.0  1048576.0     4     0    0.000    0.242\n")])])]),t("h5",{attrs:{id:"printcompilation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#printcompilation"}},[a._v("#")]),a._v(" -printcompilation")]),a._v(" "),t("p",[a._v("hotspot编译方法统计")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jstat -printcompilation 28920    Compiled  Size  Type Method    1291      78     1    java/util/ArrayList indexOf\n")])])]),t("ul",[t("li",[a._v("Compiled：被执行的编译任务的数量")]),a._v(" "),t("li",[a._v("Size：方法字节码的字节数")]),a._v(" "),t("li",[a._v("Type：编译类型")]),a._v(" "),t("li",[a._v("Method：编译方法的类名和方法名。类名使用”/” 代替 “.” 作为空间分隔符. 方法名是给出类的方法名. 格式是一致于HotSpot - XX:+PrintComplation 选项")])]),a._v(" "),t("h2",{attrs:{id:"jmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jmap"}},[a._v("#")]),a._v(" jmap")]),a._v(" "),t("p",[a._v("jmap(JVM Memory Map)命令用于生成heap dump文件，如果不使用这个命令，还阔以使用-XX:+HeapDumpOnOutOfMemoryError参数来让虚拟机出现OOM的时候·自动生成dump文件。 jmap不仅能生成dump文件，还阔以查询finalize执行队列、Java堆和永久代的详细信息，如当前使用率、当前使用的是哪种收集器等。")]),a._v(" "),t("h3",{attrs:{id:"命令格式-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式-3"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("jmap [option] LVMID\n")])])]),t("h3",{attrs:{id:"option参数-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option参数-2"}},[a._v("#")]),a._v(" option参数")]),a._v(" "),t("ul",[t("li",[a._v("dump : 生成堆转储快照")]),a._v(" "),t("li",[a._v("finalizerinfo : 显示在F-Queue队列等待Finalizer线程执行finalizer方法的对象")]),a._v(" "),t("li",[a._v("heap : 显示Java堆详细信息")]),a._v(" "),t("li",[a._v("histo : 显示堆中对象的统计信息")]),a._v(" "),t("li",[a._v("permstat : to print permanent generation statistics")]),a._v(" "),t("li",[a._v("F : 当-dump没有响应时，强制生成dump快照")])]),a._v(" "),t("h3",{attrs:{id:"示例-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),t("h5",{attrs:{id:"dump"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dump"}},[a._v("#")]),a._v(" -dump")]),a._v(" "),t("p",[a._v("常用格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("-dump::live,format=b,file=<filenamepid \n")])])]),t("p",[a._v("dump堆到文件,format指定输出格式，live指明是活着的对象,file指定文件名")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jmap -dump:live,format=b,file=dump.hprof 28920  Dumping heap to /home/xxx/dump.hprof ...  Heap dump file created\n")])])]),t("p",[a._v("dump.hprof这个后缀是为了后续可以直接用MAT(Memory Anlysis Tool)打开。")]),a._v(" "),t("h5",{attrs:{id:"finalizerinfo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#finalizerinfo"}},[a._v("#")]),a._v(" -finalizerinfo")]),a._v(" "),t("p",[a._v("打印等待回收对象的信息")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jmap -finalizerinfo 28920  Attaching to process ID 28920, please wait...  Debugger attached successfully.  Server compiler detected.  JVM version is 24.71-b01  Number of objects pending for finalization: 0\n")])])]),t("p",[a._v("可以看到当前F-QUEUE队列中并没有等待Finalizer线程执行finalizer方法的对象。")]),a._v(" "),t("h5",{attrs:{id:"heap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#heap"}},[a._v("#")]),a._v(" -heap")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("打印heap的概要信息，GC使用的算法，heap的配置及wise heap的使用情况"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("可以用此来判断内存目前的使用情况以及垃圾回收情况\n$ jmap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("heap "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Attaching")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("process")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ID")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" please wait"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Debugger")]),a._v(" attached "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("successfully"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("\n  Server")]),a._v(" compiler detected"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  JVM version is "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("24.71")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b01  \n\n  using thread"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("local object "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("allocation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("\n  Parallel")]),a._v(" GC "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("with")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("s"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//GC 方式  ")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Heap")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Configuration")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//堆内存初始化配置")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MinHeapFreeRatio")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:MinHeapFreeRatio设置JVM堆最小空闲比率(default 40)")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapFreeRatio")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数 -XX:MaxHeapFreeRatio设置JVM堆最大空闲比率(default 70)")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxHeapSize")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2082471936")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1986.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:MaxHeapSize=设置JVM堆的最大大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NewSize")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1310720")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.25")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:NewSize=设置JVM堆的‘新生代’的默认大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxNewSize")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17592186044415")]),a._v(" MB"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:MaxNewSize=设置JVM堆的‘新生代’的最大大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("OldSize")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5439488")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.1875")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:OldSize=<value>:设置JVM堆的‘老生代’的大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("NewRatio")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:NewRatio=:‘新生代’和‘老生代’的大小比率")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("SurvivorRatio")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:SurvivorRatio=设置年轻代中Eden区与Survivor区的大小比值 ")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("PermSize")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21757952")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("20.75")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:PermSize=<value>:设置JVM堆的‘永生代’的初始大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("MaxPermSize")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("85983232")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("82.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//对应jvm启动参数-XX:MaxPermSize=<value>:设置JVM堆的‘永生代’的最大大小")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("G1HeapRegionSize")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  \n\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Heap")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Usage")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("堆内存使用情况\n  PS "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Young")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Generation")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Eden")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Space")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Eden")]),a._v("区内存分布\n     capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("33030144")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("31.5")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Eden区总容量")]),a._v("\n     used     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1524040")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1.4534378051757812")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Eden区已使用")]),a._v("\n     free     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("31506104")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30.04656219482422")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Eden区剩余容量")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4.614088270399305")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Eden区使用比率")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("From")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Space")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//其中一个Survivor区的内存分布")]),a._v("\n     capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5242880")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     used     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     free     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5242880")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("To")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Space")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//另一个Survivor区的内存分布")]),a._v("\n     capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5242880")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     used     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     free     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5242880")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\n  PS "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Old")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Generation")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//当前的Old区内存分布")]),a._v("\n     capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("86507520")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("82.5")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     used     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     free     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("86507520")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("82.5")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used\n  PS "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Perm")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Generation")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//当前的 “永生代” 内存分布")]),a._v("\n     capacity "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("22020096")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("21.0")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     used     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2496528")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.3808746337890625")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     free     "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("19523568")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("18.619125366210938")]),a._v("MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11.337498256138392")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("%")]),a._v(" used  \n\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("670")]),a._v(" interned "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Strings")]),a._v(" occupying "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("43720")]),a._v(" bytes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("可以很清楚的看到Java堆中各个区域目前的情况。")]),a._v(" "),t("h5",{attrs:{id:"histo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#histo"}},[a._v("#")]),a._v(" -histo")]),a._v(" "),t("p",[a._v("打印堆的对象统计，包括对象数、内存大小等等 （因为在dump:live前会进行full gc，如果带上live则只统计活对象，因此不加live的堆大小要大于加live堆的大小 ）")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jmap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("histo"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("live "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" more\n num     #instances         #bytes  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" name\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("83613")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12012248")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("constMethodKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("23868")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11450280")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("B")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("83613")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10716064")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("methodKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("76287")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10412128")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8227")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9021176")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("constantPoolKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8227")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5830256")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("instanceKlassKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7031")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5156480")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("constantPoolCacheKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("73627")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1767048")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("String")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("9")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2260")]),a._v("        "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1348848")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("methodDataKlass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8856")]),a._v("         "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("849296")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Class")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("仅仅打印了前10行")]),a._v(" "),t("p",[t("code",[a._v("xml class name")]),a._v("是对象类型，说明如下：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("B  byteC  charD  doubleF  floatI  intJ  longZ  boolean[  数组，如[I表示int[][L+类名 其他对象\n")])])]),t("h5",{attrs:{id:"permstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#permstat"}},[a._v("#")]),a._v(" -permstat")]),a._v(" "),t("p",[a._v("打印Java堆内存的永久保存区域的类加载器的智能统计信息。对于每个类加载器而言，它的名称、活跃度、地址、父类加载器、它所加载的类的数量和大小都会被打印。此外，包含的字符串数量和大小也会被打印。")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jmap "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("permstat "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Attaching")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("process")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ID")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28920")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" please wait"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Debugger")]),a._v(" attached "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("successfully"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("\n  Server")]),a._v(" compiler detected"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  JVM version is "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("24.71")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b01\n  finding "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" loader instances "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  computing per loader stat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("done"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  please wait"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" computing liveness"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("liveness analysis may be inaccurate "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n  \n  class_loader            classes bytes   parent_loader           alive"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("?")]),a._v("  type  \n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("bootstrap            "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3111")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("18154296")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),a._v("          live    "),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("internal"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x0000000600905cf8")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1888")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x0000000600087f08")]),a._v("      dead    sun"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("reflect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DelegatingClassLoader")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@0x00000007800500a0")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00000006008fcb48")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1888")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x0000000600087f08")]),a._v("      dead    sun"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("reflect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DelegatingClassLoader")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@0x00000007800500a0")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00000006016db798")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00000006008d3fc0")]),a._v("      dead    java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ResourceBundle")]),a._v("$"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RBClassLoader")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@0x0000000780626ec0")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00000006008d6810")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3056")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("null")]),a._v("          dead    sun"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("reflect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DelegatingClassLoader")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@0x00000007800500a0")]),a._v("\n")])])]),t("h5",{attrs:{id:"f"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#f"}},[a._v("#")]),a._v(" -F")]),a._v(" "),t("p",[a._v("强制模式。如果指定的pid没有响应，请使用jmap -dump或jmap -histo选项。此模式下，不支持live子选项。")]),a._v(" "),t("h2",{attrs:{id:"jhat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jhat"}},[a._v("#")]),a._v(" jhat")]),a._v(" "),t("p",[a._v("jhat(JVM Heap Analysis Tool)命令是与jmap搭配使用，用来分析jmap生成的dump，jhat内置了一个微型的HTTP/HTML服务器，生成dump的分析结果后，可以在浏览器中查看。在此要注意，一般不会直接在服务器上进行分析，因为jhat是一个耗时并且耗费硬件资源的过程，一般把服务器生成的dump文件复制到本地或其他机器上进行分析。")]),a._v(" "),t("h3",{attrs:{id:"命令格式-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式-4"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("jhat "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("dumpfile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h3",{attrs:{id:"参数-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数-2"}},[a._v("#")]),a._v(" 参数")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("stack "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v(" 关闭对象分配调用栈跟踪"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("tracking object allocation call stack"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("。 如果分配位置信息在堆转储中不可用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 则必须将此标志设置为 "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 默认值为 "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(">\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("refs "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("false")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v(" 关闭对象引用跟踪"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("tracking of references "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("objects")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("。 默认值为 "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 默认情况下"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 返回的指针是指向其他特定对象的对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("如反向链接或输入引用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("referrers or incoming references"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 会统计"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("计算堆中的所有对象。"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("port port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("number 设置 jhat HTTP server 的端口号"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 默认值 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7000.")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("exclude exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("file 指定对象查询时需要排除的数据成员列表文件"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a file that lists data members that should be excluded from the reachable objects query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("。 例如"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 如果文件列列出了 "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("value "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 那么当从某个特定对象 "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),a._v(" o 计算可达的对象列表时"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 引用路径涉及 "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("value 的都会被排除。"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("baseline exclude"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("file 指定一个基准堆转储"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("baseline heap dump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("。 在两个 heap dumps 中有相同 object ID 的对象会被标记为不是新的"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("marked as not being "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 其他对象被标记为新的"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 在比较两个不同的堆转储时很有用"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(">\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("debug "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("int")]),a._v(" 设置 debug 级别"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" 表示不输出调试信息。 值越大则表示输出更详细的 debug 信息"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(">\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("version 启动后只显示版本信息就退出"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("J")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" flag 因为 jhat 命令实际上会启动一个JVM来执行"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" 通过 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("J")]),a._v(" 可以在启动JVM时传入一些启动参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 例如"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("J")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Xmx512m")]),a._v(" 则指定运行 jhat 的"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),a._v("虚拟机使用的最大堆内存为 "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("512")]),a._v(" MB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v(" 如果需要使用多个JVM启动参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("则传入多个 "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Jxxxxxx")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),t("h3",{attrs:{id:"示例-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-3"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jhat "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("J")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Xmx512m")]),a._v(" dump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hprof  eading from dump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("hprof"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Dump")]),a._v(" file created "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Fri")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Mar")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("42")]),a._v(" CST "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2016")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Snapshot")]),a._v(" read"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" resolving"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Resolving")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("271678")]),a._v(" objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Chasing")]),a._v(" references"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" expect "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("54")]),a._v(" dots"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Eliminating")]),a._v(" duplicate references"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Snapshot")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("resolved"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("  Started")]),a._v(" HTTP server on port "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("7000")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Server")]),a._v(" is ready"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("中间的-J-Xmx512m是在dump快照很大的情况下分配512M内存去启动HTTP服务器，运行完之后就可在浏览器打开Http://localhost:7000进行快照分析 堆快照分析主要在最后面的Heap Histogram里，里面根据class列出了dump的时候所有存活对象。")]),a._v(" "),t("p",[a._v("分析同样一个dump快照，MAT需要的额外内存比jhat要小的多的多，所以建议使用MAT来进行分析，当然也看个人偏好。")]),a._v(" "),t("h3",{attrs:{id:"分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析"}},[a._v("#")]),a._v(" 分析")]),a._v(" "),t("p",[a._v("打开浏览器Http://localhost:7000，该页面提供了几个查询功能可供使用：")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("All")]),a._v(" classes including platformShow all members of the rootsetShow instance counts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" all classes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("including platform"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Show")]),a._v(" instance counts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" all classes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("excluding platform"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Show")]),a._v(" heap histogramShow finalizer summaryExecute "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Object")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Query")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Language")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("OQL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" query\n")])])]),t("p",[a._v("一般查看堆异常情况主要看这个两个部分： Show instance counts for all classes (excluding platform)，平台外的所有对象信息。如下图：\n"),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/java/jvm/optcmd-1.png"),alt:"wxmp"}})]),a._v(" "),t("p",[a._v("Show heap histogram 以树状图形式展示堆情况。\n"),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:a.$withBase("/assets/img/java/jvm/optcmd-2.png"),alt:"wxmp"}})]),a._v(" "),t("p",[a._v("具体排查时需要结合代码，观察是否大量应该被回收的对象在一直被引用或者是否有占用内存特别大的对象无法被回收。\n一般情况，会down到客户端用工具来分析")]),a._v(" "),t("h2",{attrs:{id:"jstack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jstack"}},[a._v("#")]),a._v(" jstack")]),a._v(" "),t("p",[a._v("jstack用于生成java虚拟机当前时刻的线程快照。线程快照是当前java虚拟机内每一条线程正在执行的方法堆栈的集合，生成线程快照的主要目的是定位线程出现长时间停顿的原因，如线程间死锁、死循环、请求外部资源导致的长时间等待等。 线程出现停顿的时候通过jstack来查看各个线程的调用堆栈，就可以知道没有响应的线程到底在后台做什么事情，或者等待什么资源。 如果java程序崩溃生成core文件，jstack工具可以用来获得core文件的java stack和native stack的信息，从而可以轻松地知道java程序是如何崩溃和在程序何处发生问题。另外，jstack工具还可以附属到正在运行的java程序中，看到当时运行的java程序的java stack和native stack的信息, 如果现在运行的java程序呈现hung的状态，jstack是非常有用的。")]),a._v(" "),t("h3",{attrs:{id:"命令格式-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式-5"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("jstack "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" LVMID\n")])])]),t("h3",{attrs:{id:"option参数-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option参数-3"}},[a._v("#")]),a._v(" option参数")]),a._v(" "),t("ul",[t("li",[a._v("-F : 当正常输出请求不被响应时，强制输出线程堆栈")]),a._v(" "),t("li",[a._v("-l : 除堆栈外，显示关于锁的附加信息")]),a._v(" "),t("li",[a._v("-m : 如果调用到本地方法的话，可以显示C/C++的堆栈")])]),a._v(" "),t("h3",{attrs:{id:"示例-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-4"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("$ jstack "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("l "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("11494")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("more\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2016")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("07")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("28")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("40")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("04")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Full")]),a._v(" thread dump "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Java")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("HotSpot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("TM"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Bit")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Server")]),a._v(" VM "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("24.71")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("b01 mixed mode"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Attach Listener"')]),a._v(" daemon prio"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" tid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00007febb0002000")]),a._v(" nid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x6b6f")]),a._v(" waiting on condition "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x0000000000000000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("State")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" RUNNABLE\n\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Locked")]),a._v(" ownable synchronizers"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http-bio-8005-exec-2"')]),a._v(" daemon prio"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" tid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00007feb94028000")]),a._v(" nid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x7b8c")]),a._v(" waiting on condition "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0x00007fea8f56e000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Thread"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("State")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" WAITING "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("parking"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("sun"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("misc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Unsafe")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("park")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Native")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Method")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" parking "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("to")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("wait")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("0x00000000cae09b80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("AbstractQueuedSynchronizer")]),a._v("$"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConditionObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("LockSupport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("park")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LockSupport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("186")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("locks"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("AbstractQueuedSynchronizer")]),a._v("$"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConditionObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("await")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("AbstractQueuedSynchronizer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2043")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("LinkedBlockingQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("take")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("LinkedBlockingQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("442")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("threads"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TaskQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("take")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TaskQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("104")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("threads"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TaskQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("take")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TaskQueue")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("32")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("ThreadPoolExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("getTask")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1068")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("ThreadPoolExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("runWorker")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1130")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("ThreadPoolExecutor")]),a._v("$"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Worker")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ThreadPoolExecutor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("615")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("apache"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tomcat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("threads"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("TaskThread")]),a._v("$"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("WrappingRunnable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TaskThread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("61")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[a._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")])]),a._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Thread")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("java"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("745")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Locked")]),a._v(" ownable synchronizers"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("None")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("\n")])])]),t("h3",{attrs:{id:"分析-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析-2"}},[a._v("#")]),a._v(" 分析")]),a._v(" "),t("p",[a._v("这里有一篇文章解释的很好 "),t("a",{attrs:{href:"http://www.hollischuang.com/archives/110",target:"_blank",rel:"noopener noreferrer"}},[a._v("分析打印出的文件内容"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"jinfo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jinfo"}},[a._v("#")]),a._v(" jinfo")]),a._v(" "),t("p",[a._v("jinfo(JVM Configuration info)这个命令作用是实时查看和调整虚拟机运行参数。 之前的jps -v口令只能查看到显示指定的参数，如果想要查看未被显示指定的参数的值就要使用jinfo口令")]),a._v(" "),t("h3",{attrs:{id:"命令格式-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令格式-6"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("jinfo [option] [args] LVMID\n")])])]),t("h3",{attrs:{id:"option参数-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option参数-4"}},[a._v("#")]),a._v(" option参数")]),a._v(" "),t("ul",[t("li",[a._v("-flag : 输出指定args参数的值")]),a._v(" "),t("li",[a._v("-flags : 不需要args参数，输出所有JVM参数的值")]),a._v(" "),t("li",[a._v("-sysprops : 输出系统属性，等同于System.getProperties()")])]),a._v(" "),t("h3",{attrs:{id:"示例-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-5"}},[a._v("#")]),a._v(" 示例")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("$ jinfo -flag 11494\n-XX:CMSInitiatingOccupancyFraction=80\n")])])]),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[a._v("#")]),a._v(" 参考文章")]),a._v(" "),t("ul",[t("li",[a._v("https://www.cnblogs.com/xifengxiaoma/p/9415357.html")])])])}),[],!1,null,null,null);s.default=e.exports}}]);