(window.webpackJsonp=window.webpackJsonp||[]).push([[662],{1178:function(e,s,t){"use strict";t.r(s);var n=t(53),a=Object(n.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("本文主要是介绍 JMS规范-Spring JMS组件 。")])]),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#spring-jms各组件详解"}},[e._v("Spring JMS各组件详解")])]),t("li",[t("a",{attrs:{href:"#jmstemplate"}},[e._v("JmsTemplate")])]),t("li",[t("a",{attrs:{href:"#connectionfactory"}},[e._v("ConnectionFactory")]),t("ul",[t("li",[t("a",{attrs:{href:"#singleconnectionfactory"}},[e._v("SingleConnectionFactory")])]),t("li",[t("a",{attrs:{href:"#cachingconnectionfactory"}},[e._v("CachingConnectionFactory")])])])]),t("li",[t("a",{attrs:{href:"#messagelistenercontainer"}},[e._v("MessageListenerContainer")]),t("ul",[t("li",[t("a",{attrs:{href:"#simplemessagelistenercontainer"}},[e._v("SimpleMessageListenerContainer")])]),t("li",[t("a",{attrs:{href:"#defaultmessagelistenercontainer"}},[e._v("DefaultMessageListenerContainer")])])])]),t("li",[t("a",{attrs:{href:"#异步接收消息"}},[e._v("异步接收消息")]),t("ul",[t("li",[t("a",{attrs:{href:"#messagelistener-messagelistenercontainer"}},[e._v("MessageListener & MessageListenerContainer")])]),t("li",[t("a",{attrs:{href:"#sessionawaremessagelistener"}},[e._v("SessionAwareMessageListener")])]),t("li",[t("a",{attrs:{href:"#messagelisteneradapter"}},[e._v("MessageListenerAdapter")])]),t("li",[t("a",{attrs:{href:"#jmslistener"}},[e._v("@JmsListener")])])])]),t("li",[t("a",{attrs:{href:"#总结"}},[e._v("总结")])]),t("li",[t("a",{attrs:{href:"#参考资料"}},[e._v("参考资料")])]),t("li",[t("a",{attrs:{href:"#参考文章"}},[e._v("参考文章")])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"spring-jms各组件详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-jms各组件详解"}},[e._v("#")]),e._v(" Spring JMS各组件详解")]),e._v(" "),t("h2",{attrs:{id:"jmstemplate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jmstemplate"}},[e._v("#")]),e._v(" JmsTemplate")]),e._v(" "),t("p",[e._v("用来send、receive消息（receive是同步式的，会block）。每个"),t("code",[e._v("JmsTemplate")]),e._v("实例拥有自己的配置，比如："),t("code",[e._v("connectionFactory")]),e._v("、"),t("code",[e._v("sessionTransacted")]),e._v("、"),t("code",[e._v("sessionAcknowledgeMode")]),e._v("、"),t("code",[e._v("deliveryMode")]),e._v("、"),t("code",[e._v("timeToLive")]),e._v("等等，所以需根据不同场景配置提供不同的"),t("code",[e._v("JmsTemplate")]),e._v(" Bean而不是一个Singleton Bean通吃所有JMS操作。")]),e._v(" "),t("p",[e._v("下面是类图（只包含了部分关键属性）：")]),e._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:e.$withBase("/assets/img/middleware/jms/springjms-1.png"),alt:"wxmp"}}),e._v(" "),t("h2",{attrs:{id:"connectionfactory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#connectionfactory"}},[e._v("#")]),e._v(" ConnectionFactory")]),e._v(" "),t("p",[e._v("Spring提供了两个"),t("code",[e._v("javax.jms.ConnectionFactory")]),e._v("的实现："),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconnection%2FSingleConnectionFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SingleConnectionFactory"),t("OutboundLink")],1),e._v("和"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconnection%2FCachingConnectionFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CachingConnectionFactory"),t("OutboundLink")],1),e._v("。它们实际上是一种Wrapper，用来缓存如："),t("code",[e._v("Connection")]),e._v("、"),t("code",[e._v("Session")]),e._v("、"),t("code",[e._v("MessageProducer")]),e._v("、"),t("code",[e._v("MessageConsumer")]),e._v("。")]),e._v(" "),t("p",[e._v("事实上"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fcore%2FJmsTemplate.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("JmsTemplate的Javadoc"),t("OutboundLink")],1),e._v("提到过：")]),e._v(" "),t("blockquote",[t("p",[e._v("NOTE: The ConnectionFactory used with this template should return pooled Connections (or a single shared Connection) as well as pooled Sessions and MessageProducers. Otherwise, performance of ad-hoc JMS operations is going to suffer.")])]),e._v(" "),t("p",[e._v("在Spring JMS文档的"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fspring-framework-reference%2Fhtml%2Fjms.html%23jms-caching-resources",target:"_blank",rel:"noopener noreferrer"}},[e._v("Caching Messaging Resources"),t("OutboundLink")],1),e._v("中也提到了需要优化资源使用以提升性能：")]),e._v(" "),t("blockquote",[t("p",[e._v("The standard API involves creating many intermediate objects. To send a message the following 'API' walk is performed\nConnectionFactory->Connection->Session->MessageProducer->send\nBetween the ConnectionFactory and the Send operation there are three intermediate objects that are created and destroyed. To optimise the resource usage and increase performance two implementations of "),t("code",[e._v("ConnectionFactory")]),e._v(" are provided.")])]),e._v(" "),t("p",[e._v("下面是类图（只包含了部分关键属性）：")]),e._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:e.$withBase("/assets/img/middleware/jms/springjms-2.png"),alt:"wxmp"}}),e._v(" "),t("h3",{attrs:{id:"singleconnectionfactory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#singleconnectionfactory"}},[e._v("#")]),e._v(" SingleConnectionFactory")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconnection%2FSingleConnectionFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SingleConnectionFactory"),t("OutboundLink")],1),e._v("顾名思义，无论调用多少次"),t("code",[e._v("createConnection(..)")]),e._v("都返回同一个"),t("code",[e._v("Connection")]),e._v("实例。但是它并不缓存"),t("code",[e._v("Session")]),e._v("，也就是说调用一次"),t("code",[e._v("createSession(...)")]),e._v("就会创建一个新的实例。")]),e._v(" "),t("p",[e._v("可以通过"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fgithub.com%2Fchanjarster%2Fspring-jms-learn%2Fblob%2Fmaster%2Fsrc%2Ftest%2Fjava%2Fme%2Fchanjar%2Fspringjmslearn%2FSingleConnectionFactoryTest.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("SingleConnectionFactoryTest"),t("OutboundLink")],1),e._v("了解详情。")]),e._v(" "),t("p",[e._v("所以在大多数情况下，不推荐使用"),t("code",[e._v("SingleConnectionFactory")]),e._v("。")]),e._v(" "),t("h3",{attrs:{id:"cachingconnectionfactory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cachingconnectionfactory"}},[e._v("#")]),e._v(" CachingConnectionFactory")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconnection%2FCachingConnectionFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("CachingConnectionFactory"),t("OutboundLink")],1),e._v("继承自"),t("code",[e._v("SingleConnectionFactory")]),e._v("，除了依然保留缓存同一个"),t("code",[e._v("Connection")]),e._v("实例的特性外，还增加了对于"),t("code",[e._v("Session")]),e._v("、"),t("code",[e._v("MessageProducer")]),e._v("、"),t("code",[e._v("MessageConsumer")]),e._v("的缓存。")]),e._v(" "),t("p",[t("code",[e._v("CachingConnectionFactory")]),e._v("其内部维护了一个"),t("code",[e._v("Acknowledge Mode -> List<Session>")]),e._v("的Map，sessionCacheSize实际上指的是"),t("code",[e._v("List<Session>")]),e._v("的大小，所以最多会有4 * sessionCacheSize数量的"),t("code",[e._v("Session")]),e._v("被缓存（因为JMS规定了四种Acknowledge Mode）。\n并且"),t("code",[e._v("CachingConnectionFactory")]),e._v("其本质不是一个Object Pool，所以不会因为实际请求Session数量超出sessionCacheSize导致block或者返回null，可以放心使用。")]),e._v(" "),t("p",[t("code",[e._v("CachingConnectionFactory")]),e._v("返回的每个"),t("code",[e._v("Session")]),e._v("内部都有"),t("code",[e._v("ConsumerCacheKey -> MessageConsumer")]),e._v("以及"),t("code",[e._v("DestinationCacheKey -> MessageProducer")]),e._v("的Map，用来缓存"),t("code",[e._v("MessageProducer")]),e._v("和"),t("code",[e._v("MessageConsumer")]),e._v("。")]),e._v(" "),t("p",[e._v("可以通过"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fgithub.com%2Fchanjarster%2Fspring-jms-learn%2Fblob%2Fmaster%2Fsrc%2Ftest%2Fjava%2Fme%2Fchanjar%2Fspringjmslearn%2FCachingConnectionFactoryTest.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("CachingConnectionFactory"),t("OutboundLink")],1),e._v("了解详情。")]),e._v(" "),t("h2",{attrs:{id:"messagelistenercontainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messagelistenercontainer"}},[e._v("#")]),e._v(" MessageListenerContainer")]),e._v(" "),t("p",[e._v("Spring JMS中有一个特性"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("MessageListenerContainer"),t("OutboundLink")],1),e._v("，按照官方文档的说法：")]),e._v(" "),t("blockquote",[t("p",[e._v("A message listener container is used to receive messages from a JMS message queue and drive the MessageListener that is injected into it.")])]),e._v(" "),t("p",[e._v("上面提到的"),t("code",[e._v("MessageListener")]),e._v("就是"),t("code",[e._v("javax.jms.MessageListener")]),e._v("，第一次看到这个东西感觉有点奇怪，因为"),t("code",[e._v("MessageListener")]),e._v("的正规用法应该"),t("code",[e._v("MessageConsumer.setMessageListener()")]),e._v("就行了。")]),e._v(" "),t("p",[e._v("因为"),t("code",[e._v("MessageListenerContainer")]),e._v("继承自"),t("code",[e._v("SmartLifeCycle")]),e._v("，所以它提供了程序启动时开启connection、session，程序关闭是关闭session、connection的功能，能够让你不用操心资源回收问题。")]),e._v(" "),t("p",[e._v("下面介绍一下两个实现"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FSimpleMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SimpleMessageListenerContainer"),t("OutboundLink")],1),e._v("和"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FDefaultMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultMessageListenerContainer"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("p",[e._v("下面是类图（只包含了部分关键属性）：")]),e._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:e.$withBase("/assets/img/middleware/jms/springjms-3.png"),alt:"wxmp"}}),e._v(" "),t("h3",{attrs:{id:"simplemessagelistenercontainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#simplemessagelistenercontainer"}},[e._v("#")]),e._v(" SimpleMessageListenerContainer")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FSimpleMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SimpleMessageListenerContainer"),t("OutboundLink")],1),e._v("使用"),t("code",[e._v("MessageConsumer.setMessageListener()")]),e._v("来监听消息，它不支持参与外部事务（比如PlatformTransactionManager）。")]),e._v(" "),t("p",[e._v("它是可以持有多个"),t("code",[e._v("MessageConsumer")]),e._v("实例的。代码如下：")]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" concurrentConsumers "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Session")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" sessions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Set")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MessageConsumer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" consumers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("protected")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("initializeConsumers")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("throws")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("JMSException")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Register Sessions and MessageConsumers.")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("synchronized")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("consumersMonitor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("consumers "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("==")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("sessions "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("HashSet")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Session")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("concurrentConsumers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("consumers "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("HashSet")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MessageConsumer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("concurrentConsumers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Connection")]),e._v(" con "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("getSharedConnection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("int")]),e._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("concurrentConsumers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Session")]),e._v(" session "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("createSession")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("con"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MessageConsumer")]),e._v(" consumer "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("createListenerConsumer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("sessions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("consumers"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("consumer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("其处理消息的方式有两种：1）传统的"),t("code",[e._v("MessageConsumer.setMessageListener()")]),e._v("；2）使用"),t("code",[e._v("Executor")]),e._v("。")]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("taskExecutor "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  consumer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("setMessageListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MessageListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("onMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("final")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Message")]),e._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      taskExecutor"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("execute")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Runnable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("processMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  consumer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("setMessageListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("MessageListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("onMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Message")]),e._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("processMessage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" session"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h3",{attrs:{id:"defaultmessagelistenercontainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#defaultmessagelistenercontainer"}},[e._v("#")]),e._v(" DefaultMessageListenerContainer")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FDefaultMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultMessageListenerContainer"),t("OutboundLink")],1),e._v("和"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FSimpleMessageListenerContainer.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SimpleMessageListenerContainer"),t("OutboundLink")],1),e._v("不同，它使用"),t("code",[e._v("MessageConsumer.receive()")]),e._v("来处理消息，并且支持XA transaction。")]),e._v(" "),t("p",[e._v("因为"),t("code",[e._v("receive()")]),e._v("是同步的、blocking方法，其性能没有"),t("code",[e._v("setMessageListener()")]),e._v("好，所以它非常依赖多线程("),t("code",[e._v("TaskExecutor")]),e._v(")，这也也带来来dynamic scaling的好处。")]),e._v(" "),t("p",[e._v("请注意不要对Topic采用多线程，否则会收到重复的消息，详情见"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FDefaultMessageListenerContainer.html%23setConcurrentConsumers-int-",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h2",{attrs:{id:"异步接收消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步接收消息"}},[e._v("#")]),e._v(" 异步接收消息")]),e._v(" "),t("p",[e._v("同步接收消息的方式有"),t("code",[e._v("JmsTemplate.receive*()")]),e._v("和"),t("code",[e._v("MessageConsumer.receive*()")]),e._v("，这里不多讲，重点讲异步接收消息的几种方式。")]),e._v(" "),t("h3",{attrs:{id:"messagelistener-messagelistenercontainer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messagelistener-messagelistenercontainer"}},[e._v("#")]),e._v(" MessageListener & MessageListenerContainer")]),e._v(" "),t("p",[e._v("把"),t("code",[e._v("MessageListener")]),e._v("包装到"),t("code",[e._v("MessageListenerContainer")]),e._v("里接收消息，例子参见官方文档"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fspring-framework-reference%2Fhtml%2Fjms.html%23jms-asynchronousMessageReception",target:"_blank",rel:"noopener noreferrer"}},[e._v("Asynchronous Reception - Message-Driven POJOs"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"sessionawaremessagelistener"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sessionawaremessagelistener"}},[e._v("#")]),e._v(" SessionAwareMessageListener")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2FSessionAwareMessageListener.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SessionAwareMessageListener"),t("OutboundLink")],1),e._v("是Spring提供和"),t("code",[e._v("MessageListener")]),e._v("类似的接口，"),t("code",[e._v("MessageListenerContainer")]),e._v("支持这个接口，用法和"),t("code",[e._v("MessageListener")]),e._v("一样。")]),e._v(" "),t("h3",{attrs:{id:"messagelisteneradapter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messagelisteneradapter"}},[e._v("#")]),e._v(" MessageListenerAdapter")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Flistener%2Fadapter%2FMessageListenerAdapter.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("MessageListenerAdapter"),t("OutboundLink")],1),e._v("是Spring提供的另一个异步接收消息的方式，它"),t("code",[e._v("MessageListener")]),e._v("与"),t("code",[e._v("SessionAwareMessageListener")]),e._v("更灵活，因为它采用反射机制来把消息传递到你的接收消息的方法上。")]),e._v(" "),t("p",[e._v("使用方法见官方文档"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fspring-framework-reference%2Fhtml%2Fjms.html%23jms-receiving-async-session-aware-message-listener",target:"_blank",rel:"noopener noreferrer"}},[e._v("the SessionAwareMessageListener interface"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("h3",{attrs:{id:"jmslistener"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jmslistener"}},[e._v("#")]),e._v(" @JmsListener")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fannotation%2FJmsListener.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("@JmsListener"),t("OutboundLink")],1),e._v("是另一种接收消息的方法，怎么使用它可以看官方文档"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fspring-framework-reference%2Fhtml%2Fjms.html%23jms-annotated",target:"_blank",rel:"noopener noreferrer"}},[e._v("Annotation-driven listener endpoints"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("p",[t("code",[e._v("@JmsListener")]),e._v("和"),t("code",[e._v("MessageListener")]),e._v("、"),t("code",[e._v("SessionAwareMessageListener")]),e._v("、"),t("code",[e._v("MessageListenerAdapter")]),e._v("一样也需要一个Container，用户可以通过"),t("code",[e._v("@JmsListener.containerFactory")]),e._v("属性来指定"),t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconfig%2FJmsListenerContainerFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("JmsListenerContainerFactory"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("p",[e._v("Spring提供了两种JmsListenerContainerFactory实现：")]),e._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconfig%2FDefaultJmsListenerContainerFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("DefaultJmsListenerContainerFactory"),t("OutboundLink")],1),e._v("，用来生产DefaultMessageListenerContainer，Spring Boot提供"),t("code",[e._v("DefaultJmsListenerContainerFactoryConfigurer")]),e._v("作为配置工具")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring-framework%2Fdocs%2F4.3.9.RELEASE%2Fjavadoc-api%2Forg%2Fspringframework%2Fjms%2Fconfig%2FSimpleJmsListenerContainerFactory.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SimpleJmsListenerContainerFactory"),t("OutboundLink")],1),e._v("，用来生产SimpleMessageListenerContainer")])]),e._v(" "),t("p",[e._v("所以在使用"),t("code",[e._v("@JmsListener")]),e._v("需要仔细的选择正确的"),t("code",[e._v("JmsListenerContainerFactory")]),e._v("，而不是全局采用一种配置。")]),e._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),t("p",[e._v("使用Spring JMS时有需要注意以下三点：")]),e._v(" "),t("ul",[t("li",[t("ol",[t("li",[e._v("根据实际情况，配置合适的ConnectionFactory Bean，如有需要可以有多个ConnectionFactory Bean。")])])]),e._v(" "),t("li",[t("ol",{attrs:{start:"2"}},[t("li",[e._v("JmsTemplate, MessageListenerContainer, JmsListenerContainerFactory需根据实际情况配置不同Bean，避免全局使用一套。")])])]),e._v(" "),t("li",[t("ol",{attrs:{start:"3"}},[t("li",[e._v("JmsTemplate, MessageListenerContainer, JmsListenerContainerFactory选择合适的ConnectionFactory。")])])]),e._v(" "),t("li",[t("ol",{attrs:{start:"4"}},[t("li",[e._v("设定好合适的Executor/线程池大小，避免大量Thread block。")])])])]),e._v(" "),t("p",[e._v("下面是一张各个组件的关系图。")]),e._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:e.$withBase("/assets/img/middleware/jms/springjms-4.png"),alt:"wxmp"}}),e._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[e._v("#")]),e._v(" 参考资料")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.spring.io%2Fspring%2Fdocs%2F4.3.9.RELEASE%2Fspring-framework-reference%2Fhtml%2Fjms.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spring JMS"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdzone.com%2Farticles%2Fspring-jms-listener-adapters",target:"_blank",rel:"noopener noreferrer"}},[e._v("Spring JMS Listener Adapters"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?url=https%3A%2F%2Fdocs.oracle.com%2Fjavaee%2F7%2Fapi%2Fjavax%2Fjms%2Fpackage-summary.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("JMS Javadoc"),t("OutboundLink")],1)])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://segmentfault.com/t/spring",target:"_blank",rel:"noopener noreferrer"}},[e._v("spring"),t("OutboundLink")],1),t("a",{attrs:{href:"https://segmentfault.com/t/jms",target:"_blank",rel:"noopener noreferrer"}},[e._v("jms"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[e._v("#")]),e._v(" 参考文章")]),e._v(" "),t("ul",[t("li",[e._v("https://segmentfault.com/a/1190000012875201")])])])}),[],!1,null,null,null);s.default=a.exports}}]);