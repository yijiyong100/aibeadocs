(window.webpackJsonp=window.webpackJsonp||[]).push([[714],{1230:function(s,a,t){"use strict";t.r(a);var n=t(53),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),t("p",[s._v("本文主要是介绍 Linux命令-常用命令大全 。")])]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#linux常用命令"}},[s._v("Linux常用命令")])]),t("li",[t("a",{attrs:{href:"#一、基本命令"}},[s._v("一、基本命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#_1-1-关机和重启"}},[s._v("1.1 关机和重启")])]),t("li",[t("a",{attrs:{href:"#_1-2-帮助命令"}},[s._v("1.2 帮助命令")])])])]),t("li",[t("a",{attrs:{href:"#二、目录操作命令"}},[s._v("二、目录操作命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#_2-1-目录切换-cd"}},[s._v("2.1 目录切换 cd")])]),t("li",[t("a",{attrs:{href:"#_2-2-目录查看-ls-al"}},[s._v("2.2 目录查看 ls [-al]")])]),t("li",[t("a",{attrs:{href:"#_2-3-目录操作【增-删-改-查】"}},[s._v("2.3 目录操作【增，删，改，查】")])])])]),t("li",[t("a",{attrs:{href:"#三、文件操作命令"}},[s._v("三、文件操作命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#_3-1-文件操作【增-删-改-查】"}},[s._v("3.1 文件操作【增，删，改，查】")])]),t("li",[t("a",{attrs:{href:"#_3-2-权限修改"}},[s._v("3.2 权限修改")])])])]),t("li",[t("a",{attrs:{href:"#四、压缩文件操作"}},[s._v("四、压缩文件操作")]),t("ul",[t("li",[t("a",{attrs:{href:"#_4-1-打包和压缩"}},[s._v("4.1 打包和压缩")])]),t("li",[t("a",{attrs:{href:"#_4-2-解压"}},[s._v("4.2 解压")])])])]),t("li",[t("a",{attrs:{href:"#五、查找命令"}},[s._v("五、查找命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#_5-1-grep"}},[s._v("5.1 grep")])]),t("li",[t("a",{attrs:{href:"#_5-2-find"}},[s._v("5.2 find")])]),t("li",[t("a",{attrs:{href:"#_5-3-locate"}},[s._v("5.3 locate")])]),t("li",[t("a",{attrs:{href:"#_5-4-whereis"}},[s._v("5.4 whereis")])]),t("li",[t("a",{attrs:{href:"#_5-5-which"}},[s._v("5.5 which")])])])]),t("li",[t("a",{attrs:{href:"#六、su、sudo"}},[s._v("六、su、sudo")]),t("ul",[t("li",[t("a",{attrs:{href:"#_6-1-su"}},[s._v("6.1 su")])]),t("li",[t("a",{attrs:{href:"#_6-2-sudo"}},[s._v("6.2 sudo")])])])]),t("li",[t("a",{attrs:{href:"#七、系统服务"}},[s._v("七、系统服务")])]),t("li",[t("a",{attrs:{href:"#八、网络管理"}},[s._v("八、网络管理")]),t("ul",[t("li",[t("a",{attrs:{href:"#_8-1-主机名配置"}},[s._v("8.1 主机名配置")])]),t("li",[t("a",{attrs:{href:"#_8-2-ip-地址配置"}},[s._v("8.2 IP 地址配置")])]),t("li",[t("a",{attrs:{href:"#_8-3-域名映射"}},[s._v("8.3 域名映射")])])])]),t("li",[t("a",{attrs:{href:"#九、定时任务指令crontab-配置"}},[s._v("九、定时任务指令crontab 配置")]),t("ul",[t("li",[t("a",{attrs:{href:"#_9-1-命令格式"}},[s._v("9.1 命令格式")])]),t("li",[t("a",{attrs:{href:"#_9-2-配置说明、实例"}},[s._v("9.2 配置说明、实例")])])])]),t("li",[t("a",{attrs:{href:"#十、其他命令"}},[s._v("十、其他命令")]),t("ul",[t("li",[t("a",{attrs:{href:"#_10-1-查看当前目录-pwd"}},[s._v("10.1 查看当前目录：pwd")])]),t("li",[t("a",{attrs:{href:"#_10-2-查看进程-ps-ef"}},[s._v("10.2 查看进程：ps -ef")])]),t("li",[t("a",{attrs:{href:"#_10-3-结束进程-kill"}},[s._v("10.3 结束进程：kill")])]),t("li",[t("a",{attrs:{href:"#_10-4-网络通信命令"}},[s._v("10.4 网络通信命令：")])]),t("li",[t("a",{attrs:{href:"#_10-5-配置网络"}},[s._v("10.5 配置网络")])]),t("li",[t("a",{attrs:{href:"#_10-6-重启网络"}},[s._v("10.6 重启网络")])]),t("li",[t("a",{attrs:{href:"#_10-7-切换用户"}},[s._v("10.7 切换用户")])]),t("li",[t("a",{attrs:{href:"#_10-8-关闭防火墙"}},[s._v("10.8 关闭防火墙")])]),t("li",[t("a",{attrs:{href:"#_10-9-修改文件权限"}},[s._v("10.9 修改文件权限")])]),t("li",[t("a",{attrs:{href:"#_10-10-清屏"}},[s._v("10.10 清屏")])]),t("li",[t("a",{attrs:{href:"#_10-11-vi模式下快捷键"}},[s._v("10.11 vi模式下快捷键")])])])]),t("li",[t("a",{attrs:{href:"#十一、linux项目部署"}},[s._v("十一、Linux项目部署")]),t("ul",[t("li",[t("a",{attrs:{href:"#_11-1-安装jdk1-8"}},[s._v("11.1 安装jdk1.8")])]),t("li",[t("a",{attrs:{href:"#_11-2-安装mysql5-6"}},[s._v("11.2 安装MySQL5.6")])]),t("li",[t("a",{attrs:{href:"#_11-3-安装tomcat部署项目"}},[s._v("11.3 安装tomcat部署项目")])]),t("li",[t("a",{attrs:{href:"#_11-4-linux下使用fastdfs"}},[s._v("11.4 Linux下使用FastDFS")])]),t("li",[t("a",{attrs:{href:"#_11-5-安装fastdfs-nginx-module"}},[s._v("11.5 安装fastdfs-nginx-module")])]),t("li",[t("a",{attrs:{href:"#_11-6-安装nginx的插件"}},[s._v("11.6 安装Nginx的插件")])]),t("li",[t("a",{attrs:{href:"#_11-7-安装elasticsearch"}},[s._v("11.7 安装Elasticsearch")])]),t("li",[t("a",{attrs:{href:"#_11-8-安装rabbitmq"}},[s._v("11.8 安装RabbitMQ")])]),t("li",[t("a",{attrs:{href:"#_11-9-redis安装和配置"}},[s._v("11.9 redis安装和配置")])]),t("li",[t("a",{attrs:{href:"#参考文章"}},[s._v("参考文章")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"linux常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux常用命令"}},[s._v("#")]),s._v(" Linux常用命令")]),s._v(" "),t("h2",{attrs:{id:"一、基本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、基本命令"}},[s._v("#")]),s._v(" 一、基本命令")]),s._v(" "),t("h3",{attrs:{id:"_1-1-关机和重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-关机和重启"}},[s._v("#")]),s._v(" 1.1 关机和重启")]),s._v(" "),t("p",[s._v("关机\nshutdown -h now     立刻关机\nshutdown -h 5     5分钟后关机\npoweroff       立刻关机\n重启\nshutdown -r now     立刻重启\nshutdown -r 5     5分钟后重启\nreboot         立刻重启")]),s._v(" "),t("h3",{attrs:{id:"_1-2-帮助命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-帮助命令"}},[s._v("#")]),s._v(" 1.2 帮助命令")]),s._v(" "),t("p",[s._v("--help命令\nshutdown --help：\nifconfig  --help：查看网卡信息")]),s._v(" "),t("p",[s._v("man命令（命令说明书）\nman shutdown\n注意：man shutdown打开命令说明书之后，使用按键q退出")]),s._v(" "),t("h2",{attrs:{id:"二、目录操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、目录操作命令"}},[s._v("#")]),s._v(" 二、目录操作命令")]),s._v(" "),t("h3",{attrs:{id:"_2-1-目录切换-cd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-目录切换-cd"}},[s._v("#")]),s._v(" 2.1 目录切换 cd")]),s._v(" "),t("p",[s._v("命令：cd 目录")]),s._v(" "),t("p",[s._v("cd /     切换到根目录\ncd /usr     切换到根目录下的usr目录\ncd ../     切换到上一级目录 或者  cd ..\ncd ~     切换到home目录\ncd -     切换到上次访问的目录")]),s._v(" "),t("h3",{attrs:{id:"_2-2-目录查看-ls-al"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-目录查看-ls-al"}},[s._v("#")]),s._v(" 2.2 目录查看 ls [-al]")]),s._v(" "),t("p",[s._v("命令：ls [-al]")]),s._v(" "),t("ul",[t("li",[s._v("ls         查看当前目录下的所有目录和文件")]),s._v(" "),t("li",[s._v("ls -a       查看当前目录下的所有目录和文件（包括隐藏的文件）")]),s._v(" "),t("li",[s._v("ls -l 或 ll    列表查看当前目录下的所有目录和文件（列表查看，显示更多信息）")]),s._v(" "),t("li",[s._v("ls /dir       查看指定目录下的所有目录和文件  如：ls /usr")])]),s._v(" "),t("h3",{attrs:{id:"_2-3-目录操作【增-删-改-查】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-目录操作【增-删-改-查】"}},[s._v("#")]),s._v(" 2.3 目录操作【增，删，改，查】")]),s._v(" "),t("h4",{attrs:{id:"_2-3-1-创建目录【增】-mkdir"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-创建目录【增】-mkdir"}},[s._v("#")]),s._v(" 2.3.1 创建目录【增】 mkdir")]),s._v(" "),t("p",[s._v("命令：mkdir 目录")]),s._v(" "),t("p",[s._v("mkdir   aaa       在当前目录下创建一个名为aaa的目录")]),s._v(" "),t("p",[s._v("mkdir   /usr/aaa   在指定目录下创建一个名为aaa的目录")]),s._v(" "),t("h4",{attrs:{id:"_2-3-2-删除目录或文件【删】rm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-删除目录或文件【删】rm"}},[s._v("#")]),s._v(" 2.3.2 删除目录或文件【删】rm")]),s._v(" "),t("p",[s._v("命令：rm [-rf] 目录")]),s._v(" "),t("p",[s._v("删除文件：")]),s._v(" "),t("p",[s._v("rm 文件     删除当前目录下的文件")]),s._v(" "),t("p",[s._v("rm -f 文件   删除当前目录的的文件（不询问）")]),s._v(" "),t("p",[s._v("删除目录：")]),s._v(" "),t("p",[s._v("rm -r aaa   递归删除当前目录下的aaa目录")]),s._v(" "),t("p",[s._v("rm -rf aaa   递归删除当前目录下的aaa目录（不询问）")]),s._v(" "),t("p",[s._v("全部删除：")]),s._v(" "),t("p",[s._v("rm -rf *   将当前目录下的所有目录和文件全部删除")]),s._v(" "),t("p",[s._v("rm -rf /*   【自杀命令！慎用！慎用！慎用！】将根目录下的所有文件全部删除")]),s._v(" "),t("p",[s._v("注意：rm不仅可以删除目录，也可以删除其他文件或压缩包，为了方便大家的记忆，无论删除任何目录或文件，都直接使用 rm -rf 目录/文件/压缩包")]),s._v(" "),t("h4",{attrs:{id:"_2-3-3-目录修改【改】mv-和-cp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-3-目录修改【改】mv-和-cp"}},[s._v("#")]),s._v(" 2.3.3 目录修改【改】mv 和 cp")]),s._v(" "),t("p",[s._v("一、重命名目录\n命令：mv 当前目录  新目录\n例如：mv aaa bbb   将目录aaa改为bbb\n注意：mv的语法不仅可以对目录进行重命名而且也可以对各种文件，压缩包等进行   重命名的操作")]),s._v(" "),t("p",[s._v("二、剪切目录\n命令：mv 目录名称 目录的新位置\n示例：将/usr/tmp目录下的aaa目录剪切到 /usr目录下面   mv /usr/tmp/aaa /usr\n注意：mv语法不仅可以对目录进行剪切操作，对文件和压缩包等都可执行剪切操作")]),s._v(" "),t("p",[s._v("三、拷贝目录\n命令：cp -r 目录名称 目录拷贝的目标位置  -r代表递归\n示例：将/usr/tmp目录下的aaa目录复制到 /usr目录下面   cp /usr/tmp/aaa  /usr\n注意：cp命令不仅可以拷贝目录还可以拷贝文件，压缩包等，拷贝文件和压缩包时不   用写-r递归")]),s._v(" "),t("h4",{attrs:{id:"_2-3-4-搜索目录【查】find"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-4-搜索目录【查】find"}},[s._v("#")]),s._v(" 2.3.4 搜索目录【查】find")]),s._v(" "),t("p",[s._v("命令：find 目录 参数 文件名称\n示例：find /usr/tmp -name 'a*'   查找/usr/tmp目录下的所有以a开头的目录或文件")]),s._v(" "),t("h2",{attrs:{id:"三、文件操作命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、文件操作命令"}},[s._v("#")]),s._v(" 三、文件操作命令")]),s._v(" "),t("h3",{attrs:{id:"_3-1-文件操作【增-删-改-查】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-文件操作【增-删-改-查】"}},[s._v("#")]),s._v(" 3.1 文件操作【增，删，改，查】")]),s._v(" "),t("h4",{attrs:{id:"_3-1-1-新建文件【增】touch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-新建文件【增】touch"}},[s._v("#")]),s._v(" 3.1.1 新建文件【增】touch")]),s._v(" "),t("p",[s._v("命令：touch 文件名\n示例：在当前目录创建一个名为aa.txt的文件     touch  aa.txt")]),s._v(" "),t("h4",{attrs:{id:"_3-1-2-删除文件-【删】-rm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-删除文件-【删】-rm"}},[s._v("#")]),s._v(" 3.1.2 删除文件 【删】 rm")]),s._v(" "),t("p",[s._v("命令：rm -rf 文件名")]),s._v(" "),t("h4",{attrs:{id:"_3-1-3-修改文件【改】-vi或vim"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-修改文件【改】-vi或vim"}},[s._v("#")]),s._v(" 3.1.3 修改文件【改】 vi或vim")]),s._v(" "),t("p",[s._v("【vi编辑器的3种模式】\n基本上vi可以分为三种状态，分别是命令模式（command mode）、插入模式（Insert mode）和底行模式（last line mode），各模式的功能区分如下：\n\\1) 命令行模式command mode）\n控制屏幕光标的移动，字符、字或行的删除，查找，移动复制某区段及进入Insert mode下，或者到 last line mode。\n命令行模式下的常用命令：\n【1】控制光标移动：↑，↓，j\n【2】删除当前行：dd\n【3】查找：/字符\n【4】进入编辑模式：i o a\n【5】进入底行模式：:")]),s._v(" "),t("p",[s._v("\\2) 编辑模式（Insert mode）\n只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。\n编辑模式下常用命令：\n【1】ESC 退出编辑模式到命令行模式；")]),s._v(" "),t("p",[s._v("\\3) 底行模式（last line mode）\n将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。\n底行模式下常用命令：\n【1】退出编辑：  :q\n【2】强制退出：  :q!\n【3】保存并退出：  :wq")]),s._v(" "),t("p",[t("strong",[s._v("打开文件")])]),s._v(" "),t("p",[s._v("命令：vi 文件名")]),s._v(" "),t("p",[s._v("示例：打开当前目录下的aa.txt文件   vi aa.txt 或者 vim aa.txt")]),s._v(" "),t("p",[s._v("注意：使用vi编辑器打开文件后，并不能编辑，因为此时处于命令模式，点击键盘i/a/o进入编辑模式。")]),s._v(" "),t("p",[t("strong",[s._v("编辑文件")])]),s._v(" "),t("p",[s._v("使用vi编辑器打开文件后点击按键：i ，a或者o即可进入编辑模式。")]),s._v(" "),t("ul",[t("li",[s._v("i:在光标所在字符前开始插入")]),s._v(" "),t("li",[s._v("a:在光标所在字符后开始插入")]),s._v(" "),t("li",[s._v("o:在光标所在行的下面另起一新行插入")])]),s._v(" "),t("p",[t("strong",[s._v("保存或者取消编辑")])]),s._v(" "),t("p",[s._v("保存文件：")]),s._v(" "),t("ul",[t("li",[s._v("第一步：ESC  进入命令行模式")]),s._v(" "),t("li",[s._v("第二步：:   进入底行模式")]),s._v(" "),t("li",[s._v("第三步：wq   保存并退出编辑")])]),s._v(" "),t("p",[s._v("取消编辑：")]),s._v(" "),t("ul",[t("li",[s._v("第一步：ESC  进入命令行模式")]),s._v(" "),t("li",[s._v("第二步：:   进入底行模式")]),s._v(" "),t("li",[s._v("第三步：q!   撤销本次修改并退出编辑")])]),s._v(" "),t("h4",{attrs:{id:"_3-1-4-文件的查看【查】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-文件的查看【查】"}},[s._v("#")]),s._v(" 3.1.4 文件的查看【查】")]),s._v(" "),t("p",[s._v("文件的查看命令：cat/more/less/tail")]),s._v(" "),t("p",[t("strong",[s._v("cat：看最后一屏")])]),s._v(" "),t("p",[s._v("示例：使用cat查看/etc/sudo.conf文件，只能显示最后一屏内容")]),s._v(" "),t("p",[s._v("cat sudo.conf")]),s._v(" "),t("p",[t("strong",[s._v("more：百分比显示")])]),s._v(" "),t("p",[s._v("示例：使用more查看/etc/sudo.conf文件，可以显示百分比，回车可以向下一行，空格可以向下一页，q可以退出查看")]),s._v(" "),t("p",[s._v("more sudo.conf")]),s._v(" "),t("p",[t("strong",[s._v("less：翻页查看")])]),s._v(" "),t("p",[s._v("示例：使用less查看/etc/sudo.conf文件，可以使用键盘上的PgUp和PgDn向上   和向下翻页，q结束查看")]),s._v(" "),t("p",[s._v("less sudo.conf")]),s._v(" "),t("p",[t("strong",[s._v("tail：指定行数或者动态查看")])]),s._v(" "),t("p",[s._v("示例：使用tail -10 查看/etc/sudo.conf文件的后10行，Ctrl+C结束")]),s._v(" "),t("p",[s._v("tail -10 sudo.conf")]),s._v(" "),t("h3",{attrs:{id:"_3-2-权限修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-权限修改"}},[s._v("#")]),s._v(" 3.2 权限修改")]),s._v(" "),t("p",[s._v("rwx：r代表可读，w代表可写，x代表该文件是一个可执行文件，如果rwx任意位置变为-则代表不可读或不可写或不可执行文件。")]),s._v(" "),t("p",[s._v("示例：给aaa.txt文件权限改为可执行文件权限，aaa.txt文件的权限是-rw-------")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("第一位：-就代表是文件，d代表是文件夹")])]),s._v(" "),t("li",[t("p",[s._v("第一段（3位）：代表拥有者的权限")])]),s._v(" "),t("li",[t("p",[s._v("第二段（3位）：代表拥有者所在的组，组员的权限")])]),s._v(" "),t("li",[t("p",[s._v("第三段（最后3位）：代表的是其他用户的权限")]),s._v(" "),t("p",[s._v("421  421  421\n-  rw-  ---   ---")])])]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("命令：chmod +x aaa.txt\n\n或者采用8421法\n\n命令：chmod 100 aaa.txt\n")])])]),t("h2",{attrs:{id:"四、压缩文件操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、压缩文件操作"}},[s._v("#")]),s._v(" 四、压缩文件操作")]),s._v(" "),t("h3",{attrs:{id:"_4-1-打包和压缩"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-打包和压缩"}},[s._v("#")]),s._v(" 4.1 打包和压缩")]),s._v(" "),t("p",[s._v("Windows的压缩文件的扩展名  .zip/.rar")]),s._v(" "),t("p",[s._v("linux中的打包文件：aa.tar")]),s._v(" "),t("p",[s._v("linux中的压缩文件：bb.gz")]),s._v(" "),t("p",[s._v("linux中打包并压缩的文件：.tar.gz")]),s._v(" "),t("p",[s._v("Linux中的打包文件一般是以.tar结尾的，压缩的命令一般是以.gz结尾的。")]),s._v(" "),t("p",[s._v("而一般情况下打包和压缩是一起进行的，打包并压缩后的文件的后缀名一般.tar.gz。")]),s._v(" "),t("p",[s._v("命令：tar -zcvf 打包压缩后的文件名 要打包的文件")]),s._v(" "),t("p",[s._v("其中：z：调用gzip压缩命令进行压缩\nc：打包文件\nv：显示运行过程\nf：指定文件名")]),s._v(" "),t("p",[s._v("示例：打包并压缩/usr/tmp 下的所有文件 压缩后的压缩包指定名称为xxx.tar")]),s._v(" "),t("p",[s._v("tar -zcvf ab.tar aa.txt bb.txt")]),s._v(" "),t("p",[s._v("或：tar -zcvf ab.tar  *")]),s._v(" "),t("h3",{attrs:{id:"_4-2-解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-解压"}},[s._v("#")]),s._v(" 4.2 解压")]),s._v(" "),t("p",[s._v("命令：tar [-zxvf] 压缩文件")]),s._v(" "),t("p",[s._v("其中：x：代表解压")]),s._v(" "),t("p",[s._v("示例：将/usr/tmp 下的ab.tar解压到当前目录下")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108101105208.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("示例：将/usr/tmp 下的ab.tar解压到根目录/usr下")]),s._v(" "),t("p",[s._v("tar -xvf ab.tar -C /usr------C代表指定解压的位置")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108101123319.png"),alt:"wxmp"}}),s._v(" "),t("h2",{attrs:{id:"五、查找命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、查找命令"}},[s._v("#")]),s._v(" 五、查找命令")]),s._v(" "),t("h3",{attrs:{id:"_5-1-grep"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-grep"}},[s._v("#")]),s._v(" 5.1 grep")]),s._v(" "),t("p",[s._v("grep命令是一种强大的文本搜索工具")]),s._v(" "),t("p",[s._v("使用实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" sshd  查找指定ssh服务进程 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" sshd "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" 查找指定服务进程，排除gerp身 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" sshd -c 查找指定进程个数 \n")])])]),t("h3",{attrs:{id:"_5-2-find"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-find"}},[s._v("#")]),s._v(" 5.2 find")]),s._v(" "),t("p",[s._v("find命令在目录结构中搜索文件，并对搜索结果执行指定的操作。")]),s._v(" "),t("p",[s._v("find 默认搜索当前目录及其子目录，并且不过滤任何结果（也就是返回所有文件），将它们全都显示在屏幕上。")]),s._v(" "),t("p",[s._v("使用实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v(" -ls  在当前目录查找以.log结尾的文件，并显示详细信息。 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /root/ -perm "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v("   查找/root/目录下权限为600的文件 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type f -name "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.log"')]),s._v("  查找当目录，以.log结尾的普通文件 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -type d "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v("   查找当前所有目录并排序 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" -size +100M  查找当前目录大于100M的文件\n")])])]),t("h3",{attrs:{id:"_5-3-locate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-locate"}},[s._v("#")]),s._v(" 5.3 locate")]),s._v(" "),t("p",[s._v("locate 让使用者可以很快速的搜寻某个路径。默认每天自动更新一次，所以使用locate 命令查不到最新变动过的文件。为了避免这种情况，可以在使用")]),s._v(" "),t("p",[s._v("locate之前，先使用updatedb命令，手动更新数据库。如果数据库中没有查询的数据，则会报出locate: can not stat () `/var/lib/mlocate/mlocate.db': No such file or directory该错误！updatedb即可！")]),s._v(" "),t("p",[t("strong",[s._v("yum -y install mlocate 如果是精简版CentOS系统需要安装locate命令")])]),s._v(" "),t("p",[s._v("使用实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("updatedb\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("locate")]),s._v(" /etc/sh 搜索etc目录下所有以sh开头的文件 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("locate")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v(" 查找和pwd相关的所有文件\n")])])]),t("h3",{attrs:{id:"_5-4-whereis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-whereis"}},[s._v("#")]),s._v(" 5.4 whereis")]),s._v(" "),t("p",[s._v("whereis命令是定位可执行文件、源代码文件、帮助文件在文件系统中的位置。这些文件的属性应属于原始代码，二进制文件，或是帮助文件。")]),s._v(" "),t("p",[s._v("使用实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("    将和ls文件相关的文件都查找出来\n")])])]),t("h3",{attrs:{id:"_5-5-which"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-which"}},[s._v("#")]),s._v(" 5.5 which")]),s._v(" "),t("p",[s._v("which命令的作用是在PATH变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果。")]),s._v(" "),t("p",[s._v("使用实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("  查找pwd命令所在路径 \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" java  查找path中java的路径 \n")])])]),t("h2",{attrs:{id:"六、su、sudo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、su、sudo"}},[s._v("#")]),s._v(" 六、su、sudo")]),s._v(" "),t("h3",{attrs:{id:"_6-1-su"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-su"}},[s._v("#")]),s._v(" 6.1 su")]),s._v(" "),t("p",[s._v("su用于用户之间的切换。但是切换前的用户依然保持登录状态。如果是root 向普通或虚拟用户切换不需要密码，反之普通用户切换到其它任何用户都需要密码验证。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" test:切换到test用户，但是路径还是/root目录\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 切换到test用户，路径变成了/home/test\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 切换到root用户，但是路径还是原来的路径\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 切换到root用户，并且路径是/root\n")])])]),t("p",[s._v("su不足：如果某个用户需要使用root权限、则必须要把root密码告诉此用户。")]),s._v(" "),t("p",[s._v("退出返回之前的用户：exit")]),s._v(" "),t("h3",{attrs:{id:"_6-2-sudo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-sudo"}},[s._v("#")]),s._v(" 6.2 sudo")]),s._v(" "),t("p",[s._v("sudo是为所有想使用root权限的普通用户设计的。可以让普通用户具有临时使用root权限的权利。只需输入自己账户的密码即可。")]),s._v(" "),t("p",[s._v("进入sudo配置文件命令：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sudoer或者visudo\n案例：\n\n允许hadoop用户以root身份执行各种应用命令，需要输入hadoop用户的密码。\n\nhadoop  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   ALL \n\n \n\n案例：\n\n只允许hadoop用户以root身份执行ls 、cat命令，并且执行时候免输入密码。 \n\n配置文件中： \n\nhadoop  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NOPASSWD:  /bin/ls, /bin/cat \n")])])]),t("h2",{attrs:{id:"七、系统服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、系统服务"}},[s._v("#")]),s._v(" 七、系统服务")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables status  --查看iptables服务的状态\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables start  --开启iptables服务\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables stop  --停止iptables服务\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables restart  --重启iptables服务\n \n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" iptables off  --关闭iptables服务的开机自启动\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" iptables on  --开启iptables服务的开机自启动\n")])])]),t("h2",{attrs:{id:"八、网络管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#八、网络管理"}},[s._v("#")]),s._v(" 八、网络管理")]),s._v(" "),t("h3",{attrs:{id:"_8-1-主机名配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-主机名配置"}},[s._v("#")]),s._v(" 8.1 主机名配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## vi /etc/sysconfig/network")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NETWORKING")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOSTNAME")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("node1\n")])])]),t("h3",{attrs:{id:"_8-2-ip-地址配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-ip-地址配置"}},[s._v("#")]),s._v(" 8.2 IP 地址配置")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## vi /etc/sysconfig/network-scripts/ifcfg-eth0")]),s._v("\n")])])]),t("h3",{attrs:{id:"_8-3-域名映射"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-域名映射"}},[s._v("#")]),s._v(" 8.3 域名映射")]),s._v(" "),t("p",[s._v("/etc/hosts文件用于在通过主机名进行访问时做ip地址解析之用。所以，你想访问一个什么样的主机名，就需要把这个主机名和它对应的ip地址。")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@node1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## vi /etc/hosts")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##### 在最后加上")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".52.201  node1\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".52.202  node2\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".52.203  node3\n")])])]),t("h2",{attrs:{id:"九、定时任务指令crontab-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#九、定时任务指令crontab-配置"}},[s._v("#")]),s._v(" 九、定时任务指令crontab 配置")]),s._v(" "),t("p",[s._v("crontab是Unix和Linux用于设置定时任务的指令。通过crontab命令，可以在固定间隔时间,执行指定的系统指令或shell脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。")]),s._v(" "),t("p",[s._v("crontab安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" crontabs\n")])])]),t("p",[s._v("服务操作说明：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" crond start   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 启动服务 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" crond stop    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 关闭服务 ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" crond restart "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 重启服务")]),s._v("\n")])])]),t("h3",{attrs:{id:"_9-1-命令格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-命令格式"}},[s._v("#")]),s._v(" 9.1 命令格式")]),s._v(" "),t("p",[s._v("crontab [-u user] file")]),s._v(" "),t("p",[s._v("crontab [-u user] [ -e | -l | -r ]")]),s._v(" "),t("p",[t("em",[t("strong",[s._v("参数说明：")])])]),s._v(" "),t("p",[s._v("**-u user：**用来设定某个用户的crontab服务")]),s._v(" "),t("p",[s._v("**file：**file是命令文件的名字,表示将file做为crontab的任务列表文件")]),s._v(" "),t("p",[s._v("并载入crontab。")]),s._v(" "),t("p",[s._v("**-e：**编辑某个用户的crontab文件内容。如果不指定用户，则表示编辑当前")]),s._v(" "),t("p",[s._v("用户的crontab文件。")]),s._v(" "),t("p",[s._v("**-l：**显示某个用户的crontab文件内容。如果不指定用户，则表示显示当前")]),s._v(" "),t("p",[s._v("用户的crontab文件内容。")]),s._v(" "),t("p",[s._v("**-r：**删除定时任务配置，从/var/spool/cron目录中删除某个用户的crontab")]),s._v(" "),t("p",[s._v("文件，如果不指定用户，则默认删除当前用户的crontab文件。")]),s._v(" "),t("p",[s._v("命令示例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-u user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 用指定的文件替代目前的crontabcrontab -l [-u user]  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 列出用户目前的crontabcrontab -e [-u user]  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 编辑用户目前的crontab")]),s._v("\n")])])]),t("h3",{attrs:{id:"_9-2-配置说明、实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-配置说明、实例"}},[s._v("#")]),s._v(" 9.2 配置说明、实例")]),s._v(" "),t("p",[s._v("命令：*  *   *  *  *  command")]),s._v(" "),t("p",[s._v("解释：分  时  日  月  周  命令")]),s._v(" "),t("p",[t("strong",[s._v("第1列表示分钟1～59 每分钟用*或者 */1表示")])]),s._v(" "),t("p",[t("strong",[s._v("第2列表示小时0～23（0表示0点）")])]),s._v(" "),t("p",[t("strong",[s._v("第3列表示日期1～31")])]),s._v(" "),t("p",[t("strong",[s._v("第4列表示月份1～12")])]),s._v(" "),t("p",[t("strong",[s._v("第5列标识号星期0～6（0表示星期天）")])]),s._v(" "),t("p",[t("strong",[s._v("第6列要运行的命令")])]),s._v(" "),t("p",[s._v("配置实例：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("先打开定时任务所在的文件：\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -e\n \n每分钟执行一次date命令 \n*/1 * * * * "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /root/date.txt\n \n每晚的21:30重启apache。 \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" * * * "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n \n每月1、10、22日的4 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v("重启apache。  \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1,10")]),s._v(",22 * * "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n \n每周六、周日的1 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("重启apache。 \n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" * * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6,0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n \n每天18 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 00至23 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 00之间每隔30分钟重启apache。\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0,30")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v("-23    *   *   *   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n晚上11点到早上7点之间，每隔一小时重启apache\n*  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v("-7/1    *   *   *   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n")])])]),t("h2",{attrs:{id:"十、其他命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#十、其他命令"}},[s._v("#")]),s._v(" 十、其他命令")]),s._v(" "),t("h3",{attrs:{id:"_10-1-查看当前目录-pwd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-查看当前目录-pwd"}},[s._v("#")]),s._v(" 10.1 查看当前目录：pwd")]),s._v(" "),t("p",[s._v("命令：pwd   查看当前目录路径")]),s._v(" "),t("h3",{attrs:{id:"_10-2-查看进程-ps-ef"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-查看进程-ps-ef"}},[s._v("#")]),s._v(" 10.2 查看进程：ps -ef")]),s._v(" "),t("p",[s._v("命令：ps -ef   查看所有正在运行的进程")]),s._v(" "),t("h3",{attrs:{id:"_10-3-结束进程-kill"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-结束进程-kill"}},[s._v("#")]),s._v(" 10.3 结束进程：kill")]),s._v(" "),t("p",[s._v("命令：kill pid 或者 kill -9 pid(强制杀死进程)      pid:进程号")]),s._v(" "),t("h3",{attrs:{id:"_10-4-网络通信命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-网络通信命令"}},[s._v("#")]),s._v(" 10.4 网络通信命令：")]),s._v(" "),t("p",[t("strong",[s._v("ifconfig：查看网卡信息")])]),s._v(" "),t("p",[s._v("命令：ifconfig 或 ifconfig | more")]),s._v(" "),t("p",[t("strong",[s._v("ping：查看与某台机器的连接情况")])]),s._v(" "),t("p",[s._v("命令：ping ip")]),s._v(" "),t("p",[t("strong",[s._v("netstat -an：查看当前系统端口")])]),s._v(" "),t("p",[s._v("命令：netstat -an")]),s._v(" "),t("p",[s._v("搜索指定端口\n命令：netstat -an | grep 8080")]),s._v(" "),t("h3",{attrs:{id:"_10-5-配置网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-5-配置网络"}},[s._v("#")]),s._v(" 10.5 配置网络")]),s._v(" "),t("p",[s._v("命令：setup")]),s._v(" "),t("h3",{attrs:{id:"_10-6-重启网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-6-重启网络"}},[s._v("#")]),s._v(" 10.6 重启网络")]),s._v(" "),t("p",[s._v("命令：service network restart")]),s._v(" "),t("h3",{attrs:{id:"_10-7-切换用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-7-切换用户"}},[s._v("#")]),s._v(" 10.7 切换用户")]),s._v(" "),t("p",[s._v("命令：su - 用户名")]),s._v(" "),t("h3",{attrs:{id:"_10-8-关闭防火墙"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-8-关闭防火墙"}},[s._v("#")]),s._v(" 10.8 关闭防火墙")]),s._v(" "),t("p",[s._v("命令：chkconfig iptables off")]),s._v(" "),t("p",[s._v("或者：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" iptables -L"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" iptables -F"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" iptables stop\n")])])]),t("h3",{attrs:{id:"_10-9-修改文件权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-9-修改文件权限"}},[s._v("#")]),s._v(" 10.9 修改文件权限")]),s._v(" "),t("p",[s._v("命令：chmod 777")]),s._v(" "),t("h3",{attrs:{id:"_10-10-清屏"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-10-清屏"}},[s._v("#")]),s._v(" 10.10 清屏")]),s._v(" "),t("p",[s._v("命令：ctrl + l")]),s._v(" "),t("h3",{attrs:{id:"_10-11-vi模式下快捷键"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-11-vi模式下快捷键"}},[s._v("#")]),s._v(" 10.11 vi模式下快捷键")]),s._v(" "),t("p",[s._v("esc后:")]),s._v(" "),t("p",[s._v("保存并退出快捷键：shift+z+z")]),s._v(" "),t("p",[s._v("光标跳到最后一行快捷键：shift+g")]),s._v(" "),t("p",[s._v("删除一行：dd")]),s._v(" "),t("p",[s._v("复制一行内容：y+y")]),s._v(" "),t("p",[s._v("粘贴复制的内容：p")]),s._v(" "),t("h2",{attrs:{id:"十一、linux项目部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#十一、linux项目部署"}},[s._v("#")]),s._v(" 十一、Linux项目部署")]),s._v(" "),t("h3",{attrs:{id:"_11-1-安装jdk1-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-1-安装jdk1-8"}},[s._v("#")]),s._v(" 11.1 安装jdk1.8")]),s._v(" "),t("p",[s._v("先卸载open-jdk")]),s._v(" "),t("p",[s._v("java -version")]),s._v(" "),t("p",[s._v("rpm -qa | grep java")]),s._v(" "),t("p",[s._v("rpm -e --nodeps java-1.7.0-openjdk-1.7.0.45-2.4.3.3.el6.x86_64")]),s._v(" "),t("p",[s._v("rpm -e --nodeps java-1.6.0-openjdk-1.6.0.0-1.66.1.13.0.el6.x86_64")]),s._v(" "),t("p",[s._v("开始安装：")]),s._v(" "),t("p",[s._v("mkdir /usr/local/src/java")]),s._v(" "),t("p",[s._v("rz 上传jdk tar包")]),s._v(" "),t("p",[s._v("tar -zxvf jdk-8u181-linux-x64.tar.gz")]),s._v(" "),t("p",[s._v("yum install glibc.i686")]),s._v(" "),t("p",[s._v("配置环境变量：\nvi /etc/profile")]),s._v(" "),t("p",[s._v("在末尾行添加\n#set java environment\nJAVA_HOME=/usr/local/src/jdk8/jdk1.8.0_181\nCLASSPATH=.:$JAVA_HOME/lib.tools.jar\nPATH=$JAVA_HOME/bin:$PATH\nexport JAVA_HOME CLASSPATH PATH")]),s._v(" "),t("p",[s._v("保存退出\nsource /etc/profile  使更改的配置立即生效\njava -version  查看JDK版本信息，如果显示出1.8证明成功")]),s._v(" "),t("h3",{attrs:{id:"_11-2-安装mysql5-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-安装mysql5-6"}},[s._v("#")]),s._v(" 11.2 安装MySQL5.6")]),s._v(" "),t("h4",{attrs:{id:"_11-2-1-上传mysql5-6的tar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-1-上传mysql5-6的tar包"}},[s._v("#")]),s._v(" 11.2.1 上传MySQL5.6的tar包")]),s._v(" "),t("p",[s._v("创建目录：mkdir /usr/local/src/mysql5.6")]),s._v(" "),t("p",[s._v("上传：MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar 到上面的目录中")]),s._v(" "),t("h4",{attrs:{id:"_11-2-2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-2-安装"}},[s._v("#")]),s._v(" 11.2.2 "),t("em",[t("em",[t("em",[s._v("*")]),s._v("*安装**")]),s._v("*")]),s._v("*")]),s._v(" "),t("p",[t("strong",[s._v("第一步：解压")])]),s._v(" "),t("p",[s._v("命令：tar -xvf MySQL-5.6.34-1.rhel5.x86_64.rpm-bundle.tar")]),s._v(" "),t("p",[t("strong",[s._v("第二步：检测是否已经安装了mysql")])]),s._v(" "),t("p",[s._v("命令：rpm -qa | grep mysql")]),s._v(" "),t("p",[s._v("如果已经安装了，将其卸载，如：")]),s._v(" "),t("p",[s._v("rpm -e --nodeps  mysql-libs-5.1.71-1.el6.x86_64")]),s._v(" "),t("p",[t("strong",[s._v("第三步：安装MySQL的服务端")])]),s._v(" "),t("p",[s._v("命令：rpm -ivh MySQL-server-5.6.34-1.rhel5.x86_64.rpm")]),s._v(" "),t("p",[t("strong",[s._v("第四步：安装MySQL的客户端")])]),s._v(" "),t("p",[s._v("命令：rpm -ivh MySQL-client-5.6.34-1.rhel5.x86_64.rpm")]),s._v(" "),t("p",[t("strong",[s._v("第五步：查看MySQL服务运行状态")])]),s._v(" "),t("p",[s._v("命令：service mysql status")]),s._v(" "),t("p",[t("strong",[s._v("第六步：启动MySQL服务")])]),s._v(" "),t("p",[s._v("命令：service mysql start")]),s._v(" "),t("p",[t("strong",[s._v("第七步：使用root账号登录mysql")])]),s._v(" "),t("p",[t("strong",[s._v("在安装mysql server时有句提示：")])]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108102452301.png"),alt:"wxmp"}}),s._v(" "),t("p",[t("strong",[s._v("注意：这个密码是不安全的，所有需要修改初始密码。")])]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("使用密码登录mysql账号：mysql -uroot -p")])]),s._v(" "),t("li",[t("strong",[s._v("修改root密码：SET PASSWORD = PASSWORD('root');")])])]),s._v(" "),t("h4",{attrs:{id:"_11-2-3-开机自动启动设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-3-开机自动启动设置"}},[s._v("#")]),s._v(" 11.2.3 开机自动启动设置")]),s._v(" "),t("p",[s._v("加入到系统服务：")]),s._v(" "),t("p",[s._v("chkconfig --add mysql")]),s._v(" "),t("p",[s._v("自动启动：")]),s._v(" "),t("p",[s._v("chkconfig mysql on")]),s._v(" "),t("p",[s._v("查询列表：")]),s._v(" "),t("p",[s._v("chkconfig")]),s._v(" "),t("p",[s._v("说明：都没关闭（off）时是没有自动启动。")]),s._v(" "),t("h4",{attrs:{id:"_11-2-4-开启远程访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-2-4-开启远程访问"}},[s._v("#")]),s._v(" 11.2.4 "),t("em",[t("em",[t("em",[s._v("*")]),s._v("*开启远程访问**")]),s._v("*")]),s._v("*")]),s._v(" "),t("p",[s._v("登录：")]),s._v(" "),t("p",[s._v("mysql -uroot –proot")]),s._v(" "),t("p",[s._v("设置远程访问（使用root密码）：")]),s._v(" "),t("p",[s._v("grant all privileges on "),t("em",[s._v(".")]),s._v(" to 'root' @'%' identified by 'root';")]),s._v(" "),t("p",[s._v("flush privileges;")]),s._v(" "),t("p",[s._v("退出mysql，在centos环境下打开3306防火墙")]),s._v(" "),t("p",[s._v("/sbin/iptables -I INPUT -p tcp --dport 3306 -j ACCEPT")]),s._v(" "),t("p",[s._v("/etc/rc.d/init.d/iptables save")]),s._v(" "),t("p",[s._v("/etc/init.d/iptables status")]),s._v(" "),t("h3",{attrs:{id:"_11-3-安装tomcat部署项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-安装tomcat部署项目"}},[s._v("#")]),s._v(" 11.3 安装tomcat部署项目")]),s._v(" "),t("p",[s._v("准备工作：将web项目打成war包，改名为ROOT.war")]),s._v(" "),t("h4",{attrs:{id:"_11-3-1-创建ucenter用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-1-创建ucenter用户"}},[s._v("#")]),s._v(" 11.3.1 创建ucenter用户")]),s._v(" "),t("p",[s._v("一般情况下，发布应用程序都不是使用root用户的，需要创建一个普通用户来发布程序；")]),s._v(" "),t("p",[s._v("创建ucenter用户：")]),s._v(" "),t("p",[s._v("useradd -d /ucenter ucenter")]),s._v(" "),t("p",[s._v("设置密码：")]),s._v(" "),t("p",[s._v("passwd ucenter （密码 ucenter）")]),s._v(" "),t("p",[s._v("切换用户：")]),s._v(" "),t("p",[s._v("su - ucenter")]),s._v(" "),t("h4",{attrs:{id:"_11-3-2-安装tomcat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-2-安装tomcat"}},[s._v("#")]),s._v(" 11.3.2 安装Tomcat")]),s._v(" "),t("p",[s._v("tomcat只要解压就可以使用。")]),s._v(" "),t("p",[s._v("1、创建web目录\nmkdir /ucenter/web")]),s._v(" "),t("p",[s._v("2、上传apache-tomcat-7.0.57.tar.gz")]),s._v(" "),t("p",[s._v("3、解压：tar -xvf apache-tomcat-7.0.57.tar.gz")]),s._v(" "),t("p",[s._v("4、重命名：mv apache-tomcat-7.0.57 itcast-usermanage")]),s._v(" "),t("p",[s._v("5、启动tomcat：\ncd itcast-usermanage/bin/\n./startup.sh 或者 sh startup.sh")]),s._v(" "),t("p",[s._v("6、查看日志：\ntail -f ../logs/catalina.out")]),s._v(" "),t("p",[s._v("7、查看效果 http://192.168.0.160:8080/")]),s._v(" "),t("p",[s._v("发现无法访问：")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108103218984.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("8、防火墙打开 8080 端口\n/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT")]),s._v(" "),t("p",[s._v("/etc/rc.d/init.d/iptables save")]),s._v(" "),t("p",[s._v("9、安装成功")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108103523123.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-3-3-部署用户管理项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-3-3-部署用户管理项目"}},[s._v("#")]),s._v(" 11.3.3 部署用户管理项目")]),s._v(" "),t("p",[s._v("1、上传usermanage.sql和ROOT.war到/ucenter/web")]),s._v(" "),t("p",[s._v("2、执行数据库脚本")]),s._v(" "),t("p",[s._v("cat user_manager.sql | mysql -uroot -p123456")]),s._v(" "),t("p",[s._v("3、部署web程序")]),s._v(" "),t("p",[s._v("3.1 删除webapps下的所有文件")]),s._v(" "),t("p",[s._v("cd /ucenter/web/usermanage/webapps")]),s._v(" "),t("p",[s._v("rm -rf *")]),s._v(" "),t("p",[s._v("3.2 拷贝ROOT.war到webapps")]),s._v(" "),t("p",[s._v("cp /ucenter/web/ROOT.war .")]),s._v(" "),t("p",[s._v("3.3 重新启动tomcat")]),s._v(" "),t("p",[s._v("cd ../bin/")]),s._v(" "),t("p",[s._v("sh startup.sh && tail -f ../logs/catalina.out")]),s._v(" "),t("p",[s._v("3.4 启动浏览器测试")]),s._v(" "),t("p",[t("em",[t("strong",[s._v("注意事项：Centos环境下部署项目中文乱码问题解决方案")])])]),s._v(" "),t("p",[s._v("今天在一台新的CentOS机器上使用c3p0连接池操作mysql数据库出现中文乱码问题，具体表现为：查询时无中文乱码问题，写数据时中文乱码，查看了机器上数据库字符集也是UTF8，应该不会出现中文乱码才对，最后在c3p0配置文件中 jdbcUrl后加上：?useUnicode=true&characterEncoding=UTF8 中文就不会乱码了。")]),s._v(" "),t("p",[s._v("【C3P0配置文件】")]),s._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token prolog"}},[s._v('<?xml version="1.0" encoding="UTF-8"?>')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("c3p0-config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("default-config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("driverClass"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("com.mysql.jdbc.Driver"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("jdbcUrl"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("jdbc:mysql://localhost:3306/user_manager_yun6?useUnicode=true"),t("span",{pre:!0,attrs:{class:"token entity named-entity",title:"&"}},[s._v("&amp;")]),s._v("characterEncoding=UTF8 "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("root"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("root"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("acquireIncrement"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("2"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("initialPoolSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("5"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("minPoolSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("property")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("maxPoolSize"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("5"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("property")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("default-config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("c3p0-config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])])]),t("h3",{attrs:{id:"_11-4-linux下使用fastdfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-linux下使用fastdfs"}},[s._v("#")]),s._v(" 11.4 Linux下使用FastDFS")]),s._v(" "),t("p",[s._v("相关的安装包我打包到云盘上了，链接：https://pan.baidu.com/s/13NDYYil4mgLhkb5CYsc2Ww 提取码：66tn")]),s._v(" "),t("p",[t("strong",[s._v("单节点FastDFS")])]),s._v(" "),t("p",[s._v("整个安装过程非常复杂，很容易出错，建议进行多次备份。")]),s._v(" "),t("p",[s._v("我们这里不打算安装多台虚拟机，因此会把tracker和storage都安装在一起。")]),s._v(" "),t("h4",{attrs:{id:"_11-4-1-安装gcc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-1-安装gcc"}},[s._v("#")]),s._v(" 11.4.1 安装gcc")]),s._v(" "),t("p",[s._v("GCC用来对C语言代码进行编译运行，使用yum命令安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n")])])]),t("p",[s._v("后面会用到解压命令（unzip），所以这里可以用yum把unzip 也装一下")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-4-2-安装libevent"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-2-安装libevent"}},[s._v("#")]),s._v(" 11.4.2 安装libevent")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libevent\n")])])]),t("h4",{attrs:{id:"_11-4-3-安装libfastcommon-master"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-3-安装libfastcommon-master"}},[s._v("#")]),s._v(" 11.4.3 安装libfastcommon-master")]),s._v(" "),t("p",[s._v("解压刚刚上传的libfastcommon-master.zip")]),s._v(" "),t("p",[s._v("unzip libfastcommon-master.zip")]),s._v(" "),t("p",[s._v("进入解压完成的目录")]),s._v(" "),t("p",[s._v("cd libfastcommon-master")]),s._v(" "),t("p",[s._v("编译并且安装：")]),s._v(" "),t("p",[s._v("./make.sh")]),s._v(" "),t("p",[s._v("./make.sh install")]),s._v(" "),t("h4",{attrs:{id:"_11-4-4-安装fastdfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-4-安装fastdfs"}},[s._v("#")]),s._v(" 11.4.4 安装fastdfs")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf FastDFS_v5.08.tar.gz\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" FastDFS\n\n./make.sh\n\n./make.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("p",[s._v("如果安装成功，会看到/etc/init.d/下看到提供的脚本文件：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ll /etc/init.d/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" fdfs\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108105749555.png"),alt:"wxmp"}}),s._v(" "),t("ul",[t("li",[t("code",[s._v("fdfs_trackerd")]),s._v(" 是tracker启动脚本")]),s._v(" "),t("li",[t("code",[s._v("fdfs_storaged")]),s._v(" 是storage启动脚本")])]),s._v(" "),t("p",[s._v("能够在 /etc/fdfs/ 目录下看到默认的配置文件模板：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("ll /etc/fdfs/\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/2018110810581811.png"),alt:"wxmp"}}),s._v(" "),t("ul",[t("li",[t("code",[s._v("tarcker.conf.sample")]),s._v(" 是tracker的配置文件模板")]),s._v(" "),t("li",[t("code",[s._v("storage.conf.sample")]),s._v(" 是storage的配置文件模板")]),s._v(" "),t("li",[t("code",[s._v("client.conf.sample")]),s._v(" 是客户端的配置文件模板")])]),s._v(" "),t("h4",{attrs:{id:"_11-4-5-配置并启动tracker服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-5-配置并启动tracker服务"}},[s._v("#")]),s._v(" 11.4.5 配置并启动tracker服务")]),s._v(" "),t("p",[s._v("1）首先将模板文件复制")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf\n")])])]),t("p",[s._v("2）修改复制后的配置文件：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/fdfs/tracker.conf \n")])])]),t("p",[s._v("## 修改的内容如下：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("base_path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/项目名/tracker                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 存储日志和数据的根目录")]),s._v("\n")])])]),t("p",[s._v("3）新建目录：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /项目名/tracker\n")])])]),t("p",[s._v("注意：关闭防火墙：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" iptables off\n")])])]),t("p",[s._v("4）启动和停止")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" fdfs_trackerd start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 启动fdfs_trackerd服务，停止用stop")]),s._v("\n")])])]),t("p",[s._v("检查FastDFS Tracker Server是否启动成功：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" fdfs_trackerd\n")])])]),t("p",[s._v("设置tracker服务开机启动:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" fdfs_trackerd on\n")])])]),t("h4",{attrs:{id:"_11-4-6-配置并启动storage服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-4-6-配置并启动storage服务"}},[s._v("#")]),s._v(" 11.4.6 "),t("strong",[s._v("配置并启动storage服务")])]),s._v(" "),t("p",[s._v("1）首先将模板文件复制")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf\n")])])]),t("p",[s._v("2）修改复制后的配置文件：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/fdfs/storage.conf\n")])])]),t("p",[s._v("## 修改的内容如下:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("base_path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/项目名/storage                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 数据和日志文件存储根目录 ")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("store_path0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/项目名/storage           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 第一个存储目录 ")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tracker_server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.101:22122       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##  tracker服务器IP和端口")]),s._v("\n")])])]),t("p",[s._v("3）新建目录：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /项目名/storage\n")])])]),t("p",[t("strong",[s._v("注意关闭防火墙： "),t("code",[s._v("chkconfig iptables off")])])]),s._v(" "),t("p",[s._v("4）启动和停止")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" fdfs_storaged start  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 启动fdfs_storaged服务，停止用stop")]),s._v("\n")])])]),t("p",[s._v("设置storage服务开机启动：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" fdfs_storaged on\n")])])]),t("p",[s._v("ps -ef | grep fdfs")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108110740433.png"),alt:"wxmp"}}),s._v(" "),t("h3",{attrs:{id:"_11-5-安装fastdfs-nginx-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-安装fastdfs-nginx-module"}},[s._v("#")]),s._v(" 11.5 安装fastdfs-nginx-module")]),s._v(" "),t("h4",{attrs:{id:"_11-5-1-解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-1-解压"}},[s._v("#")]),s._v(" 11.5.1 解压")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("tar -zxvf fastdfs-nginx-module_v1.16.tar.gz\n")])])]),t("h4",{attrs:{id:"_11-5-2-修改config"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-2-修改config"}},[s._v("#")]),s._v(" 11.5.2 修改config")]),s._v(" "),t("p",[s._v("1）进入src目录")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" fastdfs-nginx-module/src/\n")])])]),t("p",[s._v("2）编辑config")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" config\n")])])]),t("p",[s._v("使用以下底行命令：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(":%s+/usr/local/+/usr/+g\n")])])]),t("p",[s._v("将所有的/usr/local替换为 /usr，这个才是正确的目录:")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108110958613.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-5-3-配置nginx与fastdfs关联配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-5-3-配置nginx与fastdfs关联配置文件"}},[s._v("#")]),s._v(" 11.5.3 配置nginx与FastDFS关联配置文件")]),s._v(" "),t("p",[s._v("复制 fastdfs-nginx-module 源码中的配置文件到/etc/fdfs 目录， 并修改")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/local/项目名/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/fdfs/mod_fastdfs.conf\n")])])]),t("p",[s._v("修改以下配置：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("connect_timeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("                       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 客户端访问文件连接超时时长（单位：秒）")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("tracker_server")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".56.101:22122    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## tracker服务IP和端口")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("url_have_group_name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 访问链接前缀加上组名")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("store_path0")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/leyou/storage            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 文件存储路径")]),s._v("\n\n")])])]),t("p",[s._v("复制 FastDFS 的部分配置文件到/etc/fdfs 目录")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/项目名/FastDFS/conf/cp http.conf mime.types /etc/fdfs/\n")])])]),t("h3",{attrs:{id:"_11-6-安装nginx的插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-安装nginx的插件"}},[s._v("#")]),s._v(" 11.6 安装Nginx的插件")]),s._v(" "),t("h4",{attrs:{id:"_11-6-1-如果没有安装过nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-1-如果没有安装过nginx"}},[s._v("#")]),s._v(" 11.6.1 如果没有安装过nginx")]),s._v(" "),t("p",[s._v("1、安装nginx的依赖库")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel\n")])])]),t("p",[s._v("2、解压安装包")]),s._v(" "),t("p",[s._v("tar -zxvf nginx-1.10.0.tar.gz")]),s._v(" "),t("p",[s._v("3、配置nginx安装包，并指定fastdfs-nginx-model")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" nginx-1.10.0 \n./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/nginx --sbin-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/nginx --add-module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/leyou/fastdfs-nginx-module/src\n")])])]),t("p",[t("strong",[s._v("注意")]),s._v("：在执行./configure配置nginx参数的时候，需要将fastdfs-nginx-moudle源码作为模块编译进去。")]),s._v(" "),t("p",[s._v("4、编译并安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-6-2-如果已经安装过nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-2-如果已经安装过nginx"}},[s._v("#")]),s._v(" 11.6.2 "),t("strong",[s._v("如果已经安装过nginx")])]),s._v(" "),t("p",[s._v("1、 进入nginx目录：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/项目名/nginx-1.10.0/\n")])])]),t("p",[s._v("2、 配置FastDFS 模块")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./configure --prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/nginx --sbin-path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/nginx --add-module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/项目名/fastdfs-nginx-module/src\n")])])]),t("p",[s._v("注意：这次配置时，要添加fastdfs-nginx-moudle模块")]),s._v(" "),t("p",[s._v("3、编译，注意，这次不要安装（install）")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])]),t("p",[s._v("4、替换nginx二进制文件:")]),s._v(" "),t("p",[s._v("备份：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /usr/bin/nginx /usr/bin/nginx-bak\n")])])]),t("p",[s._v("用新编译的nginx启动文件替代原来的：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" objs/nginx /usr/bin/\n")])])]),t("h4",{attrs:{id:"_11-6-3-启动nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-3-启动nginx"}},[s._v("#")]),s._v(" 11.6.3 启动nginx")]),s._v(" "),t("p",[s._v("配置nginx整合fastdfs-module模块")]),s._v(" "),t("p",[s._v("我们需要修改nginx配置文件，在/opt/nginx/config/nginx.conf文件中：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("  /opt/nginx/conf/nginx.conf\n")])])]),t("p",[s._v("将文件中，原来的"),t("code",[s._v("server 80{ ...}")]),s._v(" 部分代码替换为如下代码：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  image.项目名.com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 监听域名中带有group的，交给FastDFS模块处理")]),s._v("\n    location ~/group"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        ngx_fastdfs_module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    location / "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index  index.html index.htm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    error_page   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  /50x.html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /50x.html "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   html"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("p",[s._v("启动nginx：")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("nginx\t## 启动nginx nginx -s stop\t## 停止nginx nginx -s reload\t## 重新载入配置文件\n")])])]),t("p",[s._v("## 可通过ps -ef | grep nginx查看nginx是否已启动成功")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108111638573.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-6-4-设置nginx开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-6-4-设置nginx开机启动"}},[s._v("#")]),s._v(" 11.6.4 设置nginx开机启动")]),s._v(" "),t("p",[s._v("创建一个开机启动的脚本：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/nginx\n")])])]),t("p",[s._v("添加以下内容：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## nginx - this script starts and stops the nginx daemon")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## chkconfig:   - 85 15")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## description:  NGINX is an HTTP(S) server, HTTP(S) reverse \\")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##               proxy and IMAP/POP3 proxy server")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## processname: nginx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## config:      /etc/nginx/nginx.conf")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## config:      /etc/sysconfig/nginx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## pidfile:     /var/run/nginx.pid")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Source function library.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/rc.d/init.d/functions\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Source networking configuration.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/sysconfig/network\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Check that networking is up.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NETWORKING")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"no"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nginx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/nginx"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("prog")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $nginx"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NGINX_CONF_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/nginx/conf/nginx.conf"')]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f /etc/sysconfig/nginx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /etc/sysconfig/nginx\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lockfile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lock/subsys/nginx\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("make_dirs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## make required directories")]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$nginx -V "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"configure arguments:.*--user="')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/[^*]*--user=\\([^ ]*\\).*/"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\1"}},[s._v("\\1")]),s._v("/g'")]),s._v(" -"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -n "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -z "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" $user /etc/passwd"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n         "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -M -s /bin/nologin "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("options")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("$nginx -V "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'configure arguments:'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("opt")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$options")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $opt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.*-temp-path'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n              "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("value")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $opt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cut")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"="')]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\n              "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('## echo "creating" $value')]),s._v("\n\n                  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$value")]),s._v("\n\n              "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n       "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("start")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -x "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nginx")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NGINX_CONF_FILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n\n    make_dirs\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prog")]),s._v(': "')]),s._v("\n\n    daemon "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nginx")]),s._v(" -c "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NGINX_CONF_FILE")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("retval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$retval")]),s._v(" -eq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$lockfile")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$retval")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("stop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prog")]),s._v(': "')]),s._v("\n\n    killproc "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prog")]),s._v(" -QUIT\n\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("retval")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$retval")]),s._v(" -eq "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$lockfile")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$retval")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    configtest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n    stop\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n    start\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("reload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    configtest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" -n $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Reloading '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prog")]),s._v(': "')]),s._v("\n\n    killproc "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nginx")]),s._v(" -HUP\n\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RETVAL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("force_reload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    restart\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("configtest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nginx")]),s._v(" -t -c "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NGINX_CONF_FILE")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("rh_status")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    status "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$prog")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("rh_status_q")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    rh_status "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/dev/null "),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n\n    start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        rh_status_q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        rh_status_q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("configtest"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    reload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        rh_status_q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    force-reload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        force_reload\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    status"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        rh_status\n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    condrestart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("try-restart"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        rh_status_q "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: '),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$0")]),s._v(' {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}"')]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),t("p",[s._v("修改文件权限，并加入服务列表")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 修改权限chmod 777 /etc/init.d/nginx ## 添加到服务列表chkconfig --add /etc/init.d/nginx ")]),s._v("\n")])])]),t("p",[s._v("设置开机启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" nginx on\n")])])]),t("h3",{attrs:{id:"_11-7-安装elasticsearch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-安装elasticsearch"}},[s._v("#")]),s._v(" 11.7 安装Elasticsearch")]),s._v(" "),t("p",[s._v("需要虚拟机JDK1.8及以上")]),s._v(" "),t("h4",{attrs:{id:"_11-7-1-新建一个用户leyou"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-1-新建一个用户leyou"}},[s._v("#")]),s._v(" 11.7.1 新建一个用户leyou")]),s._v(" "),t("p",[s._v("出于安全考虑，elasticsearch默认不允许以root账号运行。")]),s._v(" "),t("p",[s._v("创建用户：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" leyou\n")])])]),t("p",[s._v("设置密码：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" leyou\n")])])]),t("p",[s._v("切换用户：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - leyou\n")])])]),t("h4",{attrs:{id:"_11-7-2-上传安装包-并解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-2-上传安装包-并解压"}},[s._v("#")]),s._v(" 11.7.2 上传安装包,并解压")]),s._v(" "),t("p",[s._v("我们将安装包上传到：/home/leyou目录")]),s._v(" "),t("p",[s._v("解压缩：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf elasticsearch-6.2.4.tar.gz\n")])])]),t("p",[s._v("我们把目录重命名：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" elasticsearch-6.3.0/ elasticsearch\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112304883.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("进入，查看目录结构：")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112318744.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-7-3-修改配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-3-修改配置"}},[s._v("#")]),s._v(" 11.7.3 修改配置")]),s._v(" "),t("p",[s._v("我们进入config目录：cd config")]),s._v(" "),t("p",[s._v("需要修改的配置文件有两个：")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112439949.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("1、"),t("strong",[s._v("jvm.options")])]),s._v(" "),t("p",[s._v("Elasticsearch基于Lucene的，而Lucene底层是java实现，因此我们需要配置jvm参数。")]),s._v(" "),t("p",[s._v("编辑jvm.options：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" jvm.options\n")])])]),t("p",[s._v("默认配置如下：")]),s._v(" "),t("p",[s._v("-Xms1g\n-Xmx1g")]),s._v(" "),t("p",[s._v("内存占用太多了，我们调小一些：")]),s._v(" "),t("p",[s._v("-Xms512m\n-Xmx512m")]),s._v(" "),t("p",[s._v("2、"),t("strong",[s._v("elasticsearch.yml")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" elasticsearch.yml\n")])])]),t("p",[s._v("修改数据和日志目录：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("path.data: /home/leyou/elasticsearch/data "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 数据目录位置path.logs: /home/leyou/elasticsearch/logs ## 日志目录位置")]),s._v("\n")])])]),t("p",[s._v("我们把data和logs目录修改指向了elasticsearch的安装目录。但是这两个目录并不存在，因此我们需要创建出来。")]),s._v(" "),t("p",[s._v("进入elasticsearch的根目录，然后创建：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" datamkdir logs\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112635753.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("修改绑定的ip：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("network.host: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 绑定到0.0.0.0，允许任何ip来访问")]),s._v("\n")])])]),t("p",[s._v("默认只允许本机访问，修改为0.0.0.0后则可以远程访问")]),s._v(" "),t("h4",{attrs:{id:"_11-7-4-运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-4-运行"}},[s._v("#")]),s._v(" 11.7.4 运行")]),s._v(" "),t("p",[s._v("进入elasticsearch/bin目录，可以看到下面的执行文件：")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112727539.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("然后输入命令：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./elasticsearch\n")])])]),t("p",[s._v("或者后台运行：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./elasticsearch -d\n")])])]),t("h4",{attrs:{id:"_11-7-5-错误1-内核过低"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-5-错误1-内核过低"}},[s._v("#")]),s._v(" 11.7.5 错误1：内核过低")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112845749.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("修改elasticsearch.yml文件，在最下面添加如下配置： 然后重启")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("bootstrap.system_call_filter: "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-7-6-错误2-文件权限不足"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-6-错误2-文件权限不足"}},[s._v("#")]),s._v(" 11.7.6 错误2：文件权限不足")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108112927213.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("我们用的是leyou用户，而不是root，所以文件权限不足。")]),s._v(" "),t("p",[t("strong",[s._v("首先用root用户登录。直接输入exit命令")])]),s._v(" "),t("p",[s._v("然后修改配置文件:")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.conf\n")])])]),t("p",[s._v("添加下面的内容：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("* soft nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v(" * hard nofile "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("131072")]),s._v(" * soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" * hard nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-7-7-错误3-线程数不够"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-7-错误3-线程数不够"}},[s._v("#")]),s._v(" 11.7.7 错误3：线程数不够")]),s._v(" "),t("p",[s._v("[1]: max number of threads [1024] for user [leyou] is too low, increase to at least [4096]")]),s._v(" "),t("p",[s._v("继续修改配置：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/security/limits.d/90-nproc.conf \n")])])]),t("p",[s._v("修改下面的内容：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("* soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n")])])]),t("p",[s._v("改为")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("* soft nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-7-8-错误4-进程虚拟内存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-8-错误4-进程虚拟内存"}},[s._v("#")]),s._v(" 11.7.8 错误4：进程虚拟内存")]),s._v(" "),t("p",[s._v("[3]: max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]")]),s._v(" "),t("p",[s._v("vm.max_map_count：限制一个进程可以拥有的VMA(虚拟内存区域)的数量，继续修改配置文件， ：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysctl.conf \n")])])]),t("p",[s._v("添加下面内容：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("vm.max_map_count"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("655360")]),s._v("\n")])])]),t("p",[s._v("然后执行命令：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("sysctl -p\n")])])]),t("h4",{attrs:{id:"_11-7-9-重启终端窗口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-7-9-重启终端窗口"}},[s._v("#")]),s._v(" 11.7.9 重启终端窗口")]),s._v(" "),t("p",[s._v("所有错误修改完毕，一定要重启你的 Xshell终端，否则配置无效。")]),s._v(" "),t("h3",{attrs:{id:"_11-8-安装rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-安装rabbitmq"}},[s._v("#")]),s._v(" 11.8 安装RabbitMQ")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/myapp\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" rabbitmq\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" rabbitmq\n")])])]),t("h4",{attrs:{id:"_11-8-1-安装erlang"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-1-安装erlang"}},[s._v("#")]),s._v(" 11.8.1 安装Erlang")]),s._v(" "),t("p",[s._v("1、在线安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" esl-erlang_17.3-1~centos~6_amd64.rpm\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" esl-erlang-compat-R14B-1.el6.noarch.rpm\n")])])]),t("p",[s._v("2、离线安装")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108113926728.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("依次执行命令：")]),s._v(" "),t("p",[s._v("1）rpm -ivh esl-erlang-17.3-1.x86_64.rpm --force --nodeps")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108113955569.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("2）rpm -ivh esl-erlang_17.3-1~centos~6_amd64.rpm --force --nodeps")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108114048547.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("3）rpm -ivh esl-erlang-compat-R14B-1.el6.noarch.rpm --force --nodeps")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108114104822.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-8-2-安装rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-2-安装rabbitmq"}},[s._v("#")]),s._v(" 11.8.2 安装RabbitMQ")]),s._v(" "),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108114133826.png"),alt:"wxmp"}}),s._v(" "),t("p",[s._v("安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -ivh rabbitmq-server-3.4.1-1.noarch.rpm\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/20181108114155527.png"),alt:"wxmp"}}),s._v(" "),t("h4",{attrs:{id:"_11-8-3-设置配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-3-设置配置文件"}},[s._v("#")]),s._v(" 11.8.3 设置配置文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/share/doc/rabbitmq-server-3.4.1/rabbitmq.config.example\n\n/etc/rabbitmq/rabbitmq.config\n")])])]),t("p",[s._v("开启用户远程访问")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/rabbitmq/rabbitmq.config\n")])])]),t("img",{staticClass:"zoom-custom-imgs",attrs:{src:s.$withBase("/assets/img/operation/linux/cmdsum/2018110811430787.png"),alt:"wxmp"}}),s._v(" "),t("p",[t("strong",[s._v("注意要去掉后面的逗号。")])]),s._v(" "),t("h4",{attrs:{id:"_11-8-4-启动、停止"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-4-启动、停止"}},[s._v("#")]),s._v(" 11.8.4 启动、停止")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" rabbitmq-server start "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" rabbitmq-server stop "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" rabbitmq-server restart\n")])])]),t("h4",{attrs:{id:"_11-8-5-开启web界面管理工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-5-开启web界面管理工具"}},[s._v("#")]),s._v(" 11.8.5 开启web界面管理工具")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("rabbitmq-plugins "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rabbitmq_management "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" rabbitmq-server restart\n")])])]),t("h4",{attrs:{id:"_11-8-6-设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-6-设置开机启动"}},[s._v("#")]),s._v(" 11.8.6 设置开机启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" rabbitmq-server on\n")])])]),t("h4",{attrs:{id:"_11-8-7-防火墙开放15672端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-8-7-防火墙开放15672端口"}},[s._v("#")]),s._v(" 11.8.7 防火墙开放15672端口")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/sbin/iptables -I INPUT -p tcp --dport "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15672")]),s._v(" -j ACCEPT /etc/rc.d/init.d/iptables save\n")])])]),t("h3",{attrs:{id:"_11-9-redis安装和配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-redis安装和配置"}},[s._v("#")]),s._v(" 11.9 redis安装和配置")]),s._v(" "),t("h4",{attrs:{id:"_11-9-1-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-1-安装"}},[s._v("#")]),s._v(" 11.9.1 安装")]),s._v(" "),t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xvf redis-4.0.9.tar.gz\n")])])]),t("p",[s._v("编译安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" redis-4.0.9 redis "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-9-2-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-2-配置"}},[s._v("#")]),s._v(" 11.9.2 配置")]),s._v(" "),t("p",[s._v("修改安装目录下的redis.conf文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" redis.conf\n")])])]),t("p",[s._v("修改以下配置：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#bind 127.0.0.1 ## 将这行代码注释，监听所有的ip地址，外网可以访问")]),s._v("\n\nprotected-mode no "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 把yes改成no，允许外网访问")]),s._v("\n\ndaemonize "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 把no改成yes，后台运行")]),s._v("\n")])])]),t("h4",{attrs:{id:"_11-9-3-启动或停止"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-3-启动或停止"}},[s._v("#")]),s._v(" 11.9.3 启动或停止")]),s._v(" "),t("p",[s._v("redis提供了服务端命令和客户端命令：")]),s._v(" "),t("ul",[t("li",[s._v("redis-server 服务端命令，可以包含以下参数： start 启动 stop 停止")]),s._v(" "),t("li",[s._v("redis-cli 客户端控制台，包含参数： -h xxx 指定服务端地址，缺省值是127.0.0.1 -p xxx 指定服务端端口，缺省值是6379")])]),s._v(" "),t("h4",{attrs:{id:"_11-9-4-设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-9-4-设置开机启动"}},[s._v("#")]),s._v(" 11.9.4 设置开机启动")]),s._v(" "),t("p",[s._v("\\1) 输入命令，新建文件")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/init.d/redis\n")])])]),t("p",[s._v("输入下面内容：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## chkconfig:   2345 90 10")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## description:  Redis is a persistent key-value database")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin:/sbin:/usr/bin:/bin\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDISPORT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("EXEC")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/redis-server\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDIS_CLI")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin/redis-cli\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PIDFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/redis.pid\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONF")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/leyou/redis/redis.conf"')]),s._v("\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("  \n\n    start"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(' exists, process is already running or crashed"')]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting Redis server..."')]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$EXEC")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CONF")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$?")]),s._v('"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("   \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("  \n\n              "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Redis is running..."')]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n\n    stop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PIDFILE")]),s._v(' does not exist, process is not running"')]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PID")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" $PIDFILE"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Stopping ..."')]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDIS_CLI")]),s._v(" -p "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$REDISPORT")]),s._v(" SHUTDOWN  \n\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -x "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${PIDFILE}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  \n\n               "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("  \n\n                    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Waiting for Redis to shutdown ..."')]),s._v("  \n\n                    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sleep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("  \n\n                "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Redis stopped"')]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n\n   restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("force-reload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0}")]),s._v(" stop  \n\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0}")]),s._v(" start  \n\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n\n  *"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Usage: /etc/init.d/redis {start|stop|restart|force-reload}"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&2")]),s._v("  \n\n        "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  \n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])])]),t("p",[s._v("然后保存退出")]),s._v(" "),t("p",[s._v("注意：以下信息需要根据安装目录进行调整：")]),s._v(" "),t("blockquote",[t("p",[s._v("EXEC=/usr/local/bin/redis-server ## 执行脚本的地址")]),s._v(" "),t("p",[s._v("REDIS_CLI=/usr/local/bin/redis-cli ## 客户端执行脚本的地址")]),s._v(" "),t("p",[s._v("PIDFILE=/var/run/redis.pid ## 进程id文件地址")]),s._v(" "),t("p",[s._v('CONF="/usr/local/src/redis-3.0.2/redis.conf" #配置文件地址')])]),s._v(" "),t("p",[s._v("2）设置权限")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /etc/init.d/redis\n")])])]),t("p",[s._v("3）启动测试")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/etc/init.d/redis start\n")])])]),t("p",[s._v("启动成功会提示如下信息：")]),s._v(" "),t("p",[s._v("Starting Redis server...\nRedis is running...")]),s._v(" "),t("p",[s._v("4）设置开机自启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add /etc/init.d/redis\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" redis on\n")])])]),t("h3",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),t("ul",[t("li",[s._v("https://blog.csdn.net/qq_23329167/article/details/83856430")])])])}),[],!1,null,null,null);a.default=e.exports}}]);