<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hive-HiveSQL总结 | 智能后端和架构</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="智能后端和架构的文档">
    <meta name="icon" content="">
    <meta name="author" content="landry -- seo 选项">
    <meta name="keywords" content="后端 java 架构 面试 -- seo 选项">
    
    <link rel="preload" href="/assets/css/0.styles.183d1d00.css" as="style"><link rel="preload" href="/assets/js/app.db30138a.js" as="script"><link rel="preload" href="/assets/js/5.df8bf371.js" as="script"><link rel="preload" href="/assets/js/1.60d99fe1.js" as="script"><link rel="preload" href="/assets/js/483.e2271a83.js" as="script"><link rel="prefetch" href="/assets/js/10.034bcceb.js"><link rel="prefetch" href="/assets/js/100.bc78c9c9.js"><link rel="prefetch" href="/assets/js/101.fc021eba.js"><link rel="prefetch" href="/assets/js/102.44f58839.js"><link rel="prefetch" href="/assets/js/103.cd3ce876.js"><link rel="prefetch" href="/assets/js/104.ece12d4f.js"><link rel="prefetch" href="/assets/js/105.e0ef0178.js"><link rel="prefetch" href="/assets/js/106.f8113fb8.js"><link rel="prefetch" href="/assets/js/107.7af90320.js"><link rel="prefetch" href="/assets/js/108.a76af7ab.js"><link rel="prefetch" href="/assets/js/109.ae7dfcbe.js"><link rel="prefetch" href="/assets/js/11.22d5654f.js"><link rel="prefetch" href="/assets/js/110.829dbd72.js"><link rel="prefetch" href="/assets/js/111.2612d028.js"><link rel="prefetch" href="/assets/js/112.381ba79f.js"><link rel="prefetch" href="/assets/js/113.52309728.js"><link rel="prefetch" href="/assets/js/114.afd46270.js"><link rel="prefetch" href="/assets/js/115.cfff1785.js"><link rel="prefetch" href="/assets/js/116.b9e85eed.js"><link rel="prefetch" href="/assets/js/117.c88c3ceb.js"><link rel="prefetch" href="/assets/js/118.0cfd8d46.js"><link rel="prefetch" href="/assets/js/119.972e6fcd.js"><link rel="prefetch" href="/assets/js/12.a1fbf449.js"><link rel="prefetch" href="/assets/js/120.c4d0fa30.js"><link rel="prefetch" href="/assets/js/121.a05fb7c8.js"><link rel="prefetch" href="/assets/js/122.84bc99e8.js"><link rel="prefetch" href="/assets/js/123.6e40db8b.js"><link rel="prefetch" href="/assets/js/124.679f60f0.js"><link rel="prefetch" href="/assets/js/125.7b983b12.js"><link rel="prefetch" href="/assets/js/126.c6529e34.js"><link rel="prefetch" href="/assets/js/127.62896466.js"><link rel="prefetch" href="/assets/js/128.11cadf09.js"><link rel="prefetch" href="/assets/js/129.a2c6007b.js"><link rel="prefetch" href="/assets/js/13.773a30c0.js"><link rel="prefetch" href="/assets/js/130.cd51d586.js"><link rel="prefetch" href="/assets/js/131.5d81a3a4.js"><link rel="prefetch" href="/assets/js/132.c062c43a.js"><link rel="prefetch" href="/assets/js/133.94b50107.js"><link rel="prefetch" href="/assets/js/134.e787c6f2.js"><link rel="prefetch" href="/assets/js/135.514b39b8.js"><link rel="prefetch" href="/assets/js/136.2209902a.js"><link rel="prefetch" href="/assets/js/137.8ee62050.js"><link rel="prefetch" href="/assets/js/138.30076406.js"><link rel="prefetch" href="/assets/js/139.153f79f0.js"><link rel="prefetch" href="/assets/js/14.a010702c.js"><link rel="prefetch" href="/assets/js/140.c22ae524.js"><link rel="prefetch" href="/assets/js/141.03388ce3.js"><link rel="prefetch" href="/assets/js/142.be052d72.js"><link rel="prefetch" href="/assets/js/143.86f4f723.js"><link rel="prefetch" href="/assets/js/144.58a81178.js"><link rel="prefetch" href="/assets/js/145.b6065cbb.js"><link rel="prefetch" href="/assets/js/146.a7d48393.js"><link rel="prefetch" href="/assets/js/147.1f5a2c27.js"><link rel="prefetch" href="/assets/js/148.e545c932.js"><link rel="prefetch" href="/assets/js/149.b7f633ea.js"><link rel="prefetch" href="/assets/js/15.6612b8a7.js"><link rel="prefetch" href="/assets/js/150.0c633255.js"><link rel="prefetch" href="/assets/js/151.7518fca9.js"><link rel="prefetch" href="/assets/js/152.85ebf0bb.js"><link rel="prefetch" href="/assets/js/153.6696affd.js"><link rel="prefetch" href="/assets/js/154.a488a746.js"><link rel="prefetch" href="/assets/js/155.b1285b65.js"><link rel="prefetch" href="/assets/js/156.c7d65add.js"><link rel="prefetch" href="/assets/js/157.95b667f4.js"><link rel="prefetch" href="/assets/js/158.36dcae64.js"><link rel="prefetch" href="/assets/js/159.5ab4607b.js"><link rel="prefetch" href="/assets/js/16.9728f201.js"><link rel="prefetch" href="/assets/js/160.f31c31c5.js"><link rel="prefetch" href="/assets/js/161.7faa6f5b.js"><link rel="prefetch" href="/assets/js/162.8bed1a3e.js"><link rel="prefetch" href="/assets/js/163.bccb4b94.js"><link rel="prefetch" href="/assets/js/164.d019f9f6.js"><link rel="prefetch" href="/assets/js/165.4ea2fcec.js"><link rel="prefetch" href="/assets/js/166.937ae33a.js"><link rel="prefetch" href="/assets/js/167.63bf2a10.js"><link rel="prefetch" href="/assets/js/168.8501b450.js"><link rel="prefetch" href="/assets/js/169.52064ac2.js"><link rel="prefetch" href="/assets/js/17.01684033.js"><link rel="prefetch" href="/assets/js/170.bc536396.js"><link rel="prefetch" href="/assets/js/171.5c44671a.js"><link rel="prefetch" href="/assets/js/172.cbc9f01e.js"><link rel="prefetch" href="/assets/js/173.036cc49c.js"><link rel="prefetch" href="/assets/js/174.7900267f.js"><link rel="prefetch" href="/assets/js/175.7f350261.js"><link rel="prefetch" href="/assets/js/176.abfbdc57.js"><link rel="prefetch" href="/assets/js/177.679877f2.js"><link rel="prefetch" href="/assets/js/178.87fc5aba.js"><link rel="prefetch" href="/assets/js/179.26c9f0a4.js"><link rel="prefetch" href="/assets/js/18.e64f0610.js"><link rel="prefetch" href="/assets/js/180.bd2cdacc.js"><link rel="prefetch" href="/assets/js/181.3ad737a4.js"><link rel="prefetch" href="/assets/js/182.3e7faf1a.js"><link rel="prefetch" href="/assets/js/183.4d65d295.js"><link rel="prefetch" href="/assets/js/184.460482ae.js"><link rel="prefetch" href="/assets/js/185.46d4a7fe.js"><link rel="prefetch" href="/assets/js/186.61235089.js"><link rel="prefetch" href="/assets/js/187.397bcfe8.js"><link rel="prefetch" href="/assets/js/188.060a1cb7.js"><link rel="prefetch" href="/assets/js/189.e3995463.js"><link rel="prefetch" href="/assets/js/19.f8b70585.js"><link rel="prefetch" href="/assets/js/190.dcaa16c4.js"><link rel="prefetch" href="/assets/js/191.f4c5aa96.js"><link rel="prefetch" href="/assets/js/192.8b10742f.js"><link rel="prefetch" href="/assets/js/193.64a40b9c.js"><link rel="prefetch" href="/assets/js/194.2ea34c9f.js"><link rel="prefetch" href="/assets/js/195.6bb470df.js"><link rel="prefetch" href="/assets/js/196.a0f55724.js"><link rel="prefetch" href="/assets/js/197.493d62fe.js"><link rel="prefetch" href="/assets/js/198.285ec3f4.js"><link rel="prefetch" href="/assets/js/199.c26664a8.js"><link rel="prefetch" href="/assets/js/20.c407011e.js"><link rel="prefetch" href="/assets/js/200.e172c025.js"><link rel="prefetch" href="/assets/js/201.88cbb622.js"><link rel="prefetch" href="/assets/js/202.da403177.js"><link rel="prefetch" href="/assets/js/203.6eb14b41.js"><link rel="prefetch" href="/assets/js/204.2ddae4bf.js"><link rel="prefetch" href="/assets/js/205.0a89efc1.js"><link rel="prefetch" href="/assets/js/206.480a66d3.js"><link rel="prefetch" href="/assets/js/207.bf5c1d60.js"><link rel="prefetch" href="/assets/js/208.b187dc67.js"><link rel="prefetch" href="/assets/js/209.20c99616.js"><link rel="prefetch" href="/assets/js/21.7edc8b1b.js"><link rel="prefetch" href="/assets/js/210.e4f1f766.js"><link rel="prefetch" href="/assets/js/211.1ed7b354.js"><link rel="prefetch" href="/assets/js/212.7e1243ab.js"><link rel="prefetch" href="/assets/js/213.6daddd4b.js"><link rel="prefetch" href="/assets/js/214.e548b00f.js"><link rel="prefetch" href="/assets/js/215.5e7f305a.js"><link rel="prefetch" href="/assets/js/216.d02d9a10.js"><link rel="prefetch" href="/assets/js/217.4ee282a4.js"><link rel="prefetch" href="/assets/js/218.d95d737e.js"><link rel="prefetch" href="/assets/js/219.fab5907a.js"><link rel="prefetch" href="/assets/js/22.fdbd00d3.js"><link rel="prefetch" href="/assets/js/220.56c6f7cc.js"><link rel="prefetch" href="/assets/js/221.3ee9e8ae.js"><link rel="prefetch" href="/assets/js/222.30c2d9ac.js"><link rel="prefetch" href="/assets/js/223.d6f5a1ce.js"><link rel="prefetch" href="/assets/js/224.b964e9b3.js"><link rel="prefetch" href="/assets/js/225.4f7cdb7b.js"><link rel="prefetch" href="/assets/js/226.34f5bc46.js"><link rel="prefetch" href="/assets/js/227.0c1d6c32.js"><link rel="prefetch" href="/assets/js/228.5c4850fa.js"><link rel="prefetch" href="/assets/js/229.0e83acaa.js"><link rel="prefetch" href="/assets/js/23.714595d5.js"><link rel="prefetch" href="/assets/js/230.d56ff6f6.js"><link rel="prefetch" href="/assets/js/231.19e033e0.js"><link rel="prefetch" href="/assets/js/232.b020bd32.js"><link rel="prefetch" href="/assets/js/233.19037210.js"><link rel="prefetch" href="/assets/js/234.10d14014.js"><link rel="prefetch" href="/assets/js/235.91bc5ad5.js"><link rel="prefetch" href="/assets/js/236.e9193180.js"><link rel="prefetch" href="/assets/js/237.e9be28a3.js"><link rel="prefetch" href="/assets/js/238.d1ac2fd8.js"><link rel="prefetch" href="/assets/js/239.44f2f146.js"><link rel="prefetch" href="/assets/js/24.2611c0d6.js"><link rel="prefetch" href="/assets/js/240.c8fe20cb.js"><link rel="prefetch" href="/assets/js/241.b232c3db.js"><link rel="prefetch" href="/assets/js/242.5bacdca9.js"><link rel="prefetch" href="/assets/js/243.bc85e605.js"><link rel="prefetch" href="/assets/js/244.975158d1.js"><link rel="prefetch" href="/assets/js/245.a139b48a.js"><link rel="prefetch" href="/assets/js/246.3138e906.js"><link rel="prefetch" href="/assets/js/247.070da83a.js"><link rel="prefetch" href="/assets/js/248.a1d8ac56.js"><link rel="prefetch" href="/assets/js/249.aadb0dca.js"><link rel="prefetch" href="/assets/js/25.2272f92f.js"><link rel="prefetch" href="/assets/js/250.c9cbf057.js"><link rel="prefetch" href="/assets/js/251.e8ddac0a.js"><link rel="prefetch" href="/assets/js/252.47894d0d.js"><link rel="prefetch" href="/assets/js/253.38f4c081.js"><link rel="prefetch" href="/assets/js/254.73808710.js"><link rel="prefetch" href="/assets/js/255.19234ae1.js"><link rel="prefetch" href="/assets/js/256.dbd6b6af.js"><link rel="prefetch" href="/assets/js/257.c16eae54.js"><link rel="prefetch" href="/assets/js/258.89a54cc9.js"><link rel="prefetch" href="/assets/js/259.ff8893b9.js"><link rel="prefetch" href="/assets/js/26.4d1df400.js"><link rel="prefetch" href="/assets/js/260.da83ef3e.js"><link rel="prefetch" href="/assets/js/261.39869cb6.js"><link rel="prefetch" href="/assets/js/262.6df31a71.js"><link rel="prefetch" href="/assets/js/263.a98eab49.js"><link rel="prefetch" href="/assets/js/264.1204725e.js"><link rel="prefetch" href="/assets/js/265.b6ce2d26.js"><link rel="prefetch" href="/assets/js/266.0c03e783.js"><link rel="prefetch" href="/assets/js/267.d686ec0e.js"><link rel="prefetch" href="/assets/js/268.e7c76c63.js"><link rel="prefetch" href="/assets/js/269.9ec0a34d.js"><link rel="prefetch" href="/assets/js/27.a88ca8bc.js"><link rel="prefetch" href="/assets/js/270.99f54d10.js"><link rel="prefetch" href="/assets/js/271.b9e143e2.js"><link rel="prefetch" href="/assets/js/272.1c93e968.js"><link rel="prefetch" href="/assets/js/273.7235d019.js"><link rel="prefetch" href="/assets/js/274.fbed798d.js"><link rel="prefetch" href="/assets/js/275.0006136b.js"><link rel="prefetch" href="/assets/js/276.8fc094f0.js"><link rel="prefetch" href="/assets/js/277.20e11e67.js"><link rel="prefetch" href="/assets/js/278.f8dc8f8f.js"><link rel="prefetch" href="/assets/js/279.651a9f88.js"><link rel="prefetch" href="/assets/js/28.69be6cc7.js"><link rel="prefetch" href="/assets/js/280.94aed3df.js"><link rel="prefetch" href="/assets/js/281.b9e4a0c1.js"><link rel="prefetch" href="/assets/js/282.fcbf917d.js"><link rel="prefetch" href="/assets/js/283.4b9335f2.js"><link rel="prefetch" href="/assets/js/284.a2748605.js"><link rel="prefetch" href="/assets/js/285.75119aca.js"><link rel="prefetch" href="/assets/js/286.a4a0abc2.js"><link rel="prefetch" href="/assets/js/287.0e10db49.js"><link rel="prefetch" href="/assets/js/288.540945f8.js"><link rel="prefetch" href="/assets/js/289.65991a71.js"><link rel="prefetch" href="/assets/js/29.3d144449.js"><link rel="prefetch" href="/assets/js/290.3cda3c0a.js"><link rel="prefetch" href="/assets/js/291.a7c9d6a2.js"><link rel="prefetch" href="/assets/js/292.2ce3fd5f.js"><link rel="prefetch" href="/assets/js/293.6572edb6.js"><link rel="prefetch" href="/assets/js/294.2a04291f.js"><link rel="prefetch" href="/assets/js/295.9a0fdf51.js"><link rel="prefetch" href="/assets/js/296.76bf15e5.js"><link rel="prefetch" href="/assets/js/297.ca22f9e0.js"><link rel="prefetch" href="/assets/js/298.dfd560c6.js"><link rel="prefetch" href="/assets/js/299.ea6a076f.js"><link rel="prefetch" href="/assets/js/3.19255846.js"><link rel="prefetch" href="/assets/js/30.c9924233.js"><link rel="prefetch" href="/assets/js/300.08ab4a0a.js"><link rel="prefetch" href="/assets/js/301.493634b6.js"><link rel="prefetch" href="/assets/js/302.088b770b.js"><link rel="prefetch" href="/assets/js/303.fdda8763.js"><link rel="prefetch" href="/assets/js/304.6e6a4a01.js"><link rel="prefetch" href="/assets/js/305.a3a1ae34.js"><link rel="prefetch" href="/assets/js/306.5835726c.js"><link rel="prefetch" href="/assets/js/307.0fce17cb.js"><link rel="prefetch" href="/assets/js/308.1e172ca3.js"><link rel="prefetch" href="/assets/js/309.80af26f3.js"><link rel="prefetch" href="/assets/js/31.f9f57568.js"><link rel="prefetch" href="/assets/js/310.b5f3ed6f.js"><link rel="prefetch" href="/assets/js/311.82c7e552.js"><link rel="prefetch" href="/assets/js/312.a48280c0.js"><link rel="prefetch" href="/assets/js/313.7c31693f.js"><link rel="prefetch" href="/assets/js/314.307f9eda.js"><link rel="prefetch" href="/assets/js/315.9f1e1099.js"><link rel="prefetch" href="/assets/js/316.7d255d6d.js"><link rel="prefetch" href="/assets/js/317.ef013a1a.js"><link rel="prefetch" href="/assets/js/318.64d24469.js"><link rel="prefetch" href="/assets/js/319.59c19af0.js"><link rel="prefetch" href="/assets/js/32.b29dc01b.js"><link rel="prefetch" href="/assets/js/320.add9fa10.js"><link rel="prefetch" href="/assets/js/321.22b199c2.js"><link rel="prefetch" href="/assets/js/322.ad9a2dff.js"><link rel="prefetch" href="/assets/js/323.b4183fc2.js"><link rel="prefetch" href="/assets/js/324.cf1aca23.js"><link rel="prefetch" href="/assets/js/325.83a4f1cf.js"><link rel="prefetch" href="/assets/js/326.f5c26436.js"><link rel="prefetch" href="/assets/js/327.16102be7.js"><link rel="prefetch" href="/assets/js/328.da84fbb0.js"><link rel="prefetch" href="/assets/js/329.4bdbc8ed.js"><link rel="prefetch" href="/assets/js/33.961516b8.js"><link rel="prefetch" href="/assets/js/330.0a98e84a.js"><link rel="prefetch" href="/assets/js/331.36e66e80.js"><link rel="prefetch" href="/assets/js/332.1b010d76.js"><link rel="prefetch" href="/assets/js/333.bf2def9d.js"><link rel="prefetch" href="/assets/js/334.373631c9.js"><link rel="prefetch" href="/assets/js/335.68121e51.js"><link rel="prefetch" href="/assets/js/336.49a94ea2.js"><link rel="prefetch" href="/assets/js/337.661abdcc.js"><link rel="prefetch" href="/assets/js/338.389c4be2.js"><link rel="prefetch" href="/assets/js/339.098329ed.js"><link rel="prefetch" href="/assets/js/34.7cb1f223.js"><link rel="prefetch" href="/assets/js/340.5c400f4d.js"><link rel="prefetch" href="/assets/js/341.41d84f2d.js"><link rel="prefetch" href="/assets/js/342.ef356713.js"><link rel="prefetch" href="/assets/js/343.d1e1952a.js"><link rel="prefetch" href="/assets/js/344.1980f7cc.js"><link rel="prefetch" href="/assets/js/345.0f7d9b9f.js"><link rel="prefetch" href="/assets/js/346.c3878425.js"><link rel="prefetch" href="/assets/js/347.dd74c55a.js"><link rel="prefetch" href="/assets/js/348.89584af8.js"><link rel="prefetch" href="/assets/js/349.c7bc7bc1.js"><link rel="prefetch" href="/assets/js/35.51ade70c.js"><link rel="prefetch" href="/assets/js/350.d2df1d20.js"><link rel="prefetch" href="/assets/js/351.a1b78a34.js"><link rel="prefetch" href="/assets/js/352.08ae09fd.js"><link rel="prefetch" href="/assets/js/353.aced76b3.js"><link rel="prefetch" href="/assets/js/354.f033ee07.js"><link rel="prefetch" href="/assets/js/355.95831785.js"><link rel="prefetch" href="/assets/js/356.893584e1.js"><link rel="prefetch" href="/assets/js/357.5f070ca5.js"><link rel="prefetch" href="/assets/js/358.35f2ade5.js"><link rel="prefetch" href="/assets/js/359.e45099bd.js"><link rel="prefetch" href="/assets/js/36.82c64b8f.js"><link rel="prefetch" href="/assets/js/360.59aa32f9.js"><link rel="prefetch" href="/assets/js/361.bd3c2fdd.js"><link rel="prefetch" href="/assets/js/362.3566e79d.js"><link rel="prefetch" href="/assets/js/363.b4ab82f7.js"><link rel="prefetch" href="/assets/js/364.7f50d299.js"><link rel="prefetch" href="/assets/js/365.4f8e93f6.js"><link rel="prefetch" href="/assets/js/366.8fd91814.js"><link rel="prefetch" href="/assets/js/367.0d47f5a8.js"><link rel="prefetch" href="/assets/js/368.fb7814d2.js"><link rel="prefetch" href="/assets/js/369.d6d8c504.js"><link rel="prefetch" href="/assets/js/37.5165b622.js"><link rel="prefetch" href="/assets/js/370.00a807a6.js"><link rel="prefetch" href="/assets/js/371.867a9db3.js"><link rel="prefetch" href="/assets/js/372.decca4ce.js"><link rel="prefetch" href="/assets/js/373.98b37511.js"><link rel="prefetch" href="/assets/js/374.6313e71a.js"><link rel="prefetch" href="/assets/js/375.f2e2fa05.js"><link rel="prefetch" href="/assets/js/376.7103c034.js"><link rel="prefetch" href="/assets/js/377.9bf388c9.js"><link rel="prefetch" href="/assets/js/378.57ae31cf.js"><link rel="prefetch" href="/assets/js/379.739ee8d7.js"><link rel="prefetch" href="/assets/js/38.563ce632.js"><link rel="prefetch" href="/assets/js/380.6256f3c8.js"><link rel="prefetch" href="/assets/js/381.38f7eb5a.js"><link rel="prefetch" href="/assets/js/382.ae035904.js"><link rel="prefetch" href="/assets/js/383.2d1b99c3.js"><link rel="prefetch" href="/assets/js/384.094517c8.js"><link rel="prefetch" href="/assets/js/385.62ddf499.js"><link rel="prefetch" href="/assets/js/386.8315cf9d.js"><link rel="prefetch" href="/assets/js/387.2bef00d3.js"><link rel="prefetch" href="/assets/js/388.178f867f.js"><link rel="prefetch" href="/assets/js/389.d893ba15.js"><link rel="prefetch" href="/assets/js/39.29556252.js"><link rel="prefetch" href="/assets/js/390.1b85f452.js"><link rel="prefetch" href="/assets/js/391.12fe014e.js"><link rel="prefetch" href="/assets/js/392.8c88755d.js"><link rel="prefetch" href="/assets/js/393.72aa7675.js"><link rel="prefetch" href="/assets/js/394.df13d1f7.js"><link rel="prefetch" href="/assets/js/395.8f8d96d9.js"><link rel="prefetch" href="/assets/js/396.aa362f3c.js"><link rel="prefetch" href="/assets/js/397.cca49694.js"><link rel="prefetch" href="/assets/js/398.d9fd0617.js"><link rel="prefetch" href="/assets/js/399.96f3fede.js"><link rel="prefetch" href="/assets/js/4.623783fc.js"><link rel="prefetch" href="/assets/js/40.0330d609.js"><link rel="prefetch" href="/assets/js/400.a1472f96.js"><link rel="prefetch" href="/assets/js/401.3d4e1a6b.js"><link rel="prefetch" href="/assets/js/402.0a8a7162.js"><link rel="prefetch" href="/assets/js/403.b1393b0f.js"><link rel="prefetch" href="/assets/js/404.7e485063.js"><link rel="prefetch" href="/assets/js/405.1037d751.js"><link rel="prefetch" href="/assets/js/406.ae7d83bb.js"><link rel="prefetch" href="/assets/js/407.cb9ade38.js"><link rel="prefetch" href="/assets/js/408.a105752d.js"><link rel="prefetch" href="/assets/js/409.a56202e0.js"><link rel="prefetch" href="/assets/js/41.dcb7a3f5.js"><link rel="prefetch" href="/assets/js/410.f615dd75.js"><link rel="prefetch" href="/assets/js/411.29882ac4.js"><link rel="prefetch" href="/assets/js/412.ed8e6abb.js"><link rel="prefetch" href="/assets/js/413.2a212c18.js"><link rel="prefetch" href="/assets/js/414.9717c94d.js"><link rel="prefetch" href="/assets/js/415.ad521b94.js"><link rel="prefetch" href="/assets/js/416.981646b8.js"><link rel="prefetch" href="/assets/js/417.3bcf1a86.js"><link rel="prefetch" href="/assets/js/418.d6d8bc33.js"><link rel="prefetch" href="/assets/js/419.79a736e3.js"><link rel="prefetch" href="/assets/js/42.61434728.js"><link rel="prefetch" href="/assets/js/420.bd2fe57b.js"><link rel="prefetch" href="/assets/js/421.040b2b27.js"><link rel="prefetch" href="/assets/js/422.5cc63c45.js"><link rel="prefetch" href="/assets/js/423.9d447e90.js"><link rel="prefetch" href="/assets/js/424.51734eb2.js"><link rel="prefetch" href="/assets/js/425.f6a00d75.js"><link rel="prefetch" href="/assets/js/426.896f7a5b.js"><link rel="prefetch" href="/assets/js/427.e099dd6a.js"><link rel="prefetch" href="/assets/js/428.beef8eb2.js"><link rel="prefetch" href="/assets/js/429.266ed61e.js"><link rel="prefetch" href="/assets/js/43.667a4108.js"><link rel="prefetch" href="/assets/js/430.cd857ec2.js"><link rel="prefetch" href="/assets/js/431.cb5550b2.js"><link rel="prefetch" href="/assets/js/432.3a31614c.js"><link rel="prefetch" href="/assets/js/433.c9f73ea8.js"><link rel="prefetch" href="/assets/js/434.c3d546a3.js"><link rel="prefetch" href="/assets/js/435.6a5558d5.js"><link rel="prefetch" href="/assets/js/436.fac0cdde.js"><link rel="prefetch" href="/assets/js/437.858e2dbc.js"><link rel="prefetch" href="/assets/js/438.4f6fd7f1.js"><link rel="prefetch" href="/assets/js/439.d823d6d5.js"><link rel="prefetch" href="/assets/js/44.2e051a69.js"><link rel="prefetch" href="/assets/js/440.8d4edefe.js"><link rel="prefetch" href="/assets/js/441.806f144c.js"><link rel="prefetch" href="/assets/js/442.56b1ae7b.js"><link rel="prefetch" href="/assets/js/443.0c9c92ed.js"><link rel="prefetch" href="/assets/js/444.4484d097.js"><link rel="prefetch" href="/assets/js/445.6e68718d.js"><link rel="prefetch" href="/assets/js/446.5bdd4ab4.js"><link rel="prefetch" href="/assets/js/447.6202d37b.js"><link rel="prefetch" href="/assets/js/448.88ae6dd3.js"><link rel="prefetch" href="/assets/js/449.2e911cca.js"><link rel="prefetch" href="/assets/js/45.08ce102a.js"><link rel="prefetch" href="/assets/js/450.16bda76e.js"><link rel="prefetch" href="/assets/js/451.ee603a5b.js"><link rel="prefetch" href="/assets/js/452.ff4a503b.js"><link rel="prefetch" href="/assets/js/453.f4bf543d.js"><link rel="prefetch" href="/assets/js/454.fb1e37fa.js"><link rel="prefetch" href="/assets/js/455.55467fe9.js"><link rel="prefetch" href="/assets/js/456.c1ccc8ef.js"><link rel="prefetch" href="/assets/js/457.aaeaefa6.js"><link rel="prefetch" href="/assets/js/458.f59b0607.js"><link rel="prefetch" href="/assets/js/459.201f603d.js"><link rel="prefetch" href="/assets/js/46.074adfe9.js"><link rel="prefetch" href="/assets/js/460.4e283c1a.js"><link rel="prefetch" href="/assets/js/461.c2492681.js"><link rel="prefetch" href="/assets/js/462.9362354d.js"><link rel="prefetch" href="/assets/js/463.a4087f38.js"><link rel="prefetch" href="/assets/js/464.e5828e7e.js"><link rel="prefetch" href="/assets/js/465.e95594b5.js"><link rel="prefetch" href="/assets/js/466.7b75c1f4.js"><link rel="prefetch" href="/assets/js/467.8e9d9c24.js"><link rel="prefetch" href="/assets/js/468.b87a6973.js"><link rel="prefetch" href="/assets/js/469.3411b392.js"><link rel="prefetch" href="/assets/js/47.8175158f.js"><link rel="prefetch" href="/assets/js/470.95363b28.js"><link rel="prefetch" href="/assets/js/471.21a1606b.js"><link rel="prefetch" href="/assets/js/472.f9687e9c.js"><link rel="prefetch" href="/assets/js/473.64f85306.js"><link rel="prefetch" href="/assets/js/474.8a9f362d.js"><link rel="prefetch" href="/assets/js/475.5d6399de.js"><link rel="prefetch" href="/assets/js/476.70d49b7b.js"><link rel="prefetch" href="/assets/js/477.7e3e21a3.js"><link rel="prefetch" href="/assets/js/478.67387462.js"><link rel="prefetch" href="/assets/js/479.a239eaa0.js"><link rel="prefetch" href="/assets/js/48.f20bc2b0.js"><link rel="prefetch" href="/assets/js/480.6f0b953b.js"><link rel="prefetch" href="/assets/js/481.b3ec6e3e.js"><link rel="prefetch" href="/assets/js/482.ef931c32.js"><link rel="prefetch" href="/assets/js/484.544c1072.js"><link rel="prefetch" href="/assets/js/485.d8a5505a.js"><link rel="prefetch" href="/assets/js/486.1ea2510a.js"><link rel="prefetch" href="/assets/js/487.e954f3bc.js"><link rel="prefetch" href="/assets/js/488.dbfe8c7c.js"><link rel="prefetch" href="/assets/js/489.92152c72.js"><link rel="prefetch" href="/assets/js/49.f4b7dc24.js"><link rel="prefetch" href="/assets/js/490.8ea88875.js"><link rel="prefetch" href="/assets/js/491.d1e2d1b6.js"><link rel="prefetch" href="/assets/js/492.217b7fd1.js"><link rel="prefetch" href="/assets/js/493.6d188156.js"><link rel="prefetch" href="/assets/js/494.adcca4bf.js"><link rel="prefetch" href="/assets/js/495.13cdbf74.js"><link rel="prefetch" href="/assets/js/496.53a4b758.js"><link rel="prefetch" href="/assets/js/497.0763c40d.js"><link rel="prefetch" href="/assets/js/498.debcfb1b.js"><link rel="prefetch" href="/assets/js/499.7d3cf6eb.js"><link rel="prefetch" href="/assets/js/50.41ac06fd.js"><link rel="prefetch" href="/assets/js/500.28473fb4.js"><link rel="prefetch" href="/assets/js/501.90241d8d.js"><link rel="prefetch" href="/assets/js/502.a096c362.js"><link rel="prefetch" href="/assets/js/503.539676ba.js"><link rel="prefetch" href="/assets/js/504.39d8e399.js"><link rel="prefetch" href="/assets/js/505.2b2a130b.js"><link rel="prefetch" href="/assets/js/506.7811ad79.js"><link rel="prefetch" href="/assets/js/507.2817d33b.js"><link rel="prefetch" href="/assets/js/508.89b8d712.js"><link rel="prefetch" href="/assets/js/509.80dcd2b5.js"><link rel="prefetch" href="/assets/js/51.3ef6cdbe.js"><link rel="prefetch" href="/assets/js/510.a8f28525.js"><link rel="prefetch" href="/assets/js/511.e890924a.js"><link rel="prefetch" href="/assets/js/512.9a073fe1.js"><link rel="prefetch" href="/assets/js/513.0a302efb.js"><link rel="prefetch" href="/assets/js/514.6b43f3e7.js"><link rel="prefetch" href="/assets/js/515.c7b0284a.js"><link rel="prefetch" href="/assets/js/516.5daf0566.js"><link rel="prefetch" href="/assets/js/517.67f7c508.js"><link rel="prefetch" href="/assets/js/518.7854e40b.js"><link rel="prefetch" href="/assets/js/519.dcb88d39.js"><link rel="prefetch" href="/assets/js/52.840d0f74.js"><link rel="prefetch" href="/assets/js/520.6f40c4e7.js"><link rel="prefetch" href="/assets/js/521.3c0a006c.js"><link rel="prefetch" href="/assets/js/522.ed57f1a7.js"><link rel="prefetch" href="/assets/js/523.39d637e2.js"><link rel="prefetch" href="/assets/js/524.acd5ee1f.js"><link rel="prefetch" href="/assets/js/525.0836647e.js"><link rel="prefetch" href="/assets/js/526.9e2af36c.js"><link rel="prefetch" href="/assets/js/527.9337d948.js"><link rel="prefetch" href="/assets/js/528.cacbd480.js"><link rel="prefetch" href="/assets/js/529.21a67f8f.js"><link rel="prefetch" href="/assets/js/53.fb86a936.js"><link rel="prefetch" href="/assets/js/530.3373ac51.js"><link rel="prefetch" href="/assets/js/531.1b371c24.js"><link rel="prefetch" href="/assets/js/532.64685d6d.js"><link rel="prefetch" href="/assets/js/533.d3344f80.js"><link rel="prefetch" href="/assets/js/534.1adcd2e2.js"><link rel="prefetch" href="/assets/js/535.cf0f4bbe.js"><link rel="prefetch" href="/assets/js/536.f3cadbc2.js"><link rel="prefetch" href="/assets/js/537.d2071727.js"><link rel="prefetch" href="/assets/js/538.b700925e.js"><link rel="prefetch" href="/assets/js/539.a5de8601.js"><link rel="prefetch" href="/assets/js/54.e8d5a023.js"><link rel="prefetch" href="/assets/js/540.525e8630.js"><link rel="prefetch" href="/assets/js/541.0b14ac8a.js"><link rel="prefetch" href="/assets/js/542.fc96e578.js"><link rel="prefetch" href="/assets/js/543.53cf25d0.js"><link rel="prefetch" href="/assets/js/544.f9b3e911.js"><link rel="prefetch" href="/assets/js/545.b353670e.js"><link rel="prefetch" href="/assets/js/546.5ed48a56.js"><link rel="prefetch" href="/assets/js/547.9843edce.js"><link rel="prefetch" href="/assets/js/548.f8eb7890.js"><link rel="prefetch" href="/assets/js/549.990650c2.js"><link rel="prefetch" href="/assets/js/55.b268240f.js"><link rel="prefetch" href="/assets/js/550.c7ba17a1.js"><link rel="prefetch" href="/assets/js/551.2ea79a07.js"><link rel="prefetch" href="/assets/js/552.950843bd.js"><link rel="prefetch" href="/assets/js/553.d1f94516.js"><link rel="prefetch" href="/assets/js/554.873b4336.js"><link rel="prefetch" href="/assets/js/555.12e7f37d.js"><link rel="prefetch" href="/assets/js/556.c84abfa5.js"><link rel="prefetch" href="/assets/js/557.76108e15.js"><link rel="prefetch" href="/assets/js/558.ad0caf91.js"><link rel="prefetch" href="/assets/js/559.efc5fcaa.js"><link rel="prefetch" href="/assets/js/56.862368c6.js"><link rel="prefetch" href="/assets/js/560.82032a52.js"><link rel="prefetch" href="/assets/js/561.b776e2e3.js"><link rel="prefetch" href="/assets/js/562.8f48c34e.js"><link rel="prefetch" href="/assets/js/563.1916b1f0.js"><link rel="prefetch" href="/assets/js/564.89eef1bf.js"><link rel="prefetch" href="/assets/js/565.2ca43acb.js"><link rel="prefetch" href="/assets/js/566.6caf93e6.js"><link rel="prefetch" href="/assets/js/567.1888604a.js"><link rel="prefetch" href="/assets/js/568.c909a75b.js"><link rel="prefetch" href="/assets/js/569.6862733a.js"><link rel="prefetch" href="/assets/js/57.d93cbd65.js"><link rel="prefetch" href="/assets/js/570.ce0e3115.js"><link rel="prefetch" href="/assets/js/571.0da49310.js"><link rel="prefetch" href="/assets/js/572.c34ca3fd.js"><link rel="prefetch" href="/assets/js/573.895c8f8d.js"><link rel="prefetch" href="/assets/js/574.e59b6191.js"><link rel="prefetch" href="/assets/js/575.842ef1ff.js"><link rel="prefetch" href="/assets/js/576.9b5dd540.js"><link rel="prefetch" href="/assets/js/577.2d0e6020.js"><link rel="prefetch" href="/assets/js/578.2e49a333.js"><link rel="prefetch" href="/assets/js/579.005171f1.js"><link rel="prefetch" href="/assets/js/58.10ca5b0d.js"><link rel="prefetch" href="/assets/js/580.74d9d14e.js"><link rel="prefetch" href="/assets/js/581.404aa6ad.js"><link rel="prefetch" href="/assets/js/582.4c756647.js"><link rel="prefetch" href="/assets/js/583.84f8db17.js"><link rel="prefetch" href="/assets/js/584.0c4307db.js"><link rel="prefetch" href="/assets/js/585.9cbe1c6c.js"><link rel="prefetch" href="/assets/js/586.94d5912f.js"><link rel="prefetch" href="/assets/js/587.08073e55.js"><link rel="prefetch" href="/assets/js/588.a4cb5da6.js"><link rel="prefetch" href="/assets/js/589.ff2423ac.js"><link rel="prefetch" href="/assets/js/59.3eb351e6.js"><link rel="prefetch" href="/assets/js/590.1a498879.js"><link rel="prefetch" href="/assets/js/591.eb8d6c20.js"><link rel="prefetch" href="/assets/js/592.850eee03.js"><link rel="prefetch" href="/assets/js/593.12b28022.js"><link rel="prefetch" href="/assets/js/594.9c805b81.js"><link rel="prefetch" href="/assets/js/595.e9119b0e.js"><link rel="prefetch" href="/assets/js/596.6b641a7e.js"><link rel="prefetch" href="/assets/js/597.77bf95f8.js"><link rel="prefetch" href="/assets/js/598.da53697e.js"><link rel="prefetch" href="/assets/js/599.281b72be.js"><link rel="prefetch" href="/assets/js/6.8773fb47.js"><link rel="prefetch" href="/assets/js/60.1c1a9cd1.js"><link rel="prefetch" href="/assets/js/600.4aa56a28.js"><link rel="prefetch" href="/assets/js/601.93029330.js"><link rel="prefetch" href="/assets/js/602.3dee7fe6.js"><link rel="prefetch" href="/assets/js/603.cdc313ee.js"><link rel="prefetch" href="/assets/js/604.965166a0.js"><link rel="prefetch" href="/assets/js/605.7c70961f.js"><link rel="prefetch" href="/assets/js/606.a9f02486.js"><link rel="prefetch" href="/assets/js/607.73baa5d1.js"><link rel="prefetch" href="/assets/js/608.e8fa09f4.js"><link rel="prefetch" href="/assets/js/609.ac51d009.js"><link rel="prefetch" href="/assets/js/61.9683ebee.js"><link rel="prefetch" href="/assets/js/610.644de93e.js"><link rel="prefetch" href="/assets/js/611.4435581a.js"><link rel="prefetch" href="/assets/js/612.27640be2.js"><link rel="prefetch" href="/assets/js/613.5010499b.js"><link rel="prefetch" href="/assets/js/614.cf985a78.js"><link rel="prefetch" href="/assets/js/615.175e2d87.js"><link rel="prefetch" href="/assets/js/616.c034e53d.js"><link rel="prefetch" href="/assets/js/617.fe843932.js"><link rel="prefetch" href="/assets/js/618.17ffbf18.js"><link rel="prefetch" href="/assets/js/619.c968374b.js"><link rel="prefetch" href="/assets/js/62.2276e6d3.js"><link rel="prefetch" href="/assets/js/620.f34c0fa0.js"><link rel="prefetch" href="/assets/js/621.815b8624.js"><link rel="prefetch" href="/assets/js/622.d534821e.js"><link rel="prefetch" href="/assets/js/623.936ac4e3.js"><link rel="prefetch" href="/assets/js/624.68e1aa29.js"><link rel="prefetch" href="/assets/js/625.07b94155.js"><link rel="prefetch" href="/assets/js/626.96720feb.js"><link rel="prefetch" href="/assets/js/627.6c0097f7.js"><link rel="prefetch" href="/assets/js/628.1b01c525.js"><link rel="prefetch" href="/assets/js/629.6b7b7051.js"><link rel="prefetch" href="/assets/js/63.21657e0e.js"><link rel="prefetch" href="/assets/js/630.5e364b4e.js"><link rel="prefetch" href="/assets/js/631.1dbc5bc2.js"><link rel="prefetch" href="/assets/js/632.26cf0433.js"><link rel="prefetch" href="/assets/js/633.f5940046.js"><link rel="prefetch" href="/assets/js/634.631e139f.js"><link rel="prefetch" href="/assets/js/635.dcb1483c.js"><link rel="prefetch" href="/assets/js/636.99b6e8c3.js"><link rel="prefetch" href="/assets/js/637.ac8ad035.js"><link rel="prefetch" href="/assets/js/638.5782cc19.js"><link rel="prefetch" href="/assets/js/639.1db80fe2.js"><link rel="prefetch" href="/assets/js/64.02fb1ddb.js"><link rel="prefetch" href="/assets/js/640.bc54f7f5.js"><link rel="prefetch" href="/assets/js/641.cdff8819.js"><link rel="prefetch" href="/assets/js/642.df23e220.js"><link rel="prefetch" href="/assets/js/643.89df1b3c.js"><link rel="prefetch" href="/assets/js/644.5f0031ba.js"><link rel="prefetch" href="/assets/js/645.f7daa126.js"><link rel="prefetch" href="/assets/js/646.d47a3e0e.js"><link rel="prefetch" href="/assets/js/647.d1c8f3ae.js"><link rel="prefetch" href="/assets/js/648.0506ce23.js"><link rel="prefetch" href="/assets/js/649.6cf2a641.js"><link rel="prefetch" href="/assets/js/65.b4028009.js"><link rel="prefetch" href="/assets/js/650.89785dee.js"><link rel="prefetch" href="/assets/js/651.8b6fa105.js"><link rel="prefetch" href="/assets/js/652.5e42ce8f.js"><link rel="prefetch" href="/assets/js/653.eddc84e1.js"><link rel="prefetch" href="/assets/js/654.48762cb9.js"><link rel="prefetch" href="/assets/js/655.7bcd5aa3.js"><link rel="prefetch" href="/assets/js/656.bf91b745.js"><link rel="prefetch" href="/assets/js/657.332eec27.js"><link rel="prefetch" href="/assets/js/658.9e9b31c8.js"><link rel="prefetch" href="/assets/js/659.b469808c.js"><link rel="prefetch" href="/assets/js/66.33d6767a.js"><link rel="prefetch" href="/assets/js/660.25843c88.js"><link rel="prefetch" href="/assets/js/661.ca1a9580.js"><link rel="prefetch" href="/assets/js/662.cd6fe6ce.js"><link rel="prefetch" href="/assets/js/663.dddb87c3.js"><link rel="prefetch" href="/assets/js/664.c4d2b9b4.js"><link rel="prefetch" href="/assets/js/665.e26ea7fd.js"><link rel="prefetch" href="/assets/js/666.918a92c2.js"><link rel="prefetch" href="/assets/js/667.5f06fa05.js"><link rel="prefetch" href="/assets/js/668.7b783af2.js"><link rel="prefetch" href="/assets/js/669.efe734b4.js"><link rel="prefetch" href="/assets/js/67.0737d4e2.js"><link rel="prefetch" href="/assets/js/670.70a7afa1.js"><link rel="prefetch" href="/assets/js/671.d82e7481.js"><link rel="prefetch" href="/assets/js/672.f4e33cf4.js"><link rel="prefetch" href="/assets/js/673.f3b26cca.js"><link rel="prefetch" href="/assets/js/674.d5327fdb.js"><link rel="prefetch" href="/assets/js/675.06e1587e.js"><link rel="prefetch" href="/assets/js/676.b81eab7c.js"><link rel="prefetch" href="/assets/js/677.65c1f157.js"><link rel="prefetch" href="/assets/js/678.dd3c35f4.js"><link rel="prefetch" href="/assets/js/679.1b3371c6.js"><link rel="prefetch" href="/assets/js/68.ff08cac1.js"><link rel="prefetch" href="/assets/js/680.4c431b6d.js"><link rel="prefetch" href="/assets/js/681.4b4df97f.js"><link rel="prefetch" href="/assets/js/682.daa28558.js"><link rel="prefetch" href="/assets/js/683.019ac4bf.js"><link rel="prefetch" href="/assets/js/684.72942987.js"><link rel="prefetch" href="/assets/js/685.b232df8f.js"><link rel="prefetch" href="/assets/js/686.27dc24b3.js"><link rel="prefetch" href="/assets/js/687.4a8ef826.js"><link rel="prefetch" href="/assets/js/688.0ba25fdf.js"><link rel="prefetch" href="/assets/js/689.be8172ba.js"><link rel="prefetch" href="/assets/js/69.516fa4ee.js"><link rel="prefetch" href="/assets/js/690.88418e50.js"><link rel="prefetch" href="/assets/js/691.1d8c222b.js"><link rel="prefetch" href="/assets/js/692.85d9e426.js"><link rel="prefetch" href="/assets/js/693.a78b6c7b.js"><link rel="prefetch" href="/assets/js/694.8348e02c.js"><link rel="prefetch" href="/assets/js/695.0bbdae98.js"><link rel="prefetch" href="/assets/js/696.f9dcc8bf.js"><link rel="prefetch" href="/assets/js/697.1c6c7982.js"><link rel="prefetch" href="/assets/js/698.fa867a93.js"><link rel="prefetch" href="/assets/js/699.5ad98f0b.js"><link rel="prefetch" href="/assets/js/7.e86883c6.js"><link rel="prefetch" href="/assets/js/70.d7c0b02d.js"><link rel="prefetch" href="/assets/js/700.da097ba8.js"><link rel="prefetch" href="/assets/js/701.8f40c007.js"><link rel="prefetch" href="/assets/js/702.2ac7cfc8.js"><link rel="prefetch" href="/assets/js/703.e4f83f34.js"><link rel="prefetch" href="/assets/js/704.3230d5d3.js"><link rel="prefetch" href="/assets/js/705.9f2ac56e.js"><link rel="prefetch" href="/assets/js/706.479ef752.js"><link rel="prefetch" href="/assets/js/707.12907b99.js"><link rel="prefetch" href="/assets/js/708.a54c005e.js"><link rel="prefetch" href="/assets/js/709.2f084e72.js"><link rel="prefetch" href="/assets/js/71.c9ef60a6.js"><link rel="prefetch" href="/assets/js/710.992d9298.js"><link rel="prefetch" href="/assets/js/711.3dec9e74.js"><link rel="prefetch" href="/assets/js/712.fbba000f.js"><link rel="prefetch" href="/assets/js/713.644be223.js"><link rel="prefetch" href="/assets/js/714.20e703bd.js"><link rel="prefetch" href="/assets/js/715.7ac51064.js"><link rel="prefetch" href="/assets/js/716.5f8c7487.js"><link rel="prefetch" href="/assets/js/717.cdd46244.js"><link rel="prefetch" href="/assets/js/718.7b7a44e2.js"><link rel="prefetch" href="/assets/js/719.ed06b003.js"><link rel="prefetch" href="/assets/js/72.c23e24e9.js"><link rel="prefetch" href="/assets/js/720.202718be.js"><link rel="prefetch" href="/assets/js/721.1426ef3c.js"><link rel="prefetch" href="/assets/js/722.79f56663.js"><link rel="prefetch" href="/assets/js/723.6dcfa3ed.js"><link rel="prefetch" href="/assets/js/724.4c098acf.js"><link rel="prefetch" href="/assets/js/725.381dd189.js"><link rel="prefetch" href="/assets/js/726.baa6dcfe.js"><link rel="prefetch" href="/assets/js/727.f893500e.js"><link rel="prefetch" href="/assets/js/728.977ee9a0.js"><link rel="prefetch" href="/assets/js/729.3dc27591.js"><link rel="prefetch" href="/assets/js/73.d2b5812c.js"><link rel="prefetch" href="/assets/js/730.e62b3efb.js"><link rel="prefetch" href="/assets/js/731.8b21fd00.js"><link rel="prefetch" href="/assets/js/732.0e4b5daf.js"><link rel="prefetch" href="/assets/js/733.1cc505b4.js"><link rel="prefetch" href="/assets/js/734.55c0fe79.js"><link rel="prefetch" href="/assets/js/735.4eb02d3a.js"><link rel="prefetch" href="/assets/js/736.40c2728a.js"><link rel="prefetch" href="/assets/js/737.73c562f3.js"><link rel="prefetch" href="/assets/js/738.6dd69adf.js"><link rel="prefetch" href="/assets/js/739.af66a4dc.js"><link rel="prefetch" href="/assets/js/74.408525bc.js"><link rel="prefetch" href="/assets/js/740.eff57d99.js"><link rel="prefetch" href="/assets/js/741.7c9b1745.js"><link rel="prefetch" href="/assets/js/742.87bf09be.js"><link rel="prefetch" href="/assets/js/743.fd587ae7.js"><link rel="prefetch" href="/assets/js/744.b207d76b.js"><link rel="prefetch" href="/assets/js/745.5da05a37.js"><link rel="prefetch" href="/assets/js/746.05f0fcc4.js"><link rel="prefetch" href="/assets/js/747.8afc4f80.js"><link rel="prefetch" href="/assets/js/748.a6328657.js"><link rel="prefetch" href="/assets/js/749.488acffe.js"><link rel="prefetch" href="/assets/js/75.d6223e36.js"><link rel="prefetch" href="/assets/js/750.b778f9b2.js"><link rel="prefetch" href="/assets/js/751.046fb057.js"><link rel="prefetch" href="/assets/js/752.4fa1c3ec.js"><link rel="prefetch" href="/assets/js/753.2023ccf5.js"><link rel="prefetch" href="/assets/js/754.68df0df4.js"><link rel="prefetch" href="/assets/js/755.7289134a.js"><link rel="prefetch" href="/assets/js/756.bce7616e.js"><link rel="prefetch" href="/assets/js/757.3403e5f9.js"><link rel="prefetch" href="/assets/js/758.8f0d0bdf.js"><link rel="prefetch" href="/assets/js/759.cdd31702.js"><link rel="prefetch" href="/assets/js/76.f65eed64.js"><link rel="prefetch" href="/assets/js/760.9bfe29ed.js"><link rel="prefetch" href="/assets/js/761.e23339c6.js"><link rel="prefetch" href="/assets/js/762.db375c5b.js"><link rel="prefetch" href="/assets/js/763.8b16c3fe.js"><link rel="prefetch" href="/assets/js/764.f1f4f712.js"><link rel="prefetch" href="/assets/js/765.23e53b3a.js"><link rel="prefetch" href="/assets/js/766.3d3bb3ff.js"><link rel="prefetch" href="/assets/js/767.35ad7cea.js"><link rel="prefetch" href="/assets/js/768.295d1f7a.js"><link rel="prefetch" href="/assets/js/769.2f8fe776.js"><link rel="prefetch" href="/assets/js/77.ec9614b4.js"><link rel="prefetch" href="/assets/js/770.a89ea5e2.js"><link rel="prefetch" href="/assets/js/771.0d2cf3ee.js"><link rel="prefetch" href="/assets/js/772.a10354a4.js"><link rel="prefetch" href="/assets/js/773.ee60e68b.js"><link rel="prefetch" href="/assets/js/774.ba4aad28.js"><link rel="prefetch" href="/assets/js/775.7d35f9cc.js"><link rel="prefetch" href="/assets/js/776.b3ec764c.js"><link rel="prefetch" href="/assets/js/777.c124aefe.js"><link rel="prefetch" href="/assets/js/778.325cfc0e.js"><link rel="prefetch" href="/assets/js/779.d2b575a6.js"><link rel="prefetch" href="/assets/js/78.f56b2037.js"><link rel="prefetch" href="/assets/js/780.218c6b47.js"><link rel="prefetch" href="/assets/js/781.0eac52b7.js"><link rel="prefetch" href="/assets/js/782.79965326.js"><link rel="prefetch" href="/assets/js/783.60892b73.js"><link rel="prefetch" href="/assets/js/784.b8f79fd0.js"><link rel="prefetch" href="/assets/js/785.0528258e.js"><link rel="prefetch" href="/assets/js/786.1dbadb12.js"><link rel="prefetch" href="/assets/js/787.f247b164.js"><link rel="prefetch" href="/assets/js/788.3dd93a34.js"><link rel="prefetch" href="/assets/js/789.7b97a48d.js"><link rel="prefetch" href="/assets/js/79.ed5ad905.js"><link rel="prefetch" href="/assets/js/790.8ceeb0b3.js"><link rel="prefetch" href="/assets/js/791.e926d9a8.js"><link rel="prefetch" href="/assets/js/792.3e5a323a.js"><link rel="prefetch" href="/assets/js/793.43419085.js"><link rel="prefetch" href="/assets/js/794.b8c22345.js"><link rel="prefetch" href="/assets/js/795.7370ff3c.js"><link rel="prefetch" href="/assets/js/796.9509e009.js"><link rel="prefetch" href="/assets/js/797.4a4202c2.js"><link rel="prefetch" href="/assets/js/798.3961cf47.js"><link rel="prefetch" href="/assets/js/799.69707d57.js"><link rel="prefetch" href="/assets/js/8.3fe9535a.js"><link rel="prefetch" href="/assets/js/80.202c3322.js"><link rel="prefetch" href="/assets/js/800.f72c31a2.js"><link rel="prefetch" href="/assets/js/801.2372cb79.js"><link rel="prefetch" href="/assets/js/802.3aefd131.js"><link rel="prefetch" href="/assets/js/803.18443761.js"><link rel="prefetch" href="/assets/js/804.301bf327.js"><link rel="prefetch" href="/assets/js/805.e169a32a.js"><link rel="prefetch" href="/assets/js/806.27cbd296.js"><link rel="prefetch" href="/assets/js/807.b0443249.js"><link rel="prefetch" href="/assets/js/808.91924bc7.js"><link rel="prefetch" href="/assets/js/809.865e8932.js"><link rel="prefetch" href="/assets/js/81.9d064e1c.js"><link rel="prefetch" href="/assets/js/810.28dafb2c.js"><link rel="prefetch" href="/assets/js/811.9248d0a5.js"><link rel="prefetch" href="/assets/js/812.8bb147f8.js"><link rel="prefetch" href="/assets/js/813.57a8a982.js"><link rel="prefetch" href="/assets/js/814.f80c73c9.js"><link rel="prefetch" href="/assets/js/815.2b3d99fc.js"><link rel="prefetch" href="/assets/js/816.4a05e284.js"><link rel="prefetch" href="/assets/js/817.6c8508c2.js"><link rel="prefetch" href="/assets/js/818.c72f5330.js"><link rel="prefetch" href="/assets/js/819.35126624.js"><link rel="prefetch" href="/assets/js/82.210310b3.js"><link rel="prefetch" href="/assets/js/820.d5254c3c.js"><link rel="prefetch" href="/assets/js/821.c69c6b2c.js"><link rel="prefetch" href="/assets/js/822.1ccbb204.js"><link rel="prefetch" href="/assets/js/823.0436449a.js"><link rel="prefetch" href="/assets/js/824.a9d3c6f0.js"><link rel="prefetch" href="/assets/js/825.f9bf8329.js"><link rel="prefetch" href="/assets/js/826.e0d5f786.js"><link rel="prefetch" href="/assets/js/827.cf88e320.js"><link rel="prefetch" href="/assets/js/828.67da7389.js"><link rel="prefetch" href="/assets/js/829.21c2eac1.js"><link rel="prefetch" href="/assets/js/83.d74f6f93.js"><link rel="prefetch" href="/assets/js/830.1eb4ea1b.js"><link rel="prefetch" href="/assets/js/831.6b51565e.js"><link rel="prefetch" href="/assets/js/832.07a20675.js"><link rel="prefetch" href="/assets/js/833.0f7823b8.js"><link rel="prefetch" href="/assets/js/834.27bf9c2e.js"><link rel="prefetch" href="/assets/js/835.409429ce.js"><link rel="prefetch" href="/assets/js/836.28de2c29.js"><link rel="prefetch" href="/assets/js/837.5e7df1f1.js"><link rel="prefetch" href="/assets/js/838.5adc5f6e.js"><link rel="prefetch" href="/assets/js/839.11c3bfc2.js"><link rel="prefetch" href="/assets/js/84.4cf98a31.js"><link rel="prefetch" href="/assets/js/840.65d20fee.js"><link rel="prefetch" href="/assets/js/841.1949a396.js"><link rel="prefetch" href="/assets/js/842.f7a8d098.js"><link rel="prefetch" href="/assets/js/843.65694aa6.js"><link rel="prefetch" href="/assets/js/844.7a62cf9b.js"><link rel="prefetch" href="/assets/js/85.22b95924.js"><link rel="prefetch" href="/assets/js/86.a6f80a36.js"><link rel="prefetch" href="/assets/js/87.3b138e3b.js"><link rel="prefetch" href="/assets/js/88.bb56b7a2.js"><link rel="prefetch" href="/assets/js/89.198a78ff.js"><link rel="prefetch" href="/assets/js/9.59b98557.js"><link rel="prefetch" href="/assets/js/90.d743afe3.js"><link rel="prefetch" href="/assets/js/91.3b6d096c.js"><link rel="prefetch" href="/assets/js/92.a61a93f5.js"><link rel="prefetch" href="/assets/js/93.89cc3bad.js"><link rel="prefetch" href="/assets/js/94.fafb4ea3.js"><link rel="prefetch" href="/assets/js/95.52a52f2e.js"><link rel="prefetch" href="/assets/js/96.82379902.js"><link rel="prefetch" href="/assets/js/97.fb013838.js"><link rel="prefetch" href="/assets/js/98.17d2f72a.js"><link rel="prefetch" href="/assets/js/99.b355b28b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.183d1d00.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-17815e06><header class="navbar" data-v-17815e06><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.png" alt="智能后端和架构" class="logo"> <span class="site-name can-hide">智能后端和架构</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/readguide.html" class="nav-link">
  导读
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java基础" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java语言基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/intro/01-java-intro.html" class="nav-link">
  Java入门介绍
</a></li><li class="dropdown-subitem"><a href="/java/intro/03-java-grammer.html" class="nav-link">
  Java基础语法
</a></li></ul></li><li class="dropdown-item"><h4>
          Java面向对象基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/basic/01-lan-feature.html" class="nav-link">
  语言基础特性
</a></li><li class="dropdown-subitem"><a href="/java/basic/02-oop-feature.html" class="nav-link">
  面向对象特征
</a></li></ul></li><li class="dropdown-item"><h4>
          Java集合类编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/collection/01-intro.html" class="nav-link">
  集合类基础介绍
</a></li><li class="dropdown-subitem"><a href="/java/collection/02-collectionmap.html" class="nav-link">
  集合框架Collction、Map
</a></li></ul></li><li class="dropdown-item"><h4>
          Java文件和网络编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/file/01-intro.html" class="nav-link">
  Java文件IO流入门
</a></li><li class="dropdown-subitem"><a href="/java/net/01-intro.html" class="nav-link">
  Java网络编程入门
</a></li></ul></li><li class="dropdown-item"><h4>
          Java并发编程和JUC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/thread/01-intro.html" class="nav-link">
  Java并发 基础入门
</a></li><li class="dropdown-subitem"><a href="/java/juc/01-intro.html" class="nav-link">
  Java并发 JUC入门
</a></li></ul></li><li class="dropdown-item"><h4>
          Java虚拟机和语言特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/jvm/01-intro.html" class="nav-link">
  Java  虚拟机
</a></li><li class="dropdown-subitem"><a href="/java/characteristic/01-java8.html" class="nav-link">
  Java8 语言特性
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库基础和SQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/intro/01-intro.html" class="nav-link">
  数据库绪论
</a></li><li class="dropdown-subitem"><a href="/db/intro/02-relationdb.html" class="nav-link">
  关系数据库
</a></li><li class="dropdown-subitem"><a href="/db/comsql/01-basicselect.html" class="nav-link">
  基本查询SQL
</a></li><li class="dropdown-subitem"><a href="/db/comsql/02-joinselect.html" class="nav-link">
  连表查询SQL
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL基础和优化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysqlbasic/01-intro.html" class="nav-link">
  入门介绍
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt1/01-solutionsum.html" class="nav-link">
  性能优化方案
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt2/01-districtandtable.html" class="nav-link">
  分区和分表
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt2/05-readwritesepration.html" class="nav-link">
  读写分离介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/redis/01-intro.html" class="nav-link">
  Redis介绍和总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础概念总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/basic/01-basicconcept.html" class="nav-link">
  数据结构基础概念
</a></li><li class="dropdown-subitem"><a href="/algorithm/basic/02-intro.html" class="nav-link">
  算法和数据结构介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/visual/01-commondy.html" class="nav-link">
  常用算法动态展示
</a></li><li class="dropdown-subitem"><a href="/algorithm/visual/04-visualgo.html" class="nav-link">
  visualgo-中文算法展示
</a></li></ul></li><li class="dropdown-item"><h4>
          算法思想总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/thought/01-thoughts8intro.html" class="nav-link">
  八种常用算法思想
</a></li><li class="dropdown-subitem"><a href="/algorithm/thought/02-thoughts5intro.html" class="nav-link">
  五种基本算法思想
</a></li></ul></li><li class="dropdown-item"><h4>
          常用算法总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/search/01-intro.html" class="nav-link">
  常用查找算法-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/sort/01-intro.html" class="nav-link">
  常用排序算法-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/strmatch/01-intro.html" class="nav-link">
  常用字符串匹配-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/encryption/01-intro.html" class="nav-link">
  常用加密解密算法-介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bigdata/intro/01-intro.html" class="nav-link">
  入门知识介绍
</a></li><li class="dropdown-subitem"><a href="/bigdata/techintro/01-intro.html" class="nav-link">
  技术体系介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          数据采集总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dc/intro/01-intro.html" class="nav-link">
  入门知识介绍
</a></li><li class="dropdown-subitem"><a href="/dc/intro/02-diff.html" class="nav-link">
  常用工具比较
</a></li></ul></li><li class="dropdown-item"><h4>
          数据存储总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ds/intro/01-basicintro.html" class="nav-link">
  Hadoop入门介绍
</a></li><li class="dropdown-subitem"><a href="/ds/intro/02-detailintro.html" class="nav-link">
  Hadoop生态介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          数据仓库总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dw/intro/01-intro.html" class="nav-link">
  数据仓库入门介绍
</a></li><li class="dropdown-subitem"><a href="/dw/intro/03-summary.html" class="nav-link">
  数据仓库精华总结
</a></li></ul></li><li class="dropdown-item"><h4>
          数据处理总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dp/mr/01-intro.html" class="nav-link">
  MapReduce-入门介绍
</a></li><li class="dropdown-subitem"><a href="/dp/mr/02-basicprin.html" class="nav-link">
  MapReduce-工作原理
</a></li></ul></li><li class="dropdown-item"><h4>
          数据应用总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/da/intro/01-intro.html" class="nav-link">
  大数据应用场景基础介绍
</a></li><li class="dropdown-subitem"><a href="/dm/intro/01-intro.html" class="nav-link">
  大数据数据挖掘基础介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ai/intro/01-intro.html" class="nav-link">
  人工智能基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlintro/01-intro.html" class="nav-link">
  机器学习基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/dlintro/01-intro.html" class="nav-link">
  深度学习基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/nnprin/01-intro.html" class="nav-link">
  神经网络原理介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlalgorithm/01-intro.html" class="nav-link">
  机器学习算法介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlmath/01-intro.html" class="nav-link">
  机器学习数学介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          开发框架总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ad/intro/01-intro.html" class="nav-link">
  主流-AI开源开发框架介绍
</a></li><li class="dropdown-subitem"><a href="/ad/dl4jintro/01-intro.html" class="nav-link">
  JAVA-AI开发框架Dl4j介绍
</a></li><li class="dropdown-subitem"><a href="/ad/pytorch/01-intro.html" class="nav-link">
  AI开发框架-Pytorch介绍
</a></li><li class="dropdown-subitem"><a href="/ad/tensorflow/01-intro.html" class="nav-link">
  AI开发框架-TensorFlow介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          开发应用案例
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ac/intro/01-intro.html" class="nav-link">
  AI常见案例和趋势介绍
</a></li><li class="dropdown-subitem"><a href="/ac/rsintro/01-intro.html" class="nav-link">
  AI应用案例-推荐系统介绍
</a></li><li class="dropdown-subitem"><a href="/ac/aicity/01-intro.html" class="nav-link">
  AI应用案例-智慧城市介绍
</a></li><li class="dropdown-subitem"><a href="/ac/aibigscreen/01-intro.html" class="nav-link">
  AI应用案例-智慧大屏介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Spring基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/basic/01-intro.html" class="nav-link">
  Spring-入门介绍
</a></li><li class="dropdown-subitem"><a href="/spring/basic/02-iocaopintro.html" class="nav-link">
  IOC和AOP-原理介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springmvc/01-intro.html" class="nav-link">
  SpringMVC-入门介绍
</a></li><li class="dropdown-subitem"><a href="/spring/springmvc/02-prinintro.html" class="nav-link">
  SpringMVC-工作原理介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springboot/03-workprin.html" class="nav-link">
  SpringBoot-工作原理
</a></li><li class="dropdown-subitem"><a href="/spring/springboot/06-startprincodeanalysis.html" class="nav-link">
  启动原理分析和源码解读
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring注解总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/annotation/03-springannprin.html" class="nav-link">
  Spring注解实现原理
</a></li><li class="dropdown-subitem"><a href="/spring/annotation/04-anntotal1.html" class="nav-link">
  Spring注解大全(一)
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringCloud知识介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springcloud/01-intro.html" class="nav-link">
  SpringCloud-基础介绍
</a></li><li class="dropdown-subitem"><a href="/spring/springcloud/03-prindetail.html" class="nav-link">
  SpringCloud-原理详解
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架基础总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/basic/01-intro.html" class="nav-link">
  框架基础知识介绍
</a></li><li class="dropdown-subitem"><a href="/framework/basic/02-commconceptdiff.html" class="nav-link">
  框架架构组件区别
</a></li><li class="dropdown-subitem"><a href="/framework/basic/03-commconceptrela.html" class="nav-link">
  框架架构组件关系
</a></li><li class="dropdown-subitem"><a href="/framework/basic/06-microserv15.html" class="nav-link">
  常见15种微服务框架
</a></li><li class="dropdown-subitem"><a href="/framework/basic/07-springframethink.html" class="nav-link">
  Spring框架思想总结
</a></li></ul></li><li class="dropdown-item"><h4>
          常用框架总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/log/01-intro.html" class="nav-link">
  日志框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/orm/01-intro.html" class="nav-link">
  ORM框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/nio/01-intro.html" class="nav-link">
  NIO框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/netty/01-intro.html" class="nav-link">
  Netty框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/nettycase/01-intro.html" class="nav-link">
  Netty案例-介绍和总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          架构基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/basic/01-intro.html" class="nav-link">
  架构基础知识介绍
</a></li><li class="dropdown-subitem"><a href="/architecture/basic/02-essence.html" class="nav-link">
  架构基本概念和本质
</a></li><li class="dropdown-subitem"><a href="/architecture/microservanddistribute/01-intro.html" class="nav-link">
  微服务架构知识介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/tool/01-intro.html" class="nav-link">
  Java开发工具介绍
</a></li><li class="dropdown-subitem"><a href="/dev/tool/05-idea20recommendedplug.html" class="nav-link">
  Idea开发插件推荐
</a></li></ul></li><li class="dropdown-item"><h4>
          开发规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/standard/01-intro.html" class="nav-link">
  Java开发规范
</a></li><li class="dropdown-subitem"><a href="/dev/designpattern/01-intro.html" class="nav-link">
  Java设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          开发效率
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/deveffciency/02-commpromethods.html" class="nav-link">
  效率提升常用方法
</a></li><li class="dropdown-subitem"><a href="/dev/deveffciency/09-summary.html" class="nav-link">
  效率提升精华总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">综合</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">综合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          中间件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/middleware/mq/01-intro.html" class="nav-link">
  MQ消息队列介绍
</a></li><li class="dropdown-subitem"><a href="/es/basic/01-intro.html" class="nav-link">
  ES搜索服务器介绍
</a></li><li class="dropdown-subitem"><a href="/middleware/zookeeper/01-intro.html" class="nav-link">
  Zookeeper介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          综合技能
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysqlop/basic/01-intro.html" class="nav-link">
  MySQL运维总结
</a></li><li class="dropdown-subitem"><a href="/operation/linux/01-intro.html" class="nav-link">
  Linux常用命令
</a></li><li class="dropdown-subitem"><a href="/operation/ng/05-ngsum.html" class="nav-link">
  Nginx使用总结
</a></li><li class="dropdown-subitem"><a href="/post/javabasic/01-javabasic.html" class="nav-link">
  求职面试整理
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">项目|产品</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">项目|产品</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          研发效能介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projprod/rdefficiencyintro/01-intro.html" class="nav-link">
  研发效能入门介绍
</a></li><li class="dropdown-subitem"><a href="/projprod/rdefficiencyintro/06-efficiencysystem.html" class="nav-link">
  研发效能体系构建
</a></li></ul></li><li class="dropdown-item"><h4>
          研发效能提升
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projprod/rdeffciencypromote/09-summary.html" class="nav-link">
  研发效能提升精华总结
</a></li><li class="dropdown-subitem"><a href="/projprod/rdeffciencytool/01-intro.html" class="nav-link">
  研发效能系统管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/aboutme.html" class="nav-link">
  关于
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-17815e06></div> <aside class="sidebar" data-v-17815e06><nav class="nav-links"><div class="nav-item"><a href="/readguide.html" class="nav-link">
  导读
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java基础" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java基础" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Java语言基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/intro/01-java-intro.html" class="nav-link">
  Java入门介绍
</a></li><li class="dropdown-subitem"><a href="/java/intro/03-java-grammer.html" class="nav-link">
  Java基础语法
</a></li></ul></li><li class="dropdown-item"><h4>
          Java面向对象基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/basic/01-lan-feature.html" class="nav-link">
  语言基础特性
</a></li><li class="dropdown-subitem"><a href="/java/basic/02-oop-feature.html" class="nav-link">
  面向对象特征
</a></li></ul></li><li class="dropdown-item"><h4>
          Java集合类编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/collection/01-intro.html" class="nav-link">
  集合类基础介绍
</a></li><li class="dropdown-subitem"><a href="/java/collection/02-collectionmap.html" class="nav-link">
  集合框架Collction、Map
</a></li></ul></li><li class="dropdown-item"><h4>
          Java文件和网络编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/file/01-intro.html" class="nav-link">
  Java文件IO流入门
</a></li><li class="dropdown-subitem"><a href="/java/net/01-intro.html" class="nav-link">
  Java网络编程入门
</a></li></ul></li><li class="dropdown-item"><h4>
          Java并发编程和JUC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/thread/01-intro.html" class="nav-link">
  Java并发 基础入门
</a></li><li class="dropdown-subitem"><a href="/java/juc/01-intro.html" class="nav-link">
  Java并发 JUC入门
</a></li></ul></li><li class="dropdown-item"><h4>
          Java虚拟机和语言特性
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/jvm/01-intro.html" class="nav-link">
  Java  虚拟机
</a></li><li class="dropdown-subitem"><a href="/java/characteristic/01-java8.html" class="nav-link">
  Java8 语言特性
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          数据库基础和SQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/intro/01-intro.html" class="nav-link">
  数据库绪论
</a></li><li class="dropdown-subitem"><a href="/db/intro/02-relationdb.html" class="nav-link">
  关系数据库
</a></li><li class="dropdown-subitem"><a href="/db/comsql/01-basicselect.html" class="nav-link">
  基本查询SQL
</a></li><li class="dropdown-subitem"><a href="/db/comsql/02-joinselect.html" class="nav-link">
  连表查询SQL
</a></li></ul></li><li class="dropdown-item"><h4>
          MySQL基础和优化
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/mysqlbasic/01-intro.html" class="nav-link">
  入门介绍
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt1/01-solutionsum.html" class="nav-link">
  性能优化方案
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt2/01-districtandtable.html" class="nav-link">
  分区和分表
</a></li><li class="dropdown-subitem"><a href="/db/mysqlopt2/05-readwritesepration.html" class="nav-link">
  读写分离介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          NoSQL数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/db/redis/01-intro.html" class="nav-link">
  Redis介绍和总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础概念总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/basic/01-basicconcept.html" class="nav-link">
  数据结构基础概念
</a></li><li class="dropdown-subitem"><a href="/algorithm/basic/02-intro.html" class="nav-link">
  算法和数据结构介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/visual/01-commondy.html" class="nav-link">
  常用算法动态展示
</a></li><li class="dropdown-subitem"><a href="/algorithm/visual/04-visualgo.html" class="nav-link">
  visualgo-中文算法展示
</a></li></ul></li><li class="dropdown-item"><h4>
          算法思想总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/thought/01-thoughts8intro.html" class="nav-link">
  八种常用算法思想
</a></li><li class="dropdown-subitem"><a href="/algorithm/thought/02-thoughts5intro.html" class="nav-link">
  五种基本算法思想
</a></li></ul></li><li class="dropdown-item"><h4>
          常用算法总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/search/01-intro.html" class="nav-link">
  常用查找算法-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/sort/01-intro.html" class="nav-link">
  常用排序算法-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/strmatch/01-intro.html" class="nav-link">
  常用字符串匹配-介绍
</a></li><li class="dropdown-subitem"><a href="/algorithm/encryption/01-intro.html" class="nav-link">
  常用加密解密算法-介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">大数据</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">大数据</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bigdata/intro/01-intro.html" class="nav-link">
  入门知识介绍
</a></li><li class="dropdown-subitem"><a href="/bigdata/techintro/01-intro.html" class="nav-link">
  技术体系介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          数据采集总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dc/intro/01-intro.html" class="nav-link">
  入门知识介绍
</a></li><li class="dropdown-subitem"><a href="/dc/intro/02-diff.html" class="nav-link">
  常用工具比较
</a></li></ul></li><li class="dropdown-item"><h4>
          数据存储总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ds/intro/01-basicintro.html" class="nav-link">
  Hadoop入门介绍
</a></li><li class="dropdown-subitem"><a href="/ds/intro/02-detailintro.html" class="nav-link">
  Hadoop生态介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          数据仓库总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dw/intro/01-intro.html" class="nav-link">
  数据仓库入门介绍
</a></li><li class="dropdown-subitem"><a href="/dw/intro/03-summary.html" class="nav-link">
  数据仓库精华总结
</a></li></ul></li><li class="dropdown-item"><h4>
          数据处理总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dp/mr/01-intro.html" class="nav-link">
  MapReduce-入门介绍
</a></li><li class="dropdown-subitem"><a href="/dp/mr/02-basicprin.html" class="nav-link">
  MapReduce-工作原理
</a></li></ul></li><li class="dropdown-item"><h4>
          数据应用总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/da/intro/01-intro.html" class="nav-link">
  大数据应用场景基础介绍
</a></li><li class="dropdown-subitem"><a href="/dm/intro/01-intro.html" class="nav-link">
  大数据数据挖掘基础介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">人工智能</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">人工智能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ai/intro/01-intro.html" class="nav-link">
  人工智能基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlintro/01-intro.html" class="nav-link">
  机器学习基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/dlintro/01-intro.html" class="nav-link">
  深度学习基础介绍
</a></li><li class="dropdown-subitem"><a href="/ai/nnprin/01-intro.html" class="nav-link">
  神经网络原理介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlalgorithm/01-intro.html" class="nav-link">
  机器学习算法介绍
</a></li><li class="dropdown-subitem"><a href="/ai/mlmath/01-intro.html" class="nav-link">
  机器学习数学介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          开发框架总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ad/intro/01-intro.html" class="nav-link">
  主流-AI开源开发框架介绍
</a></li><li class="dropdown-subitem"><a href="/ad/dl4jintro/01-intro.html" class="nav-link">
  JAVA-AI开发框架Dl4j介绍
</a></li><li class="dropdown-subitem"><a href="/ad/pytorch/01-intro.html" class="nav-link">
  AI开发框架-Pytorch介绍
</a></li><li class="dropdown-subitem"><a href="/ad/tensorflow/01-intro.html" class="nav-link">
  AI开发框架-TensorFlow介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          开发应用案例
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/ac/intro/01-intro.html" class="nav-link">
  AI常见案例和趋势介绍
</a></li><li class="dropdown-subitem"><a href="/ac/rsintro/01-intro.html" class="nav-link">
  AI应用案例-推荐系统介绍
</a></li><li class="dropdown-subitem"><a href="/ac/aicity/01-intro.html" class="nav-link">
  AI应用案例-智慧城市介绍
</a></li><li class="dropdown-subitem"><a href="/ac/aibigscreen/01-intro.html" class="nav-link">
  AI应用案例-智慧大屏介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Spring</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Spring</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Spring基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/basic/01-intro.html" class="nav-link">
  Spring-入门介绍
</a></li><li class="dropdown-subitem"><a href="/spring/basic/02-iocaopintro.html" class="nav-link">
  IOC和AOP-原理介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springmvc/01-intro.html" class="nav-link">
  SpringMVC-入门介绍
</a></li><li class="dropdown-subitem"><a href="/spring/springmvc/02-prinintro.html" class="nav-link">
  SpringMVC-工作原理介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springboot/03-workprin.html" class="nav-link">
  SpringBoot-工作原理
</a></li><li class="dropdown-subitem"><a href="/spring/springboot/06-startprincodeanalysis.html" class="nav-link">
  启动原理分析和源码解读
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring注解总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/annotation/03-springannprin.html" class="nav-link">
  Spring注解实现原理
</a></li><li class="dropdown-subitem"><a href="/spring/annotation/04-anntotal1.html" class="nav-link">
  Spring注解大全(一)
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringCloud知识介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/spring/springcloud/01-intro.html" class="nav-link">
  SpringCloud-基础介绍
</a></li><li class="dropdown-subitem"><a href="/spring/springcloud/03-prindetail.html" class="nav-link">
  SpringCloud-原理详解
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          框架基础总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/basic/01-intro.html" class="nav-link">
  框架基础知识介绍
</a></li><li class="dropdown-subitem"><a href="/framework/basic/02-commconceptdiff.html" class="nav-link">
  框架架构组件区别
</a></li><li class="dropdown-subitem"><a href="/framework/basic/03-commconceptrela.html" class="nav-link">
  框架架构组件关系
</a></li><li class="dropdown-subitem"><a href="/framework/basic/06-microserv15.html" class="nav-link">
  常见15种微服务框架
</a></li><li class="dropdown-subitem"><a href="/framework/basic/07-springframethink.html" class="nav-link">
  Spring框架思想总结
</a></li></ul></li><li class="dropdown-item"><h4>
          常用框架总结
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/framework/log/01-intro.html" class="nav-link">
  日志框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/orm/01-intro.html" class="nav-link">
  ORM框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/nio/01-intro.html" class="nav-link">
  NIO框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/netty/01-intro.html" class="nav-link">
  Netty框架-介绍和总结
</a></li><li class="dropdown-subitem"><a href="/framework/nettycase/01-intro.html" class="nav-link">
  Netty案例-介绍和总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">架构</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">架构</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          架构基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/architecture/basic/01-intro.html" class="nav-link">
  架构基础知识介绍
</a></li><li class="dropdown-subitem"><a href="/architecture/basic/02-essence.html" class="nav-link">
  架构基本概念和本质
</a></li><li class="dropdown-subitem"><a href="/architecture/microservanddistribute/01-intro.html" class="nav-link">
  微服务架构知识介绍
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          开发工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/tool/01-intro.html" class="nav-link">
  Java开发工具介绍
</a></li><li class="dropdown-subitem"><a href="/dev/tool/05-idea20recommendedplug.html" class="nav-link">
  Idea开发插件推荐
</a></li></ul></li><li class="dropdown-item"><h4>
          开发规范
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/standard/01-intro.html" class="nav-link">
  Java开发规范
</a></li><li class="dropdown-subitem"><a href="/dev/designpattern/01-intro.html" class="nav-link">
  Java设计模式
</a></li></ul></li><li class="dropdown-item"><h4>
          开发效率
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/dev/deveffciency/02-commpromethods.html" class="nav-link">
  效率提升常用方法
</a></li><li class="dropdown-subitem"><a href="/dev/deveffciency/09-summary.html" class="nav-link">
  效率提升精华总结
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">综合</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">综合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          中间件
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/middleware/mq/01-intro.html" class="nav-link">
  MQ消息队列介绍
</a></li><li class="dropdown-subitem"><a href="/es/basic/01-intro.html" class="nav-link">
  ES搜索服务器介绍
</a></li><li class="dropdown-subitem"><a href="/middleware/zookeeper/01-intro.html" class="nav-link">
  Zookeeper介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          综合技能
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysqlop/basic/01-intro.html" class="nav-link">
  MySQL运维总结
</a></li><li class="dropdown-subitem"><a href="/operation/linux/01-intro.html" class="nav-link">
  Linux常用命令
</a></li><li class="dropdown-subitem"><a href="/operation/ng/05-ngsum.html" class="nav-link">
  Nginx使用总结
</a></li><li class="dropdown-subitem"><a href="/post/javabasic/01-javabasic.html" class="nav-link">
  求职面试整理
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">项目|产品</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">项目|产品</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          研发效能介绍
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projprod/rdefficiencyintro/01-intro.html" class="nav-link">
  研发效能入门介绍
</a></li><li class="dropdown-subitem"><a href="/projprod/rdefficiencyintro/06-efficiencysystem.html" class="nav-link">
  研发效能体系构建
</a></li></ul></li><li class="dropdown-item"><h4>
          研发效能提升
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projprod/rdeffciencypromote/09-summary.html" class="nav-link">
  研发效能提升精华总结
</a></li><li class="dropdown-subitem"><a href="/projprod/rdeffciencytool/01-intro.html" class="nav-link">
  研发效能系统管理工具
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/aboutme.html" class="nav-link">
  关于
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-概念介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/intro/01-intro.html" class="sidebar-link">数据仓库-基础介绍</a></li><li><a href="/dw/intro/02-basicarchi.html" class="sidebar-link">数据仓库-基础结构</a></li><li><a href="/dw/intro/03-summary.html" class="sidebar-link">数据仓库-精华总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>大数据仓库-Hive总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/hive/01-intro.html" class="sidebar-link">Hive-基础入门介绍</a></li><li><a href="/dw/hive/02-basicarchi.html" class="sidebar-link">Hive-基础知识总结</a></li><li><a href="/dw/hive/03-basiclianzai.html" class="sidebar-link">Hive-基础知识连载</a></li><li><a href="/dw/hive/04-storageandcompression.html" class="sidebar-link">Hive-存储和压缩</a></li><li><a href="/dw/hive/05-hivesql.html" aria-current="page" class="active sidebar-link">Hive-HiveSQL总结</a></li><li><a href="/dw/hive/06-hiveexplainplan.html" class="sidebar-link">Hive-HiveSQL执行计划</a></li><li><a href="/dw/hive/07-hivesqlexecprin.html" class="sidebar-link">Hive-HiveSQL执行原理</a></li><li><a href="/dw/hive/08-hivedataskew.html" class="sidebar-link">Hive-千亿级数据倾斜</a></li><li><a href="/dw/hive/09-hiveenterpriselevelopt.html" class="sidebar-link">Hive-企业级性能优化</a></li><li><a href="/dw/hive/10-hivesqlexecsourcecode.html" class="sidebar-link">Hive-HiveSQL流程源码分析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-Hive优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/hiveopt/01-optbasic.html" class="sidebar-link">Hive优化-12种常用方式</a></li><li><a href="/dw/hiveopt/02-optstrategy.html" class="sidebar-link">Hive优化-优化策略总结</a></li><li><a href="/dw/hiveopt/03-commonoptmethods.html" class="sidebar-link">Hive优化-常用优化方法</a></li><li><a href="/dw/hiveopt/04-optsummary1.html" class="sidebar-link">Hive优化-汇总精华总结(一)</a></li><li><a href="/dw/hiveopt/05-optsummary2.html" class="sidebar-link">Hive优化-汇总精华总结(二)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-Pig介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/pig/01-intro.html" class="sidebar-link">Pig-基础信息介绍</a></li><li><a href="/dw/pig/02-basicprin.html" class="sidebar-link">Pig-基础原理总结</a></li><li><a href="/dw/pig/03-summary.html" class="sidebar-link">Pig-基础知识总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-ClickHouse介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/clickhouse/01-intro.html" class="sidebar-link">ClickHouse-基础介绍</a></li><li><a href="/dw/clickhouse/02-summaryintro.html" class="sidebar-link">ClickHouse-基础总结</a></li><li><a href="/dw/clickhouse/03-caseintro.html" class="sidebar-link">ClickHouse-案例介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-CDH介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/cdh/01-cdhintro.html" class="sidebar-link">CDH-基础介绍</a></li><li><a href="/dw/cdh/02-cmintroandinstall.html" class="sidebar-link">CDH-CM基础介绍</a></li><li><a href="/dw/cdh/03-summarycase.html" class="sidebar-link">CDH-安装案例总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大数据仓库-Ambari介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dw/ambari/01-introandinstall.html" class="sidebar-link">Ambari-介绍和安装</a></li><li><a href="/dw/ambari/02-installcase.html" class="sidebar-link">Ambari-集群安装攻略</a></li><li><a href="/dw/ambari/03-diff.html" class="sidebar-link">Ambari-和CDH的区别</a></li></ul></section></li></ul> </aside> <main class="page page-content-spec" data-v-17815e06><div class="page_article_title_info" data-v-17815e06><div class="page_content_title" data-v-17815e06>Hive-HiveSQL总结</div> <div class="page_content_visit" data-v-17815e06><span data-v-17815e06>更新时间</span> <span style="display:none;" data-v-17815e06>2021-09-07 18:30:09</span>
            
          <span data-v-17815e06>浏览</span> <span style="display:none;" data-v-17815e06>0</span>
            

        </div></div>  <div class="theme-default-content content__default"><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>本文主要是介绍 Hive-HiveSQL总结 。</p></div> <p></p><div class="table-of-contents"><ul><li><a href="#hivesql总结">HiveSQL总结</a></li><li><a href="#hive的ddl语法">hive的DDL语法</a></li><li><a href="#对数据库的操作">对数据库的操作</a><ul><li><a href="#创建数据库">创建数据库:</a></li><li><a href="#修改数据库">修改数据库:</a></li><li><a href="#查看数据库详细信息">查看数据库详细信息</a></li><li><a href="#删除数据库">删除数据库</a></li></ul></li><li><a href="#对数据表的操作">对数据表的操作</a></li><li><a href="#建内部表">建内部表:</a><ul><li><a href="#hive建表时候的字段类型">hive建表时候的字段类型:</a></li><li><a href="#创建表并指定字段之间的分隔符">创建表并指定字段之间的分隔符</a></li><li><a href="#根据查询结果创建表">根据查询结果创建表</a></li><li><a href="#根据已经存在的表结构创建表">根据已经存在的表结构创建表</a></li><li><a href="#查询表的结构">查询表的结构</a></li><li><a href="#查询创建表的语句">查询创建表的语句</a></li></ul></li><li><a href="#对外部表操作">对外部表操作</a><ul><li><a href="#构建外部表">构建外部表</a></li><li><a href="#从本地文件系统向表中加载数据">从本地文件系统向表中加载数据</a></li><li><a href="#从hdfs文件系统向表中加载数据">从hdfs文件系统向表中加载数据</a></li></ul></li><li><a href="#对分区表的操作">对分区表的操作</a><ul><li><a href="#创建分区表的语法">创建分区表的语法</a></li><li><a href="#创建一个表带多个分区">创建一个表带多个分区</a></li><li><a href="#加载数据到一个分区的表中">加载数据到一个分区的表中</a></li><li><a href="#加载数据到一个多分区的表中去">加载数据到一个多分区的表中去</a></li><li><a href="#查看分区">查看分区</a></li><li><a href="#添加一个分区">添加一个分区</a></li><li><a href="#同时添加多个分区">同时添加多个分区</a></li><li><a href="#删除分区">删除分区</a></li></ul></li><li><a href="#对分桶表操作">对分桶表操作</a><ul><li><a href="#开启hive的捅表功能">开启hive的捅表功能</a></li><li><a href="#设置reduce的个数">设置reduce的个数</a></li><li><a href="#创建桶表">创建桶表</a></li><li><a href="#通过insert-overwrite给桶表中加载数据">通过insert  overwrite给桶表中加载数据</a></li><li><a href="#修改表名称">修改表名称</a></li><li><a href="#增加-修改列信息">增加/修改列信息</a></li><li><a href="#删除表操作">删除表操作</a></li><li><a href="#清空表操作">清空表操作</a></li><li><a href="#直接向分区表中插入数据">直接向分区表中插入数据</a></li><li><a href="#通过load方式加载数据">通过load方式加载数据</a></li><li><a href="#通过查询方式加载数据">通过查询方式加载数据</a></li><li><a href="#查询语句中创建表并加载数据">查询语句中创建表并加载数据</a></li><li><a href="#在创建表是通过location指定加载数据的路径">在创建表是通过location指定加载数据的路径</a></li><li><a href="#export导出与import-导入-hive表数据-内部表操作">export导出与import 导入 hive表数据（内部表操作）</a></li></ul></li><li><a href="#hive表中数据导出">hive表中数据导出</a><ul><li><a href="#insert导出">insert导出</a></li><li><a href="#hadoop命令导出到本地">Hadoop命令导出到本地</a></li><li><a href="#hive-shell-命令导出">hive shell 命令导出</a></li><li><a href="#export导出到hdfs上">export导出到HDFS上</a></li></ul></li><li><a href="#hive的dql查询语法">hive的DQL查询语法</a><ul><li><a href="#单表查询">单表查询</a></li><li><a href="#where语句">WHERE语句</a></li><li><a href="#group-by-分组">GROUP BY 分组</a></li><li><a href="#join-连接">join 连接</a></li><li><a href="#order-by-排序">order by 排序</a></li><li><a href="#sort-by-局部排序">sort by 局部排序</a></li><li><a href="#cluster-by">cluster by</a></li></ul></li><li><a href="#hive函数">Hive函数</a><ul><li><a href="#聚合函数">聚合函数</a></li><li><a href="#关系运算">关系运算</a></li><li><a href="#数学运算">数学运算</a></li><li><a href="#逻辑运算">逻辑运算</a></li><li><a href="#数值运算">数值运算</a></li><li><a href="#条件函数">条件函数</a></li><li><a href="#日期函数">日期函数</a></li><li><a href="#字符串函数">字符串函数</a></li><li><a href="#复合类型构建操作">复合类型构建操作</a></li><li><a href="#复杂类型访问操作">复杂类型访问操作</a></li><li><a href="#复杂类型长度统计函数">复杂类型长度统计函数</a></li></ul></li><li><a href="#hive当中的lateral-view-与-explode以及reflect和窗口函数">hive当中的lateral view 与 explode以及reflect和窗口函数</a><ul><li><a href="#使用explode函数将hive表中的map和array字段数据进行拆分">使用explode函数将hive表中的Map和Array字段数据进行拆分</a></li><li><a href="#使用explode拆分json字符串">使用explode拆分json字符串</a></li><li><a href="#配合lateral-view使用">配合LATERAL  VIEW使用</a></li><li><a href="#行转列">行转列</a></li><li><a href="#列转行">列转行</a></li><li><a href="#reflect函数">reflect函数</a></li></ul></li><li><a href="#窗口函数与分析函数">窗口函数与分析函数</a><ul><li><a href="#sum、avg、min、max">sum、avg、min、max</a></li><li><a href="#row-number、rank、dense-rank、ntile">rownumber、rank、denserank、ntile</a></li></ul></li><li><a href="#其他一些窗口函数">其他一些窗口函数</a><ul><li><a href="#lag-lead-first-value-last-value">lag,lead,firstvalue,lastvalue</a></li><li><a href="#cume-dist-percent-rank">cumedist,percentrank</a></li><li><a href="#grouping-sets-grouping-id-cube-rollup">grouping sets,grouping__id,cube,rollup</a></li></ul></li><li><a href="#参考文章">参考文章</a></li></ul></div><p></p> <blockquote><p>本节基本涵盖了Hive日常使用的所有SQL，因为SQL太多，所以将SQL进行了如下分类：一、DDL语句（数据定义语句）：
对数据库的操作：包含创建、修改数据库
对数据表的操作：分为内部表及外部表，分区表和分桶表
二、DQL语句（数据查询语句）：
单表查询、关联查询
hive函数：包含聚合函数，条件函数，日期函数，字符串函数等
行转列及列转行：lateral view 与 explode 以及 reflect
窗口函数与分析函数
其他一些窗口函数</p></blockquote> <h2 id="hivesql总结"><a href="#hivesql总结" class="header-anchor">#</a> HiveSQL总结</h2> <h2 id="hive的ddl语法"><a href="#hive的ddl语法" class="header-anchor">#</a> hive的DDL语法</h2> <h2 id="对数据库的操作"><a href="#对数据库的操作" class="header-anchor">#</a> 对数据库的操作</h2> <h3 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库:</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> myhive<span class="token punctuation">;</span>
说明：hive的表存放位置模式是由hive<span class="token operator">-</span>site<span class="token punctuation">.</span>xml当中的一个属性指定的 :hive<span class="token punctuation">.</span>metastore<span class="token punctuation">.</span>warehouse<span class="token punctuation">.</span>dir
 
创建数据库并指定hdfs存储位置 :
<span class="token keyword">create</span> <span class="token keyword">database</span> myhive2 location <span class="token string">'/myhive2'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="修改数据库"><a href="#修改数据库" class="header-anchor">#</a> 修改数据库:</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span>  <span class="token keyword">database</span>  myhive2  <span class="token keyword">set</span>  dbproperties<span class="token punctuation">(</span><span class="token string">'createtime'</span><span class="token operator">=</span><span class="token string">'20210329'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>说明：可以使用alter  database 命令来修改数据库的一些属性。但是数据库的元数据信息是不可更改的，包括数据库的名称以及数据库所在的位置</p></blockquote> <h3 id="查看数据库详细信息"><a href="#查看数据库详细信息" class="header-anchor">#</a> 查看数据库详细信息</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>查看数据库基本信息
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">desc</span>  <span class="token keyword">database</span>  myhive2<span class="token punctuation">;</span>
 
查看数据库更多详细信息
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">desc</span> <span class="token keyword">database</span> <span class="token keyword">extended</span>  myhive2<span class="token punctuation">;</span>
</code></pre></div><h3 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>删除一个空数据库，如果数据库下面有数据表，那么就会报错
<span class="token keyword">drop</span>  <span class="token keyword">database</span>  myhive2<span class="token punctuation">;</span>
 
强制删除数据库，包含数据库下面的表一起删除
<span class="token keyword">drop</span>  <span class="token keyword">database</span>  myhive  <span class="token keyword">cascade</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="对数据表的操作"><a href="#对数据表的操作" class="header-anchor">#</a> 对数据表的操作</h2> <p>对管理表(内部表)的操作:</p> <h2 id="建内部表"><a href="#建内部表" class="header-anchor">#</a> 建内部表:</h2> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">use</span> myhive<span class="token punctuation">;</span> <span class="token comment">-- 使用myhive数据库</span>
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>name string<span class="token punctuation">)</span><span class="token punctuation">;</span>
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 一次插入多条数据</span>
hive <span class="token punctuation">(</span>myhive<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>
</code></pre></div><h3 id="hive建表时候的字段类型"><a href="#hive建表时候的字段类型" class="header-anchor">#</a> hive建表时候的字段类型:</h3> <table><thead><tr><th style="text-align:left;"><strong>分类</strong></th> <th style="text-align:left;"><strong>类型</strong></th> <th style="text-align:left;"><strong>描述</strong></th> <th style="text-align:left;"><strong>字面量示例</strong></th></tr></thead> <tbody><tr><td style="text-align:left;">原始类型</td> <td style="text-align:left;">BOOLEAN</td> <td style="text-align:left;">true/false</td> <td style="text-align:left;">TRUE</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">TINYINT</td> <td style="text-align:left;">1字节的有符号整数 -128~127</td> <td style="text-align:left;">1Y</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">SMALLINT</td> <td style="text-align:left;">2个字节的有符号整数，-32768~32767</td> <td style="text-align:left;">1S</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;"><strong>INT</strong></td> <td style="text-align:left;">4个字节的带符号整数</td> <td style="text-align:left;">1</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">BIGINT</td> <td style="text-align:left;">8字节带符号整数</td> <td style="text-align:left;">1L</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">FLOAT</td> <td style="text-align:left;">4字节单精度浮点数1.0</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">DOUBLE</td> <td style="text-align:left;">8字节双精度浮点数</td> <td style="text-align:left;">1.0</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">DEICIMAL</td> <td style="text-align:left;">任意精度的带符号小数</td> <td style="text-align:left;">1.0</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;"><strong>STRING</strong></td> <td style="text-align:left;">字符串，变长</td> <td style="text-align:left;">“a”,’b’</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">VARCHAR</td> <td style="text-align:left;">变长字符串</td> <td style="text-align:left;">“a”,’b’</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">CHAR</td> <td style="text-align:left;">固定长度字符串</td> <td style="text-align:left;">“a”,’b’</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">BINARY</td> <td style="text-align:left;">字节数组</td> <td style="text-align:left;">无法表示</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">TIMESTAMP</td> <td style="text-align:left;">时间戳，毫秒值精度</td> <td style="text-align:left;">122327493795</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;"><strong>DATE</strong></td> <td style="text-align:left;">日期</td> <td style="text-align:left;">‘2016-03-29’</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">INTERVAL</td> <td style="text-align:left;">时间频率间隔</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">复杂类型</td> <td style="text-align:left;">ARRAY</td> <td style="text-align:left;">有序的的同类型的集合</td> <td style="text-align:left;">array(1,2)</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">MAP</td> <td style="text-align:left;">key-value,key必须为原始类型，value可以任意类型</td> <td style="text-align:left;">map(‘a’,1,’b’,2)</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">STRUCT</td> <td style="text-align:left;">字段集合,类型可以不同</td> <td style="text-align:left;">struct(‘1’,1,1.0), named_stract(‘col1’,’1’,’col2’,1,’clo3’,1.0)</td></tr> <tr><td style="text-align:left;"></td> <td style="text-align:left;">UNION</td> <td style="text-align:left;">在有限取值范围内的一个值</td> <td style="text-align:left;">create_union(1,’a’,63)</td></tr></tbody></table> <blockquote><p><strong>对decimal类型简单解释下</strong>：
用法：decimal(11,2) 代表最多有11位数字，其中后2位是小数，整数部分是9位；如果整数部分超过9位，则这个字段就会变成null；如果小数部分不足2位，则后面用0补齐两位，如果小数部分超过两位，则超出部分四舍五入
也可直接写 decimal，后面不指定位数，默认是 decimal(10,0)  整数10位，没有小数</p></blockquote> <h3 id="创建表并指定字段之间的分隔符"><a href="#创建表并指定字段之间的分隔符" class="header-anchor">#</a> 创建表并指定字段之间的分隔符</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span>  <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> stu2<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token punctuation">,</span>name string<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> stored <span class="token keyword">as</span> textfile location <span class="token string">'/user/stu2'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>row format delimited fields terminated by '\t'  指定字段分隔符，默认分隔符为 '\001'
stored as 指定存储格式
location 指定存储位置</p></blockquote> <h3 id="根据查询结果创建表"><a href="#根据查询结果创建表" class="header-anchor">#</a> 根据查询结果创建表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> stu3 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu2<span class="token punctuation">;</span>
</code></pre></div><h3 id="根据已经存在的表结构创建表"><a href="#根据已经存在的表结构创建表" class="header-anchor">#</a> 根据已经存在的表结构创建表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> stu4 <span class="token operator">like</span> stu2<span class="token punctuation">;</span>
</code></pre></div><h3 id="查询表的结构"><a href="#查询表的结构" class="header-anchor">#</a> 查询表的结构</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>只查询表内字段及属性
<span class="token keyword">desc</span> stu2<span class="token punctuation">;</span>
 
详细查询
<span class="token keyword">desc</span> formatted  stu2<span class="token punctuation">;</span>
</code></pre></div><h3 id="查询创建表的语句"><a href="#查询创建表的语句" class="header-anchor">#</a> 查询创建表的语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> stu2<span class="token punctuation">;</span>
</code></pre></div><h2 id="对外部表操作"><a href="#对外部表操作" class="header-anchor">#</a> 对外部表操作</h2> <blockquote><p>外部表因为是指定其他的hdfs路径的数据加载到表当中来，所以hive表会认为自己不完全独占这份数据，所以删除hive表的时候，数据仍然存放在hdfs当中，不会删掉，只会删除表的元数据</p></blockquote> <h3 id="构建外部表"><a href="#构建外部表" class="header-anchor">#</a> 构建外部表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> external <span class="token keyword">table</span> student <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span>s_name string<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="从本地文件系统向表中加载数据"><a href="#从本地文件系统向表中加载数据" class="header-anchor">#</a> 从本地文件系统向表中加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>追加操作
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/student.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>
 
覆盖操作
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/student.csv'</span> overwrite  <span class="token keyword">into</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span>
</code></pre></div><h3 id="从hdfs文件系统向表中加载数据"><a href="#从hdfs文件系统向表中加载数据" class="header-anchor">#</a> 从hdfs文件系统向表中加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> <span class="token keyword">data</span> inpath <span class="token string">'/hivedatas/techer.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> techer<span class="token punctuation">;</span>
 
加载数据到指定分区
<span class="token keyword">load</span> <span class="token keyword">data</span> inpath <span class="token string">'/hivedatas/techer.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> techer <span class="token keyword">partition</span><span class="token punctuation">(</span>cur_date<span class="token operator">=</span><span class="token number">20201210</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><ul><li><strong>注意</strong>：
1.使用 load data local 表示从本地文件系统加载，文件会拷贝到hdfs上
2.使用 load data 表示从hdfs文件系统加载，文件会直接移动到hive相关目录下，注意不是拷贝过去，因为hive认为hdfs文件已经有3副本了，没必要再次拷贝了
3.如果表是分区表，load 时不指定分区会报错
4.如果加载相同文件名的文件，会被自动重命名</li></ul></blockquote> <h2 id="对分区表的操作"><a href="#对分区表的操作" class="header-anchor">#</a> 对分区表的操作</h2> <h3 id="创建分区表的语法"><a href="#创建分区表的语法" class="header-anchor">#</a> 创建分区表的语法</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> score<span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span> s_score <span class="token keyword">int</span><span class="token punctuation">)</span> partitioned <span class="token keyword">by</span> <span class="token punctuation">(</span><span class="token keyword">month</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="创建一个表带多个分区"><a href="#创建一个表带多个分区" class="header-anchor">#</a> 创建一个表带多个分区</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> score2 <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span> s_score <span class="token keyword">int</span><span class="token punctuation">)</span> partitioned <span class="token keyword">by</span> <span class="token punctuation">(</span><span class="token keyword">year</span> string<span class="token punctuation">,</span><span class="token keyword">month</span> string<span class="token punctuation">,</span><span class="token keyword">day</span> string<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>注意：
hive表创建的时候可以用 location 指定一个文件或者文件夹，当指定文件夹时，hive会加载文件夹下的所有文件，当表中无分区时，这个文件夹下不能再有文件夹，否则报错
当表是分区表时，比如 partitioned by (day string)， 则这个文件夹下的每一个文件夹就是一个分区，且文件夹名为 day=20201123 这种格式，然后使用：msck  repair  table  score; 修复表结构，成功之后即可看到数据已经全部加载到表当中去了</strong></p></blockquote> <h3 id="加载数据到一个分区的表中"><a href="#加载数据到一个分区的表中" class="header-anchor">#</a> 加载数据到一个分区的表中</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span> <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="加载数据到一个多分区的表中去"><a href="#加载数据到一个多分区的表中去" class="header-anchor">#</a> 加载数据到一个多分区的表中去</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score2 <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">year</span><span class="token operator">=</span><span class="token string">'2018'</span><span class="token punctuation">,</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'06'</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token operator">=</span><span class="token string">'01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="查看分区"><a href="#查看分区" class="header-anchor">#</a> 查看分区</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span>  partitions  score<span class="token punctuation">;</span>
</code></pre></div><h3 id="添加一个分区"><a href="#添加一个分区" class="header-anchor">#</a> 添加一个分区</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">add</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201805'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="同时添加多个分区"><a href="#同时添加多个分区" class="header-anchor">#</a> 同时添加多个分区</h3> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">add</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201804'</span><span class="token punctuation">)</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201803'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：添加分区之后就可以在hdfs文件系统当中看到表下面多了一个文件夹</p></blockquote> <h3 id="删除分区"><a href="#删除分区" class="header-anchor">#</a> 删除分区</h3> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">alter</span> <span class="token keyword">table</span> score <span class="token keyword">drop</span> <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="对分桶表操作"><a href="#对分桶表操作" class="header-anchor">#</a> 对分桶表操作</h2> <blockquote><p>将数据按照指定的字段进行分成多个桶中去，就是按照分桶字段进行哈希划分到多个文件当中去
分区就是分文件夹，分桶就是分文件</p></blockquote> <blockquote><p>分桶优点：
\1. 提高join查询效率
\2. 提高抽样效率</p></blockquote> <h3 id="开启hive的捅表功能"><a href="#开启hive的捅表功能" class="header-anchor">#</a> 开启hive的捅表功能</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">set</span> hive<span class="token punctuation">.</span>enforce<span class="token punctuation">.</span>bucketing<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="设置reduce的个数"><a href="#设置reduce的个数" class="header-anchor">#</a> 设置reduce的个数</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="创建桶表"><a href="#创建桶表" class="header-anchor">#</a> 创建桶表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> course <span class="token punctuation">(</span>c_id string<span class="token punctuation">,</span>c_name string<span class="token punctuation">)</span> <span class="token keyword">clustered</span> <span class="token keyword">by</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span> <span class="token keyword">into</span> <span class="token number">3</span> buckets<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>桶表的数据加载：由于桶表的数据加载通过hdfs  dfs  -put文件或者通过load  data均不可以，只能通过insert  overwrite 进行加载
所以把文件加载到桶表中，需要先创建普通表，并通过insert  overwrite的方式将普通表的数据通过查询的方式加载到桶表当中去</p></blockquote> <h3 id="通过insert-overwrite给桶表中加载数据"><a href="#通过insert-overwrite给桶表中加载数据" class="header-anchor">#</a> 通过insert  overwrite给桶表中加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> overwrite <span class="token keyword">table</span> course <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course_common cluster <span class="token keyword">by</span><span class="token punctuation">(</span>c_id<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 最后指定桶字段</span>
</code></pre></div><p>修改表和删除表</p> <h3 id="修改表名称"><a href="#修改表名称" class="header-anchor">#</a> 修改表名称</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span>  <span class="token keyword">table</span>  old_table_name  <span class="token keyword">rename</span>  <span class="token keyword">to</span>  new_table_name<span class="token punctuation">;</span>
</code></pre></div><h3 id="增加-修改列信息"><a href="#增加-修改列信息" class="header-anchor">#</a> 增加/修改列信息</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>查询表结构
<span class="token keyword">desc</span> score5<span class="token punctuation">;</span>
 
添加列
<span class="token keyword">alter</span> <span class="token keyword">table</span> score5 <span class="token keyword">add</span> <span class="token keyword">columns</span> <span class="token punctuation">(</span>mycol string<span class="token punctuation">,</span> mysco string<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
更新列
<span class="token keyword">alter</span> <span class="token keyword">table</span> score5 change <span class="token keyword">column</span> mysco mysconew <span class="token keyword">int</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="删除表操作"><a href="#删除表操作" class="header-anchor">#</a> 删除表操作</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> score5<span class="token punctuation">;</span>
</code></pre></div><h3 id="清空表操作"><a href="#清空表操作" class="header-anchor">#</a> 清空表操作</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> score6<span class="token punctuation">;</span>
 
说明：只能清空管理表，也就是内部表；清空外部表，会产生错误
</code></pre></div><blockquote><p><strong>注意：truncate 和 drop：
如果 hdfs 开启了回收站，drop 删除的表数据是可以从回收站恢复的，表结构恢复不了，需要自己重新创建；truncate 清空的表是不进回收站的，所以无法恢复truncate清空的表
所以 truncate 一定慎用，一旦清空将无力回天</strong></p></blockquote> <p>向hive表中加载数据</p> <h3 id="直接向分区表中插入数据"><a href="#直接向分区表中插入数据" class="header-anchor">#</a> 直接向分区表中插入数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span><span class="token string">'201807'</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'001'</span><span class="token punctuation">,</span><span class="token string">'002'</span><span class="token punctuation">,</span><span class="token string">'100'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="通过load方式加载数据"><a href="#通过load方式加载数据" class="header-anchor">#</a> 通过load方式加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/score.csv'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> score <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token operator">=</span><span class="token string">'201806'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="通过查询方式加载数据"><a href="#通过查询方式加载数据" class="header-anchor">#</a> 通过查询方式加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> overwrite <span class="token keyword">table</span> score2 <span class="token keyword">partition</span><span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token operator">=</span> <span class="token string">'201806'</span><span class="token punctuation">)</span> <span class="token keyword">select</span> s_id<span class="token punctuation">,</span>c_id<span class="token punctuation">,</span>s_score <span class="token keyword">from</span> score1<span class="token punctuation">;</span>
</code></pre></div><h3 id="查询语句中创建表并加载数据"><a href="#查询语句中创建表并加载数据" class="header-anchor">#</a> 查询语句中创建表并加载数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> score2 <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score1<span class="token punctuation">;</span>
</code></pre></div><h3 id="在创建表是通过location指定加载数据的路径"><a href="#在创建表是通过location指定加载数据的路径" class="header-anchor">#</a> 在创建表是通过location指定加载数据的路径</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> external <span class="token keyword">table</span> score6 <span class="token punctuation">(</span>s_id string<span class="token punctuation">,</span>c_id string<span class="token punctuation">,</span>s_score <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span> location <span class="token string">'/myscore'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="export导出与import-导入-hive表数据-内部表操作"><a href="#export导出与import-导入-hive表数据-内部表操作" class="header-anchor">#</a> export导出与import 导入 hive表数据（内部表操作）</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> techer2 <span class="token operator">like</span> techer<span class="token punctuation">;</span> <span class="token comment">--依据已有表结构创建表</span>
 
export <span class="token keyword">table</span> techer <span class="token keyword">to</span>  <span class="token string">'/export/techer'</span><span class="token punctuation">;</span>
 
<span class="token keyword">import</span> <span class="token keyword">table</span> techer2 <span class="token keyword">from</span> <span class="token string">'/export/techer'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="hive表中数据导出"><a href="#hive表中数据导出" class="header-anchor">#</a> hive表中数据导出</h2> <h3 id="insert导出"><a href="#insert导出" class="header-anchor">#</a> insert导出</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>将查询的结果导出到本地
<span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">;</span>
 
将查询的结果格式化导出到本地
<span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'#'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
 
将查询的结果导出到HDFS上<span class="token punctuation">(</span>没有<span class="token keyword">local</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> overwrite directory <span class="token string">'/export/servers/exporthive'</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span> collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'#'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">;</span>
</code></pre></div><h3 id="hadoop命令导出到本地"><a href="#hadoop命令导出到本地" class="header-anchor">#</a> Hadoop命令导出到本地</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>dfs <span class="token operator">-</span>get <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span><span class="token number">000000</span>_0 <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span><span class="token keyword">local</span><span class="token punctuation">.</span>txt<span class="token punctuation">;</span>
</code></pre></div><h3 id="hive-shell-命令导出"><a href="#hive-shell-命令导出" class="header-anchor">#</a> hive shell 命令导出</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>基本语法：（hive <span class="token operator">-</span>f<span class="token operator">/</span><span class="token operator">-</span>e 执行语句或者脚本 <span class="token operator">&gt;</span> <span class="token keyword">file</span>） 
hive <span class="token operator">-</span>e <span class="token string">&quot;select * from myhive.score;&quot;</span> <span class="token operator">&gt;</span> <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span>score<span class="token punctuation">.</span>txt 
hive <span class="token operator">-</span>f export<span class="token punctuation">.</span>sh <span class="token operator">&gt;</span> <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>exporthive<span class="token operator">/</span>score<span class="token punctuation">.</span>txt
</code></pre></div><h3 id="export导出到hdfs上"><a href="#export导出到hdfs上" class="header-anchor">#</a> export导出到HDFS上</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>export <span class="token keyword">table</span> score <span class="token keyword">to</span> <span class="token string">'/export/exporthive/score'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="hive的dql查询语法"><a href="#hive的dql查询语法" class="header-anchor">#</a> hive的DQL查询语法</h2> <h3 id="单表查询"><a href="#单表查询" class="header-anchor">#</a> 单表查询</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> select_expr<span class="token punctuation">,</span> select_expr<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token keyword">FROM</span> table_reference
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span> 
<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> col_list <span class="token punctuation">[</span><span class="token keyword">HAVING</span> condition<span class="token punctuation">]</span><span class="token punctuation">]</span> 
<span class="token punctuation">[</span>CLUSTER <span class="token keyword">BY</span> col_list 
  <span class="token operator">|</span> <span class="token punctuation">[</span>DISTRIBUTE <span class="token keyword">BY</span> col_list<span class="token punctuation">]</span> <span class="token punctuation">[</span>SORT <span class="token keyword">BY</span><span class="token operator">|</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> col_list<span class="token punctuation">]</span> 
<span class="token punctuation">]</span> 
<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> number<span class="token punctuation">]</span>
</code></pre></div><blockquote><p>注意：
1、order by 会对输入做全局排序，因此只有一个reducer，会导致当输入规模较大时，需要较长的计算时间。
2、sort by不是全局排序，其在数据进入reducer前完成排序。因此，如果用sort by进行排序，并且设置mapred.reduce.tasks&gt;1，则sort by只保证每个reducer的输出有序，不保证全局有序。
3、distribute by(字段)根据指定的字段将数据分到不同的reducer，且分发算法是hash散列。
4、Cluster by(字段) 除了具有Distribute by的功能外，还会对该字段进行排序。
因此，如果分桶和sort字段是同一个时，此时，cluster by = distribute by + sort by</p></blockquote> <h3 id="where语句"><a href="#where语句" class="header-anchor">#</a> WHERE语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> s_score <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：
小于某个值是不包含null的，如上查询结果是把 s_score 为 null 的行剔除的</p></blockquote> <h3 id="group-by-分组"><a href="#group-by-分组" class="header-anchor">#</a> GROUP BY 分组</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> s_id <span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> s_id<span class="token punctuation">;</span>
 
分组后对数据进行筛选，使用<span class="token keyword">having</span>
 <span class="token keyword">select</span> s_id <span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> avgscore <span class="token keyword">from</span> score <span class="token keyword">group</span> <span class="token keyword">by</span> s_id <span class="token keyword">having</span> avgscore <span class="token operator">&gt;</span> <span class="token number">85</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：
如果使用 group by 分组，则 select 后面只能写分组的字段或者聚合函数
where和having区别：
1 having是在 group by 分完组之后再对数据进行筛选，所以having 要筛选的字段只能是分组字段或者聚合函数
2 where 是从数据表中的字段直接进行的筛选的，所以不能跟在gruop by后面，也不能使用聚合函数</p></blockquote> <h3 id="join-连接"><a href="#join-连接" class="header-anchor">#</a> join 连接</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> 内连接：只有进行连接的两个表中都存在与连接条件相匹配的数据才会被保留下来
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token punctuation">[</span><span class="token keyword">inner</span><span class="token punctuation">]</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span> <span class="token comment">-- inner 可省略</span>
 
<span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> 左外连接：左边所有数据会被返回，右边符合条件的被返回
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token keyword">left</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span> <span class="token comment">-- outer可省略</span>
 
<span class="token keyword">RIGHT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> 右外连接：右边所有数据会被返回，左边符合条件的被返回、
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> techer t <span class="token keyword">right</span> <span class="token keyword">join</span> course c <span class="token keyword">on</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span>
 
<span class="token keyword">FULL</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> 满外<span class="token punctuation">(</span>全外<span class="token punctuation">)</span>连接: 将会返回所有表中符合条件的所有记录。如果任一表的指定字段没有符合条件的值的话，那么就使用<span class="token boolean">NULL</span>值替代。
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> techer t <span class="token keyword">FULL</span> <span class="token keyword">JOIN</span> course c <span class="token keyword">ON</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> c<span class="token punctuation">.</span>t_id <span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注：1. hive2版本已经支持不等值连接，就是 join on条件后面可以使用大于小于符号了;并且也支持 join on 条件后跟or (早前版本 on 后只支持 = 和 and，不支持 &gt; &lt; 和 or)
2.如hive执行引擎使用MapReduce，一个join就会启动一个job，一条sql语句中如有多个join，则会启动多个job</p></blockquote> <blockquote><p>注意：表之间用逗号(,)连接和 inner join 是一样的
select * from table_a,table_b where table_a.id=table_b.id;
它们的执行效率没有区别，只是书写方式不同，用逗号是sql 89标准，join 是sql 92标准。用逗号连接后面过滤条件用 where ，用 join 连接后面过滤条件是 on。</p></blockquote> <h3 id="order-by-排序"><a href="#order-by-排序" class="header-anchor">#</a> order by 排序</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>全局排序，只会有一个reduce
<span class="token keyword">ASC</span>（ascend）: 升序（默认） <span class="token keyword">DESC</span>（descend）: 降序
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student s <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> score sco <span class="token keyword">ON</span> s<span class="token punctuation">.</span>s_id <span class="token operator">=</span> sco<span class="token punctuation">.</span>s_id <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sco<span class="token punctuation">.</span>s_score <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：order by 是全局排序，所以最后只有一个reduce，也就是在一个节点执行，如果数据量太大，就会耗费较长时间</p></blockquote> <h3 id="sort-by-局部排序"><a href="#sort-by-局部排序" class="header-anchor">#</a> sort by 局部排序</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>每个MapReduce内部进行排序，对全局结果集来说不是排序。
 
设置reduce个数
<span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
 
查看设置reduce个数
<span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token punctuation">;</span>
 
查询成绩按照成绩降序排列
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span>
 
将查询结果导入到文件中（按照成绩降序排列）
<span class="token keyword">insert</span> overwrite <span class="token keyword">local</span> directory <span class="token string">'/export/servers/hivedatas/sort'</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span>
</code></pre></div><ul><li>distribute by  分区排序</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>distribute <span class="token keyword">by</span>：类似MR中<span class="token keyword">partition</span>，进行分区，结合sort <span class="token keyword">by</span>使用
 
设置reduce的个数，将我们对应的s_id划分到对应的reduce当中去
<span class="token keyword">set</span> mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduces<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">;</span>
 
通过distribute <span class="token keyword">by</span>  进行数据的分区
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score distribute <span class="token keyword">by</span> s_id sort <span class="token keyword">by</span> s_score<span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：Hive要求 distribute by 语句要写在 sort by 语句之前</p></blockquote> <h3 id="cluster-by"><a href="#cluster-by" class="header-anchor">#</a> cluster by</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>当distribute <span class="token keyword">by</span>和sort <span class="token keyword">by</span>字段相同时，可以使用cluster <span class="token keyword">by</span>方式<span class="token punctuation">.</span>cluster <span class="token keyword">by</span>除了具有distribute <span class="token keyword">by</span>的功能外还兼具sort <span class="token keyword">by</span>的功能。但是排序只能是正序排序，不能指定排序规则为<span class="token keyword">ASC</span>或者<span class="token keyword">DESC</span>。 
以下两种写法等价<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score cluster <span class="token keyword">by</span> s_id<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score distribute <span class="token keyword">by</span> s_id sort <span class="token keyword">by</span> s_id<span class="token punctuation">;</span>
</code></pre></div><h2 id="hive函数"><a href="#hive函数" class="header-anchor">#</a> Hive函数</h2> <h3 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>hive支持 <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 等常用的聚合函数
</code></pre></div><blockquote><p>注意：
聚合操作时要注意null值
count(*) 包含null值，统计所有行数
count(id) 不包含null值
min 求最小值是不包含null，除非所有值都是null
avg 求平均值也是不包含null</p></blockquote> <ul><li>非空集合总体变量函数: var_pop</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: var_pop<span class="token punctuation">(</span>col<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 统计结果集中col非空集合的总体变量（忽略<span class="token boolean">null</span>）
</code></pre></div><ul><li>非空集合样本变量函数: var_samp</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: var_samp <span class="token punctuation">(</span>col<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 统计结果集中col非空集合的样本变量（忽略<span class="token boolean">null</span>）
</code></pre></div><ul><li>总体标准偏离函数: stddev_pop</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: stddev_pop<span class="token punctuation">(</span>col<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 该函数计算总体标准偏离，并返回总体变量的平方根，其返回值与VAR_POP函数的平方根相同
</code></pre></div><ul><li>中位数函数: percentile</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: percentile<span class="token punctuation">(</span><span class="token keyword">BIGINT</span> col<span class="token punctuation">,</span> p<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 求准确的第pth个百分位数，p必须介于<span class="token number">0</span>和<span class="token number">1</span>之间，但是col字段目前只支持整数，不支持浮点数类型
</code></pre></div><h3 id="关系运算"><a href="#关系运算" class="header-anchor">#</a> 关系运算</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>支持：等值<span class="token punctuation">(</span><span class="token operator">=</span><span class="token punctuation">)</span>、不等值<span class="token punctuation">(</span><span class="token operator">!=</span> 或 <span class="token operator">&lt;&gt;</span><span class="token punctuation">)</span>、小于<span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token punctuation">)</span>、小于等于<span class="token punctuation">(</span><span class="token operator">&lt;=</span><span class="token punctuation">)</span>、大于<span class="token punctuation">(</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>、大于等于<span class="token punctuation">(</span><span class="token operator">&gt;=</span><span class="token punctuation">)</span>
 
空值判断<span class="token punctuation">(</span><span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">)</span>、非空判断<span class="token punctuation">(</span><span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>LIKE比较: LIKE</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: A <span class="token operator">LIKE</span> B
操作类型: strings
描述: 如果字符串A或者字符串B为<span class="token boolean">NULL</span>，则返回<span class="token boolean">NULL</span>；如果字符串A符合表达式B 的正则语法，则为<span class="token boolean">TRUE</span>；否则为<span class="token boolean">FALSE</span>。B中字符”_”表示任意单个字符，而字符”<span class="token operator">%</span>”表示任意数量的字符。
</code></pre></div><ul><li>JAVA的LIKE操作: RLIKE</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: A <span class="token operator">RLIKE</span> B
操作类型: strings
描述: 如果字符串A或者字符串B为<span class="token boolean">NULL</span>，则返回<span class="token boolean">NULL</span>；如果字符串A符合JAVA正则表达式B的正则语法，则为<span class="token boolean">TRUE</span>；否则为<span class="token boolean">FALSE</span>。
</code></pre></div><ul><li>REGEXP操作: REGEXP</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: A <span class="token operator">REGEXP</span> B
操作类型: strings
描述: 功能与<span class="token operator">RLIKE</span>相同
示例：<span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> tableName <span class="token keyword">where</span> <span class="token string">'footbar'</span> <span class="token operator">REGEXP</span> <span class="token string">'^f.*r$'</span><span class="token punctuation">;</span>
结果：<span class="token number">1</span>
</code></pre></div><h3 id="数学运算"><a href="#数学运算" class="header-anchor">#</a> 数学运算</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>支持所有数值类型：加<span class="token punctuation">(</span>+<span class="token punctuation">)</span>、减<span class="token punctuation">(</span>-<span class="token punctuation">)</span>、乘<span class="token punctuation">(</span>*<span class="token punctuation">)</span>、除<span class="token punctuation">(</span>/<span class="token punctuation">)</span>、取余<span class="token punctuation">(</span>%<span class="token punctuation">)</span>、位与<span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">)</span>、位或<span class="token punctuation">(</span><span class="token operator">|</span><span class="token punctuation">)</span>、位异或<span class="token punctuation">(</span>^<span class="token punctuation">)</span>、位取反<span class="token punctuation">(</span>~<span class="token punctuation">)</span>
</code></pre></div><h3 id="逻辑运算"><a href="#逻辑运算" class="header-anchor">#</a> 逻辑运算</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>支持：逻辑与<span class="token punctuation">(</span><span class="token operator">and</span><span class="token punctuation">)</span>、逻辑或<span class="token punctuation">(</span><span class="token operator">or</span><span class="token punctuation">)</span>、逻辑非<span class="token punctuation">(</span><span class="token operator">not</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="数值运算"><a href="#数值运算" class="header-anchor">#</a> 数值运算</h3> <ul><li>取整函数: round</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">BIGINT</span>
说明: 返回<span class="token keyword">double</span>类型的整数值部分 （遵循四舍五入）
示例：<span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
结果：<span class="token number">3</span>
</code></pre></div><ul><li>指定精度取整函数: round</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token function">round</span><span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span>
返回值: <span class="token keyword">DOUBLE</span>
说明: 返回指定精度d的<span class="token keyword">double</span>类型
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">3.1416</span>
</code></pre></div><ul><li>向下取整函数: floor</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: floor<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">BIGINT</span>
说明: 返回等于或者小于该<span class="token keyword">double</span>变量的最大的整数
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">3.641</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">3</span>
</code></pre></div><ul><li>向上取整函数: ceil</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: ceil<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">BIGINT</span>
说明: 返回等于或者大于该<span class="token keyword">double</span>变量的最小的整数
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> ceil<span class="token punctuation">(</span><span class="token number">3.1415926</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">4</span>
</code></pre></div><ul><li>取随机数函数: rand</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rand<span class="token punctuation">(</span><span class="token keyword">int</span> seed<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 返回一个<span class="token number">0</span>到<span class="token number">1</span>范围内的随机数。如果指定种子seed，则会等到一个稳定的随机数序列
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span> <span class="token comment">-- 每次执行此语句得到的结果都不同</span>
<span class="token number">0.5577432776034763</span>
 
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token comment">-- 只要指定种子，每次执行此语句得到的结果一样的</span>
<span class="token number">0.7220096548596434</span>
</code></pre></div><ul><li>自然指数函数: exp</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: exp<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 返回自然对数e的a次方
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> exp<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">7.38905609893065</span>
</code></pre></div><ul><li>以10为底对数函数: log10</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: log10<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 返回以<span class="token number">10</span>为底的a的对数
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> log10<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">2.0</span>
</code></pre></div><blockquote><p>此外还有：以2为底对数函数: log2()、对数函数: log()</p></blockquote> <ul><li>幂运算函数: pow</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: pow<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">,</span> <span class="token keyword">double</span> p<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 返回a的p次幂
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> pow<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">16.0</span>
</code></pre></div><ul><li>开平方函数: sqrt</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: sqrt<span class="token punctuation">(</span><span class="token keyword">double</span> a<span class="token punctuation">)</span>
返回值: <span class="token keyword">double</span>
说明: 返回a的平方根
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> sqrt<span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">4.0</span>
</code></pre></div><ul><li>二进制函数: bin</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: bin<span class="token punctuation">(</span><span class="token keyword">BIGINT</span> a<span class="token punctuation">)</span>
返回值: string
说明: 返回a的二进制代码表示
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> bin<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">111</span>
</code></pre></div><blockquote><p>十六进制函数: hex()、将十六进制转化为字符串函数: unhex()
进制转换函数: conv(bigint num, int from_base, int to_base) 说明: 将数值num从from_base进制转化到to_base进制</p></blockquote> <blockquote><p>此外还有很多数学函数：绝对值函数: abs()、正取余函数: pmod()、正弦函数: sin()、反正弦函数: asin()、余弦函数: cos()、反余弦函数: acos()、positive函数: positive()、negative函数: negative()</p></blockquote> <h3 id="条件函数"><a href="#条件函数" class="header-anchor">#</a> 条件函数</h3> <ul><li>If函数: if</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> testCondition<span class="token punctuation">,</span> T valueTrue<span class="token punctuation">,</span> T valueFalseOrNull<span class="token punctuation">)</span>
返回值: T
说明: 当条件testCondition为<span class="token boolean">TRUE</span>时，返回valueTrue；否则返回valueFalseOrNull
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">200</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">100</span>
</code></pre></div><ul><li>非空查找函数: coalesce</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">coalesce</span><span class="token punctuation">(</span>T v1<span class="token punctuation">,</span> T v2<span class="token punctuation">,</span> …<span class="token punctuation">)</span>
返回值: T
说明: 返回参数中的第一个非空值；如果所有值都为<span class="token boolean">NULL</span>，那么返回<span class="token boolean">NULL</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">coalesce</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">'100'</span><span class="token punctuation">,</span><span class="token string">'50'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token number">100</span>
</code></pre></div><ul><li>条件判断函数：case when (两种写法，其一)</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">case</span> <span class="token keyword">when</span> a <span class="token keyword">then</span> b <span class="token punctuation">[</span><span class="token keyword">when</span> c <span class="token keyword">then</span> d<span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">else</span> e<span class="token punctuation">]</span> <span class="token keyword">end</span>
返回值: T
说明：如果a为<span class="token boolean">TRUE</span><span class="token punctuation">,</span>则返回b；如果c为<span class="token boolean">TRUE</span>，则返回d；否则返回e
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">2</span><span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">then</span> <span class="token string">'mary'</span> <span class="token keyword">else</span> <span class="token string">'tim'</span> <span class="token keyword">end</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
mary
</code></pre></div><ul><li>条件判断函数：case when (两种写法，其二)</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">case</span> a <span class="token keyword">when</span> b <span class="token keyword">then</span> c <span class="token punctuation">[</span><span class="token keyword">when</span> d <span class="token keyword">then</span> e<span class="token punctuation">]</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token keyword">else</span> f<span class="token punctuation">]</span> <span class="token keyword">end</span>
返回值: T
说明：如果a等于b，那么返回c；如果a等于d，那么返回e；否则返回f
hive<span class="token operator">&gt;</span> <span class="token keyword">Select</span> <span class="token keyword">case</span> <span class="token number">100</span> <span class="token keyword">when</span> <span class="token number">50</span> <span class="token keyword">then</span> <span class="token string">'tom'</span> <span class="token keyword">when</span> <span class="token number">100</span> <span class="token keyword">then</span> <span class="token string">'mary'</span> <span class="token keyword">else</span> <span class="token string">'tim'</span> <span class="token keyword">end</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
mary
</code></pre></div><h3 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h3> <blockquote><p>注：以下SQL语句中的 from tableName 可去掉，不影响查询结果</p></blockquote> <ul><li><ol><li>获取当前UNIX时间戳函数: unix_timestamp</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">bigint</span>
说明: 获得当前时区的UNIX时间戳
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">1616906976</span>
</code></pre></div><ul><li><ol><li>UNIX时间戳转日期函数: from_unixtime</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: from_unixtime<span class="token punctuation">(</span><span class="token keyword">bigint</span> unixtime<span class="token punctuation">[</span><span class="token punctuation">,</span> string format<span class="token punctuation">]</span><span class="token punctuation">)</span>
返回值: string
说明: 转化UNIX时间戳（从<span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> UTC到指定时间的秒数）到当前时区的时间格式
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1616906976</span><span class="token punctuation">,</span><span class="token string">'yyyyMMdd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">20210328</span>
</code></pre></div><ul><li><ol><li>日期转UNIX时间戳函数: unix_timestamp</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: unix_timestamp<span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">bigint</span>
说明: 转换格式为<span class="token string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>的日期到UNIX时间戳。如果转化失败，则返回<span class="token number">0</span>。
hive<span class="token operator">&gt;</span>  <span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2021-03-08 14:21:15'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">1615184475</span>
</code></pre></div><ul><li><ol><li>指定格式日期转UNIX时间戳函数: unix_timestamp</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: unix_timestamp<span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">,</span> string pattern<span class="token punctuation">)</span>
返回值: <span class="token keyword">bigint</span>
说明: 转换pattern格式的日期到UNIX时间戳。如果转化失败，则返回<span class="token number">0</span>。
hive<span class="token operator">&gt;</span>  <span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token string">'2021-03-08 14:21:15'</span><span class="token punctuation">,</span><span class="token string">'yyyyMMdd HH:mm:ss'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">1615184475</span>
</code></pre></div><ul><li><ol><li>日期时间转日期函数: to_date</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: to_date<span class="token punctuation">(</span>string <span class="token keyword">timestamp</span><span class="token punctuation">)</span>
返回值: string
说明: 返回日期时间字段中的日期部分。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> to_date<span class="token punctuation">(</span><span class="token string">'2021-03-28 14:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">2021</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">28</span>
</code></pre></div><ul><li><ol><li>日期转年函数: year</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">year</span><span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回日期中的年。hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token string">'2021-03-28 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">2021</span>hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token string">'2021-03-28'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">2021</span>
</code></pre></div><ul><li><ol><li>日期转月函数: month</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">month</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回日期中的月份。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token string">'2020-12-28 12:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">12</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">month</span><span class="token punctuation">(</span><span class="token string">'2021-03-08'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">8</span>
</code></pre></div><ul><li><ol><li>日期转天函数: day</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">day</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回日期中的天。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">8</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">day</span><span class="token punctuation">(</span><span class="token string">'2020-12-24'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">24</span>
</code></pre></div><ul><li><ol><li>日期转小时函数: hour</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">hour</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回日期中的小时。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">10</span>
</code></pre></div><ul><li><ol><li>日期转分钟函数: minute</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">minute</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>返回值: <span class="token keyword">int</span>说明: 返回日期中的分钟。hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">3</span>
</code></pre></div><ul><li><ol><li>日期转秒函数: second</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">second</span> <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>返回值: <span class="token keyword">int</span>说明: 返回日期中的秒。hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">second</span><span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">1</span>
</code></pre></div><ul><li><ol><li>日期转周函数: weekofyear</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: weekofyear <span class="token punctuation">(</span>string <span class="token keyword">date</span><span class="token punctuation">)</span>返回值: <span class="token keyword">int</span>说明: 返回日期在当前的周数。hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> weekofyear<span class="token punctuation">(</span><span class="token string">'2020-12-08 10:03:01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">49</span>
</code></pre></div><ul><li><ol><li>日期比较函数: datediff</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: datediff<span class="token punctuation">(</span>string enddate<span class="token punctuation">,</span> string startdate<span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回结束日期减去开始日期的天数。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span><span class="token string">'2012-05-09'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">213</span>
</code></pre></div><ul><li><ol><li>日期增加函数: date_add</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: date_add<span class="token punctuation">(</span>string startdate<span class="token punctuation">,</span> <span class="token keyword">int</span> days<span class="token punctuation">)</span>
返回值: string
说明: 返回开始日期startdate增加days天后的日期。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">18</span>
</code></pre></div><ul><li><ol><li>日期减少函数: date_sub</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: date_sub <span class="token punctuation">(</span>string startdate<span class="token punctuation">,</span> <span class="token keyword">int</span> days<span class="token punctuation">)</span>
返回值: string
说明: 返回开始日期startdate减少days天后的日期。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> date_sub<span class="token punctuation">(</span><span class="token string">'2020-12-08'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">28</span>
</code></pre></div><h3 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h3> <ul><li><ol><li>字符串长度函数：length</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: length<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>返回值: <span class="token keyword">int</span>说明：返回字符串A的长度hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">'abcedfg'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span><span class="token number">7</span>
</code></pre></div><ul><li><ol><li>字符串反转函数：reverse</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: reverse<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>返回值: string说明：返回字符串A的反转结果hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> reverse<span class="token punctuation">(</span><span class="token string">'abcedfg'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>gfdecba
</code></pre></div><ul><li><ol><li>字符串连接函数：concat</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: concat<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> string B…<span class="token punctuation">)</span>
返回值: string
说明：返回输入字符串连接后的结果，支持任意个输入字符串
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token string">'def’,'</span>gh'<span class="token punctuation">)</span><span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
abcdefgh
</code></pre></div><ul><li><ol><li>带分隔符字符串连接函数：concat_ws</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: concat_ws<span class="token punctuation">(</span>string SEP<span class="token punctuation">,</span> string A<span class="token punctuation">,</span> string B…<span class="token punctuation">)</span>
返回值: string
说明：返回输入字符串连接后的结果，SEP表示各个字符串间的分隔符
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> concat_ws<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token string">'def'</span><span class="token punctuation">,</span><span class="token string">'gh'</span><span class="token punctuation">)</span><span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
abc<span class="token punctuation">,</span>def<span class="token punctuation">,</span>gh
</code></pre></div><ul><li><ol><li>字符串截取函数：substr,substring</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: substr<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">)</span><span class="token punctuation">,</span>substring<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">)</span>
返回值: string
说明：返回字符串A从<span class="token keyword">start</span>位置到结尾的字符串
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
cde
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
cde
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span> （和ORACLE相同）
e
</code></pre></div><ul><li><ol><li>字符串截取函数：substr,substring</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: substr<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">,</span>substring<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">start</span><span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span>
返回值: string
说明：返回字符串A从<span class="token keyword">start</span>位置开始，长度为len的字符串
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> substr<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
cd
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
cd
hive<span class="token operator">&gt;</span><span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
de
</code></pre></div><ul><li><ol><li>字符串转大写函数：upper,ucase</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: upper<span class="token punctuation">(</span>string A<span class="token punctuation">)</span> <span class="token function">ucase</span><span class="token punctuation">(</span>string A<span class="token punctuation">)</span>
返回值: string
说明：返回字符串A的大写格式
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> upper<span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
ABSED
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">ucase</span><span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
ABSED
</code></pre></div><ul><li><ol><li>字符串转小写函数：lower,lcase</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: lower<span class="token punctuation">(</span>string A<span class="token punctuation">)</span> <span class="token function">lcase</span><span class="token punctuation">(</span>string A<span class="token punctuation">)</span>
返回值: string
说明：返回字符串A的小写格式
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> lower<span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
absed
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token string">'abSEd'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
absed
</code></pre></div><ul><li><ol><li>去空格函数：trim</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: trim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>返回值: string说明：去除字符串两边的空格hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>abc
</code></pre></div><ul><li><ol><li>左边去空格函数：ltrim</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: ltrim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>
返回值: string
说明：去除字符串左边的空格
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> ltrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
abc
</code></pre></div><ul><li><ol><li>右边去空格函数：rtrim</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: rtrim<span class="token punctuation">(</span>string A<span class="token punctuation">)</span>
返回值: string
说明：去除字符串右边的空格
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> rtrim<span class="token punctuation">(</span><span class="token string">' abc '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
abc
</code></pre></div><ul><li><ol><li>正则表达式替换函数：regexp_replace</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: regexp_replace<span class="token punctuation">(</span>string A<span class="token punctuation">,</span> string B<span class="token punctuation">,</span> string C<span class="token punctuation">)</span>
返回值: string
说明：将字符串A中的符合java正则表达式B的部分替换为C。注意，在有些情况下要使用转义字符<span class="token punctuation">,</span>类似oracle中的regexp_replace函数。hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> regexp_replace<span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">,</span> <span class="token string">'oo|ar'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>fb
</code></pre></div><ul><li><ol><li>正则表达式解析函数：regexp_extract</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: regexp_extract<span class="token punctuation">(</span>string subject<span class="token punctuation">,</span> string pattern<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token keyword">index</span><span class="token punctuation">)</span>
返回值: string
说明：将字符串subject按照pattern正则表达式的规则拆分，返回<span class="token keyword">index</span>指定的字符。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
the
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
bar
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> regexp_extract<span class="token punctuation">(</span><span class="token string">'foothebar'</span><span class="token punctuation">,</span> <span class="token string">'foo(.*?)(bar)'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
foothebar
strong<span class="token operator">&gt;</span>注意，在有些情况下要使用转义字符，下面的等号要用双竖线转义，这是java正则表达式的规则。
<span class="token keyword">select</span> data_field<span class="token punctuation">,</span>
regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span><span class="token string">'.*?bgStart\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> aaa<span class="token punctuation">,</span>
regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span><span class="token string">'.*?contentLoaded_headStart\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> bbb<span class="token punctuation">,</span>
regexp_extract<span class="token punctuation">(</span>data_field<span class="token punctuation">,</span><span class="token string">'.*?AppLoad2Req\\=([^&amp;]+)'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">as</span> ccc 
<span class="token keyword">from</span> pt_nginx_loginlog_st 
<span class="token keyword">where</span> pt <span class="token operator">=</span> <span class="token string">'2021-03-28'</span> <span class="token keyword">limit</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>URL解析函数：parse_url</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: parse_url<span class="token punctuation">(</span>string urlString<span class="token punctuation">,</span> string partToExtract <span class="token punctuation">[</span><span class="token punctuation">,</span> string keyToExtract<span class="token punctuation">]</span><span class="token punctuation">)</span>
返回值: string
说明：返回URL中指定的部分。partToExtract的有效值为：HOST<span class="token punctuation">,</span> PATH<span class="token punctuation">,</span> QUERY<span class="token punctuation">,</span> REF<span class="token punctuation">,</span> PROTOCOL<span class="token punctuation">,</span> AUTHORITY<span class="token punctuation">,</span> <span class="token keyword">FILE</span><span class="token punctuation">,</span> <span class="token operator">and</span> USERINFO<span class="token punctuation">.</span>hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.tableName.com/path1/p.php?k1=v1&amp;k2=v2#Ref1'</span><span class="token punctuation">,</span> <span class="token string">'HOST'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>www<span class="token punctuation">.</span>tableName<span class="token punctuation">.</span>com hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> parse_url<span class="token punctuation">(</span><span class="token string">'https://www.tableName.com/path1/p.php?k1=v1&amp;k2=v2#Ref1'</span><span class="token punctuation">,</span> <span class="token string">'QUERY'</span><span class="token punctuation">,</span> <span class="token string">'k1'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>v1
</code></pre></div><ul><li><ol><li>json解析函数：get_json_object</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: get_json_object<span class="token punctuation">(</span>string json_string<span class="token punctuation">,</span> string path<span class="token punctuation">)</span>
返回值: string
说明：解析json的字符串json_string<span class="token punctuation">,</span>返回path指定的内容。如果输入的json字符串无效，那么返回<span class="token boolean">NULL</span>。
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span>  get_json_object<span class="token punctuation">(</span><span class="token string">'{&quot;store&quot;:{&quot;fruit&quot;:\[{&quot;weight&quot;:8,&quot;type&quot;:&quot;apple&quot;},{&quot;weight&quot;:9,&quot;type&quot;:&quot;pear&quot;}], &quot;bicycle&quot;:{&quot;price&quot;:19.95,&quot;color&quot;:&quot;red&quot;} },&quot;email&quot;:&quot;amy@only_for_json_udf_test.net&quot;,&quot;owner&quot;:&quot;amy&quot;}'</span><span class="token punctuation">,</span><span class="token string">'$.owner'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>空格字符串函数：space</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: space<span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span>
返回值: string
说明：返回长度为n的字符串
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> space<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> length<span class="token punctuation">(</span>space<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">10</span>
</code></pre></div><ul><li><ol><li>重复字符串函数：repeat</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: <span class="token keyword">repeat</span><span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>返回值: string说明：返回重复n次后的str字符串hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">repeat</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>abcabcabcabcabc
</code></pre></div><ul><li><ol><li>首字符ascii函数：ascii</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: ascii<span class="token punctuation">(</span>string str<span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明：返回字符串str第一个字符的ascii码
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> ascii<span class="token punctuation">(</span><span class="token string">'abcde'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">97</span>
</code></pre></div><ul><li><ol><li>左补足函数：lpad</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: lpad<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> string pad<span class="token punctuation">)</span>
返回值: string
说明：将str进行用pad进行左补足到len位
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> lpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'td'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
tdtdtdtabc
注意：与GP，ORACLE不同，pad 不能默认
</code></pre></div><ul><li><ol><li>右补足函数：rpad</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: rpad<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">,</span> string pad<span class="token punctuation">)</span>
返回值: string
说明：将str进行用pad进行右补足到len位
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> rpad<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'td'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
abctdtdtdt
</code></pre></div><ul><li><ol><li>分割字符串函数: split</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: split<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> string pat<span class="token punctuation">)</span>
返回值: array
说明: 按照pat字符串分割str，会返回分割后的字符串数组
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> split<span class="token punctuation">(</span><span class="token string">'abtcdtef'</span><span class="token punctuation">,</span><span class="token string">'t'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ef&quot;</span><span class="token punctuation">]</span>
</code></pre></div><ul><li><ol><li>集合查找函数: find_in_set</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: find_in_set<span class="token punctuation">(</span>string str<span class="token punctuation">,</span> string strList<span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回str在strlist第一次出现的位置，strlist是用逗号分割的字符串。如果没有找该str字符，则返回<span class="token number">0</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> find_in_set<span class="token punctuation">(</span><span class="token string">'ab'</span><span class="token punctuation">,</span><span class="token string">'ef,ab,de'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">2</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> find_in_set<span class="token punctuation">(</span><span class="token string">'at'</span><span class="token punctuation">,</span><span class="token string">'ef,ab,de'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token number">0</span>
</code></pre></div><h3 id="复合类型构建操作"><a href="#复合类型构建操作" class="header-anchor">#</a> 复合类型构建操作</h3> <ul><li>Map类型构建: map</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: map <span class="token punctuation">(</span>key1<span class="token punctuation">,</span> value1<span class="token punctuation">,</span> key2<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> …<span class="token punctuation">)</span>
说明：根据输入的<span class="token keyword">key</span>和<span class="token keyword">value</span>对构建map类型
hive<span class="token operator">&gt;</span> <span class="token keyword">Create</span> <span class="token keyword">table</span> mapTable <span class="token keyword">as</span> <span class="token keyword">select</span> map<span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'200'</span><span class="token punctuation">,</span><span class="token string">'mary'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">describe</span> mapTable<span class="token punctuation">;</span>
t       map<span class="token operator">&lt;</span>string <span class="token punctuation">,</span>string<span class="token operator">&gt;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
{<span class="token string">&quot;100&quot;</span>:<span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;200&quot;</span>:<span class="token string">&quot;mary&quot;</span>}
</code></pre></div><ul><li><ol><li>Struct类型构建: struct</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: struct<span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">,</span> val3<span class="token punctuation">,</span> …<span class="token punctuation">)</span>
说明：根据输入的参数构建结构体struct类型
hive<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> struct_table <span class="token keyword">as</span> <span class="token keyword">select</span> struct<span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'mary'</span><span class="token punctuation">,</span><span class="token string">'tim'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">describe</span> struct_table<span class="token punctuation">;</span>
t       struct<span class="token operator">&lt;</span>col1:string <span class="token punctuation">,</span>col2:string<span class="token punctuation">,</span>col3:string<span class="token operator">&gt;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
{<span class="token string">&quot;col1&quot;</span>:<span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;col2&quot;</span>:<span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;col3&quot;</span>:<span class="token string">&quot;tim&quot;</span>}
</code></pre></div><ul><li><ol><li>array类型构建: array</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: array<span class="token punctuation">(</span>val1<span class="token punctuation">,</span> val2<span class="token punctuation">,</span> …<span class="token punctuation">)</span>
说明：根据输入的参数构建数组array类型
hive<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> arr_table <span class="token keyword">as</span> <span class="token keyword">select</span> array<span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tim&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">describe</span> tableName<span class="token punctuation">;</span>
t       array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tim&quot;</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="复杂类型访问操作"><a href="#复杂类型访问操作" class="header-anchor">#</a> 复杂类型访问操作</h3> <ul><li><ol><li>array类型访问: A[n]</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: A<span class="token punctuation">[</span>n<span class="token punctuation">]</span>
操作类型: A为array类型，n为<span class="token keyword">int</span>类型
说明：返回数组A中的第n个变量值。数组的起始下标为<span class="token number">0</span>。比如，A是个值为<span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">]</span>的数组类型，那么A<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>将返回<span class="token string">'foo'</span><span class="token punctuation">,</span>而A<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>将返回<span class="token string">'bar'</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> arr_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> array<span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;tim&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t
 <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">from</span> arr_table2<span class="token punctuation">;</span>
tom     mary    tim
</code></pre></div><ul><li><ol><li>map类型访问: M[key]</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: M<span class="token punctuation">[</span><span class="token keyword">key</span><span class="token punctuation">]</span>
操作类型: M为map类型，<span class="token keyword">key</span>为map中的<span class="token keyword">key</span>值
说明：返回map类型M中，<span class="token keyword">key</span>值为指定值的<span class="token keyword">value</span>值。比如，M是值为{<span class="token string">'f'</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'all'</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'foobar'</span>}的map类型，那么M<span class="token punctuation">[</span><span class="token string">'all'</span><span class="token punctuation">]</span>将会返回<span class="token string">'foobar'</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">Create</span> <span class="token keyword">table</span> map_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> map<span class="token punctuation">(</span><span class="token string">'100'</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'200'</span><span class="token punctuation">,</span><span class="token string">'mary'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t<span class="token punctuation">[</span><span class="token string">'200'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>t<span class="token punctuation">[</span><span class="token string">'100'</span><span class="token punctuation">]</span> <span class="token keyword">from</span> map_table2<span class="token punctuation">;</span>
mary    tom
</code></pre></div><ul><li><ol><li>struct类型访问: S.x</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: S<span class="token punctuation">.</span>x
操作类型: S为struct类型
说明：返回结构体S中的x字段。比如，对于结构体struct foobar {<span class="token keyword">int</span> foo<span class="token punctuation">,</span> <span class="token keyword">int</span> bar}，foobar<span class="token punctuation">.</span>foo返回结构体中的foo字段
hive<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> str_table2 <span class="token keyword">as</span> <span class="token keyword">select</span> struct<span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">,</span><span class="token string">'mary'</span><span class="token punctuation">,</span><span class="token string">'tim'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> t <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">describe</span> tableName<span class="token punctuation">;</span>
t       struct<span class="token operator">&lt;</span>col1:string <span class="token punctuation">,</span>col2:string<span class="token punctuation">,</span>col3:string<span class="token operator">&gt;</span>
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> t<span class="token punctuation">.</span>col1<span class="token punctuation">,</span>t<span class="token punctuation">.</span>col3 <span class="token keyword">from</span> str_table2<span class="token punctuation">;</span>
tom     tim
</code></pre></div><h3 id="复杂类型长度统计函数"><a href="#复杂类型长度统计函数" class="header-anchor">#</a> 复杂类型长度统计函数</h3> <ul><li><ol><li>Map类型长度函数: size(Map&lt;k .V&gt;)</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: size<span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>k <span class="token punctuation">.</span>V<span class="token operator">&gt;</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回map类型的长度
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> size<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> map_table2<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>array类型长度函数: size(Array)</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>语法: size<span class="token punctuation">(</span>Array<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">)</span>
返回值: <span class="token keyword">int</span>
说明: 返回array类型的长度
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> size<span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token keyword">from</span> arr_table2<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>类型转换函数  ***</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>类型转换函数: cast
语法: cast<span class="token punctuation">(</span>expr <span class="token keyword">as</span> <span class="token operator">&lt;</span><span class="token keyword">type</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
返回值: Expected <span class="token string">&quot;=&quot;</span> <span class="token keyword">to</span> follow <span class="token string">&quot;type&quot;</span>
说明: 返回转换后的数据类型
hive<span class="token operator">&gt;</span> <span class="token keyword">select</span> cast<span class="token punctuation">(</span><span class="token string">'1'</span> <span class="token keyword">as</span> <span class="token keyword">bigint</span><span class="token punctuation">)</span> <span class="token keyword">from</span> tableName<span class="token punctuation">;</span>
</code></pre></div><h2 id="hive当中的lateral-view-与-explode以及reflect和窗口函数"><a href="#hive当中的lateral-view-与-explode以及reflect和窗口函数" class="header-anchor">#</a> hive当中的lateral view 与 explode以及reflect和窗口函数</h2> <h3 id="使用explode函数将hive表中的map和array字段数据进行拆分"><a href="#使用explode函数将hive表中的map和array字段数据进行拆分" class="header-anchor">#</a> 使用explode函数将hive表中的Map和Array字段数据进行拆分</h3> <p>lateral view用于和split、explode等UDTF一起使用的，能将一行数据拆分成多行数据，在此基础上可以对拆分的数据进行聚合，lateral view首先为原始表的每行调用UDTF，UDTF会把一行拆分成一行或者多行，lateral view在把结果组合，产生一个支持别名表的虚拟表。</p> <p>其中explode还可以用于将hive一列中复杂的array或者map结构拆分成多行</p> <p>需求：现在有数据格式如下</p> <div class="language-sql extra-class"><pre class="language-sql"><code>zhangsan child1<span class="token punctuation">,</span>child2<span class="token punctuation">,</span>child3<span class="token punctuation">,</span>child4 k1:v1<span class="token punctuation">,</span>k2:v2
 
lisi child5<span class="token punctuation">,</span>child6<span class="token punctuation">,</span>child7<span class="token punctuation">,</span>child8 k3:v3<span class="token punctuation">,</span>k4:v4
</code></pre></div><p>字段之间使用\t分割，需求将所有的child进行拆开成为一列</p> <div class="language- extra-class"><pre class="language-text"><code>+----------+--+
| mychild  |
+----------+--+
| child1   |
| child2   |
| child3   |
| child4   |
| child5   |
| child6   |
| child7   |
| child8   |
+----------+--+
</code></pre></div><p>将map的key和value也进行拆开，成为如下结果</p> <div class="language- extra-class"><pre class="language-text"><code>+-----------+-------------+--+
| mymapkey  | mymapvalue  |
+-----------+-------------+--+
| k1        | v1          |
| k2        | v2          |
| k3        | v3          |
| k4        | v4          |
+-----------+-------------+--+
</code></pre></div><ul><li><ol><li>创建hive数据库</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>创建hive数据库hive <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> hive_explode<span class="token punctuation">;</span>hive <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">use</span> hive_explode<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>创建hive表，然后使用explode拆分map和array</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span>  <span class="token keyword">table</span> t3<span class="token punctuation">(</span>name string<span class="token punctuation">,</span>children array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span>address Map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span>string<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">'\t'</span>  collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span> map <span class="token keyword">keys</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">':'</span> stored <span class="token keyword">as</span> textFile<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>加载数据</li></ol></li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>node03执行以下命令创建表数据文件
 <span class="token function">mkdir</span> -p /export/servers/hivedatas/
 <span class="token builtin class-name">cd</span> /export/servers/hivedatas/
 <span class="token function">vim</span> maparray
内容如下:
zhangsan child1,child2,child3,child4 k1:v1,k2:v2
lisi child5,child6,child7,child8 k3:v3,k4:v4
 
hive表当中加载数据
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> load data <span class="token builtin class-name">local</span> inpath <span class="token string">'/export/servers/hivedatas/maparray'</span> into table t3<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>使用explode将hive当中数据拆开</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>将array当中的数据拆分开
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> explode<span class="token punctuation">(</span>children<span class="token punctuation">)</span> <span class="token keyword">AS</span> myChild <span class="token keyword">FROM</span> t3<span class="token punctuation">;</span>
 
将map当中的数据拆分开
 
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> explode<span class="token punctuation">(</span>address<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token punctuation">(</span>myMapKey<span class="token punctuation">,</span> myMapValue<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t3<span class="token punctuation">;</span>
</code></pre></div><h3 id="使用explode拆分json字符串"><a href="#使用explode拆分json字符串" class="header-anchor">#</a> 使用explode拆分json字符串</h3> <p>需求: 需求：现在有一些数据格式如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>a:shandong<span class="token punctuation">,</span>b:beijing<span class="token punctuation">,</span>c:hebei<span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token operator">|</span><span class="token punctuation">[</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;7fresh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">4900</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">1900</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.9&quot;</span>}<span class="token punctuation">,</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;jd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">2090</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">78981</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.8&quot;</span>}<span class="token punctuation">,</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;jdmart&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">6987</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">1600</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.0&quot;</span>}<span class="token punctuation">]</span>
</code></pre></div><p>其中字段与字段之间的分隔符是 |</p> <p>我们要解析得到所有的monthSales对应的值为以下这一列（行转列）</p> <p>4900</p> <p>2090</p> <p>6987</p> <ul><li><ol><li>创建hive表</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> explode_lateral_view
                   <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>area<span class="token punctuation">`</span> string<span class="token punctuation">,</span>
                   <span class="token operator">&gt;</span> <span class="token punctuation">`</span>goods_id<span class="token punctuation">`</span> string<span class="token punctuation">,</span>
                   <span class="token operator">&gt;</span> <span class="token punctuation">`</span>sale_info<span class="token punctuation">`</span> string<span class="token punctuation">)</span>
                   <span class="token operator">&gt;</span> <span class="token keyword">ROW</span> FORMAT DELIMITED
                   <span class="token operator">&gt;</span> <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">'|'</span>
                   <span class="token operator">&gt;</span> STORED <span class="token keyword">AS</span> textfile<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>准备数据并加载数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>准备数据如下
cd <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>hivedatas
vim explode_json
 
a:shandong<span class="token punctuation">,</span>b:beijing<span class="token punctuation">,</span>c:hebei<span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token operator">|</span><span class="token punctuation">[</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;7fresh&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">4900</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">1900</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.9&quot;</span>}<span class="token punctuation">,</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;jd&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">2090</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">78981</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.8&quot;</span>}<span class="token punctuation">,</span>{<span class="token string">&quot;source&quot;</span>:<span class="token string">&quot;jdmart&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;monthSales&quot;</span>:<span class="token number">6987</span><span class="token punctuation">,</span><span class="token string">&quot;userCount&quot;</span>:<span class="token number">1600</span><span class="token punctuation">,</span><span class="token string">&quot;score&quot;</span>:<span class="token string">&quot;9.0&quot;</span>}<span class="token punctuation">]</span>
 
加载数据到hive表当中去
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/explode_json'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> explode_lateral_view<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>使用explode拆分Array</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> goods_id <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>使用explode拆解Map</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>area<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> area <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>拆解json字段</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span><span class="token string">'\\[\\{'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'}]'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'},\\{'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span>  sale_info <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span>
 
然后我们想用get_json_object来获取<span class="token keyword">key</span>为monthSales的数据：
 
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span>explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span><span class="token string">'\\[\\{'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'}]'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'},\\{'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'$.monthSales'</span><span class="token punctuation">)</span> <span class="token keyword">as</span>  sale_info <span class="token keyword">from</span> explode_lateral_view<span class="token punctuation">;</span>
 
 
然后挂了FAILED: SemanticException <span class="token punctuation">[</span>Error <span class="token number">10081</span><span class="token punctuation">]</span>: UDTF<span class="token string">'s are not supported outside the SELECT clause, nor nested in expressions
UDTF explode不能写在别的函数内
如果你这么写，想查两个字段，select explode(split(area,'</span><span class="token punctuation">,</span><span class="token string">')) as area,good_id from explode_lateral_view;
会报错FAILED: SemanticException 1:40 Only a single expression in the SELECT clause is supported with UDTF'</span>s<span class="token punctuation">.</span> Error encountered near token <span class="token string">'good_id'</span>
使用UDTF的时候，只支持一个字段，这时候就需要LATERAL <span class="token keyword">VIEW</span>出场了
</code></pre></div><h3 id="配合lateral-view使用"><a href="#配合lateral-view使用" class="header-anchor">#</a> 配合LATERAL  VIEW使用</h3> <p>配合lateral view查询多个字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> goods_id2<span class="token punctuation">,</span>sale_info <span class="token keyword">from</span> explode_lateral_view LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span>goods <span class="token keyword">as</span> goods_id2<span class="token punctuation">;</span>
 
其中LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span>goods相当于一个虚拟表，与原表explode_lateral_view笛卡尔积关联
</code></pre></div><p>也可以多重使用</p> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> goods_id2<span class="token punctuation">,</span>sale_info<span class="token punctuation">,</span>area2
                    <span class="token keyword">from</span> explode_lateral_view 
                    LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>goods_id<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span>goods <span class="token keyword">as</span> goods_id2 
                    LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>area<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span>area <span class="token keyword">as</span> area2<span class="token punctuation">;</span>也是三个表笛卡尔积的结果
</code></pre></div><p>最终，我们可以通过下面的句子，把这个json格式的一行数据，完全转换成二维表的方式展现</p> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'{'</span><span class="token punctuation">,</span>sale_info_1<span class="token punctuation">,</span><span class="token string">'}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'$.source'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> source<span class="token punctuation">,</span>get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'{'</span><span class="token punctuation">,</span>sale_info_1<span class="token punctuation">,</span><span class="token string">'}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'$.monthSales'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales<span class="token punctuation">,</span>get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'{'</span><span class="token punctuation">,</span>sale_info_1<span class="token punctuation">,</span><span class="token string">'}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'$.userCount'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales<span class="token punctuation">,</span>get_json_object<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'{'</span><span class="token punctuation">,</span>sale_info_1<span class="token punctuation">,</span><span class="token string">'}'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'$.score'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> monthSales <span class="token keyword">from</span> explode_lateral_view LATERAL <span class="token keyword">VIEW</span> explode<span class="token punctuation">(</span>split<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>regexp_replace<span class="token punctuation">(</span>sale_info<span class="token punctuation">,</span><span class="token string">'\\[\\{'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'}]'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'},\\{'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>sale_info <span class="token keyword">as</span> sale_info_1<span class="token punctuation">;</span>
</code></pre></div><p>总结：</p> <p>Lateral View通常和UDTF一起出现，为了解决UDTF不允许在select字段的问题。Multiple Lateral View可以实现类似笛卡尔乘积。Outer关键字可以把不输出的UDTF的空结果，输出成NULL，防止丢失数据。</p> <h3 id="行转列"><a href="#行转列" class="header-anchor">#</a> 行转列</h3> <p>相关参数说明:</p> <p>CONCAT(string A/col, string B/col…)：返回输入字符串连接后的结果，支持任意个输入字符串;</p> <p>CONCAT_WS(separator, str1, str2,...)：它是一个特殊形式的 CONCAT()。第一个参数剩余参数间的分隔符。分隔符可以是与剩余参数一样的字符串。如果分隔符是 NULL，返回值也将为 NULL。这个函数会跳过分隔符参数后的任何 NULL 和空字符串。分隔符将被加到被连接的字符串之间;</p> <p>COLLECT_SET(col)：函数只接受基本数据类型，它的主要作用是将某字段的值进行去重汇总，产生array类型字段。</p> <p>数据准备:</p> <table><thead><tr><th style="text-align:left;">name</th> <th style="text-align:left;">constellation</th> <th style="text-align:left;">blood_type</th></tr></thead> <tbody><tr><td style="text-align:left;">孙悟空</td> <td style="text-align:left;">白羊座</td> <td style="text-align:left;">A</td></tr> <tr><td style="text-align:left;">老王</td> <td style="text-align:left;">射手座</td> <td style="text-align:left;">A</td></tr> <tr><td style="text-align:left;">宋宋</td> <td style="text-align:left;">白羊座</td> <td style="text-align:left;">B</td></tr> <tr><td style="text-align:left;">猪八戒</td> <td style="text-align:left;">白羊座</td> <td style="text-align:left;">A</td></tr> <tr><td style="text-align:left;">凤姐</td> <td style="text-align:left;">射手座</td> <td style="text-align:left;">A</td></tr></tbody></table> <p>需求: 把星座和血型一样的人归类到一起。结果如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>射手座<span class="token punctuation">,</span>A            老王<span class="token operator">|</span>凤姐
白羊座<span class="token punctuation">,</span>A            孙悟空<span class="token operator">|</span>猪八戒
白羊座<span class="token punctuation">,</span>B            宋宋
</code></pre></div><p>实现步骤:</p> <ul><li><ol><li>创建本地constellation.txt，导入数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>node03服务器执行以下命令创建文件，注意数据使用\t进行分割
cd <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>hivedatas
vim constellation<span class="token punctuation">.</span>txt
 
数据如下: 
孙悟空 白羊座 A
老王 射手座 A
宋宋 白羊座 B       
猪八戒 白羊座 A
凤姐 射手座 A
</code></pre></div><ul><li><ol><li>创建hive表并导入数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>创建hive表并加载数据
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> person_info<span class="token punctuation">(</span>
                    name string<span class="token punctuation">,</span> 
                    constellation string<span class="token punctuation">,</span> 
                    blood_type string<span class="token punctuation">)</span> 
                    <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
                    
加载数据
hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/constellation.txt'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> person_info<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>按需求查询数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span>
                        t1<span class="token punctuation">.</span>base<span class="token punctuation">,</span>
                        concat_ws<span class="token punctuation">(</span><span class="token string">'|'</span><span class="token punctuation">,</span> collect_set<span class="token punctuation">(</span>t1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> name
                    <span class="token keyword">from</span>
                        <span class="token punctuation">(</span><span class="token keyword">select</span>
                            name<span class="token punctuation">,</span>
                            concat<span class="token punctuation">(</span>constellation<span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span> <span class="token punctuation">,</span> blood_type<span class="token punctuation">)</span> base
                        <span class="token keyword">from</span>
                            person_info<span class="token punctuation">)</span> t1
                    <span class="token keyword">group</span> <span class="token keyword">by</span>
                        t1<span class="token punctuation">.</span>base<span class="token punctuation">;</span>
</code></pre></div><h3 id="列转行"><a href="#列转行" class="header-anchor">#</a> 列转行</h3> <p>所需函数:</p> <p>EXPLODE(col)：将hive一列中复杂的array或者map结构拆分成多行。</p> <p>LATERAL VIEW</p> <p>用法：LATERAL VIEW udtf(expression) tableAlias AS columnAlias</p> <p>解释：用于和split, explode等UDTF一起使用，它能够将一列数据拆成多行数据，在此基础上可以对拆分后的数据进行聚合。</p> <p>数据准备:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /export/servers/hivedatas
<span class="token function">vim</span> movie.txt
文件内容如下:  数据字段之间使用<span class="token punctuation">\</span>t进行分割
《疑犯追踪》 悬疑,动作,科幻,剧情
《Lie to me》 悬疑,警匪,动作,心理,剧情
《战狼2》 战争,动作,灾难
</code></pre></div><p>需求: 将电影分类中的数组数据展开。结果如下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>《疑犯追踪》 悬疑
《疑犯追踪》 动作
《疑犯追踪》 科幻
《疑犯追踪》 剧情
《Lie <span class="token keyword">to</span> me》 悬疑
《Lie <span class="token keyword">to</span> me》 警匪
《Lie <span class="token keyword">to</span> me》 动作
《Lie <span class="token keyword">to</span> me》 心理
《Lie <span class="token keyword">to</span> me》 剧情
《战狼<span class="token number">2</span>》 战争
《战狼<span class="token number">2</span>》 动作
《战狼<span class="token number">2</span>》 灾难
</code></pre></div><p>实现步骤:</p> <ul><li><ol><li>创建hive表</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">(</span>
    movie string<span class="token punctuation">,</span> 
    category array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">)</span> 
<span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&quot;\t&quot;</span>
collection items <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>加载数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">&quot;/export/servers/hivedatas/movie.txt&quot;</span> <span class="token keyword">into</span> <span class="token keyword">table</span> movie_info<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>按需求查询数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span>
    movie<span class="token punctuation">,</span>
    category_name
<span class="token keyword">from</span> 
    movie_info lateral <span class="token keyword">view</span> explode<span class="token punctuation">(</span>category<span class="token punctuation">)</span> table_tmp <span class="token keyword">as</span> category_name<span class="token punctuation">;</span>
</code></pre></div><h3 id="reflect函数"><a href="#reflect函数" class="header-anchor">#</a> reflect函数</h3> <p>reflect函数可以支持在sql中调用java中的自带函数，秒杀一切udf函数。</p> <p>需求1: 使用java.lang.Math当中的Max求两列中最大值</p> <p>实现步骤:</p> <ul><li><ol><li>创建hive表</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> test_udf<span class="token punctuation">(</span>col1 <span class="token keyword">int</span><span class="token punctuation">,</span>col2 <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>准备数据并加载数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>cd <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>hivedatas
vim test_udf 
 
文件内容如下:
<span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>
<span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span>
<span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span>
<span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span>
<span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span>
</code></pre></div><ul><li><ol><li>加载数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/test_udf'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> test_udf<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>使用java.lang.Math当中的Max求两列当中的最大值</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> reflect<span class="token punctuation">(</span><span class="token string">&quot;java.lang.Math&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;max&quot;</span><span class="token punctuation">,</span>col1<span class="token punctuation">,</span>col2<span class="token punctuation">)</span> <span class="token keyword">from</span> test_udf<span class="token punctuation">;</span>
</code></pre></div><p>需求2: 文件中不同的记录来执行不同的java的内置函数</p> <p>实现步骤:</p> <ul><li><ol><li>创建hive表</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> test_udf2<span class="token punctuation">(</span>class_name string<span class="token punctuation">,</span>method_name string<span class="token punctuation">,</span>col1 <span class="token keyword">int</span> <span class="token punctuation">,</span> col2 <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited <span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>准备数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>cd <span class="token operator">/</span>export<span class="token operator">/</span>servers<span class="token operator">/</span>hivedatas
vim test_udf2
 
文件内容如下:
java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Math<span class="token punctuation">,</span>min<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span>
java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>Math<span class="token punctuation">,</span>max<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span>
</code></pre></div><ul><li><ol><li>加载数据</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/export/servers/hivedatas/test_udf2'</span> overwrite <span class="token keyword">into</span> <span class="token keyword">table</span> test_udf2<span class="token punctuation">;</span>
</code></pre></div><ul><li><ol><li>执行查询</li></ol></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>hive <span class="token punctuation">(</span>hive_explode<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> reflect<span class="token punctuation">(</span>class_name<span class="token punctuation">,</span>method_name<span class="token punctuation">,</span>col1<span class="token punctuation">,</span>col2<span class="token punctuation">)</span> <span class="token keyword">from</span> test_udf2<span class="token punctuation">;</span>
</code></pre></div><p>需求3: 判断是否为数字</p> <p>实现方式:</p> <p>使用apache commons中的函数，commons下的jar已经包含在hadoop的classpath中，所以可以直接使用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> reflect<span class="token punctuation">(</span><span class="token string">&quot;org.apache.commons.lang.math.NumberUtils&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;isNumber&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="窗口函数与分析函数"><a href="#窗口函数与分析函数" class="header-anchor">#</a> 窗口函数与分析函数</h2> <p>在sql中有一类函数叫做聚合函数,例如sum()、avg()、max()等等,这类函数可以将多行数据按照规则聚集为一行,一般来讲聚集后的行数是要少于聚集前的行数的。但是有时我们想要既显示聚集前的数据,又要显示聚集后的数据,这时我们便引入了窗口函数。窗口函数又叫OLAP函数/分析函数，窗口函数兼具分组和排序功能。</p> <p>窗口函数最重要的关键字是 <strong>partition by</strong> 和 <strong>order by。</strong></p> <p>具体语法如下：<strong>over (partition by xxx order by xxx)</strong></p> <h3 id="sum、avg、min、max"><a href="#sum、avg、min、max" class="header-anchor">#</a> sum、avg、min、max</h3> <p>准备数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code>建表语句:
<span class="token keyword">create</span> <span class="token keyword">table</span> test_t1<span class="token punctuation">(</span>
cookieid string<span class="token punctuation">,</span>
createtime string<span class="token punctuation">,</span>   <span class="token comment">--day </span>
pv <span class="token keyword">int</span>
<span class="token punctuation">)</span> <span class="token keyword">row</span> format delimited 
<span class="token keyword">fields</span> <span class="token keyword">terminated</span> <span class="token keyword">by</span> <span class="token string">','</span><span class="token punctuation">;</span>
 
加载数据：
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t1.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t1<span class="token punctuation">;</span>
 
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">7</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">2</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">4</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">4</span>
 
开启智能本地模式
<span class="token keyword">SET</span> hive<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">.</span><span class="token keyword">mode</span><span class="token punctuation">.</span><span class="token keyword">local</span><span class="token punctuation">.</span>auto<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre></div><p>SUM函数和窗口函数的配合使用：结果和ORDER BY相关,默认为升序。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid <span class="token keyword">order</span> <span class="token keyword">by</span> createtime<span class="token punctuation">)</span> <span class="token keyword">as</span> pv1 
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
<span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid <span class="token keyword">order</span> <span class="token keyword">by</span> createtime <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token keyword">unbounded</span> <span class="token keyword">preceding</span> <span class="token operator">and</span> <span class="token keyword">current</span> <span class="token keyword">row</span><span class="token punctuation">)</span> <span class="token keyword">as</span> pv2
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
<span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">as</span> pv3
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
<span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid <span class="token keyword">order</span> <span class="token keyword">by</span> createtime <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token keyword">preceding</span> <span class="token operator">and</span> <span class="token keyword">current</span> <span class="token keyword">row</span><span class="token punctuation">)</span> <span class="token keyword">as</span> pv4
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
<span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid <span class="token keyword">order</span> <span class="token keyword">by</span> createtime <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token number">3</span> <span class="token keyword">preceding</span> <span class="token operator">and</span> <span class="token number">1</span> <span class="token keyword">following</span><span class="token punctuation">)</span> <span class="token keyword">as</span> pv5
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
<span class="token keyword">select</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">,</span>pv<span class="token punctuation">,</span>
<span class="token function">sum</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span> <span class="token keyword">over</span><span class="token punctuation">(</span><span class="token keyword">partition</span> <span class="token keyword">by</span> cookieid <span class="token keyword">order</span> <span class="token keyword">by</span> createtime <span class="token keyword">rows</span> <span class="token operator">between</span> <span class="token keyword">current</span> <span class="token keyword">row</span> <span class="token operator">and</span> <span class="token keyword">unbounded</span> <span class="token keyword">following</span><span class="token punctuation">)</span> <span class="token keyword">as</span> pv6
<span class="token keyword">from</span> test_t1<span class="token punctuation">;</span>
 
 
pv1: 分组内从起点到当前行的pv累积，如，<span class="token number">11</span>号的pv1<span class="token operator">=</span><span class="token number">10</span>号的pv<span class="token operator">+</span><span class="token number">11</span>号的pv<span class="token punctuation">,</span> <span class="token number">12</span>号<span class="token operator">=</span><span class="token number">10</span>号<span class="token operator">+</span><span class="token number">11</span>号<span class="token operator">+</span><span class="token number">12</span>号
pv2: 同pv1
pv3: 分组内<span class="token punctuation">(</span>cookie1<span class="token punctuation">)</span>所有的pv累加
pv4: 分组内当前行<span class="token operator">+</span>往前<span class="token number">3</span>行，如，<span class="token number">11</span>号<span class="token operator">=</span><span class="token number">10</span>号<span class="token operator">+</span><span class="token number">11</span>号， <span class="token number">12</span>号<span class="token operator">=</span><span class="token number">10</span>号<span class="token operator">+</span><span class="token number">11</span>号<span class="token operator">+</span><span class="token number">12</span>号，
                        <span class="token number">13</span>号<span class="token operator">=</span><span class="token number">10</span>号<span class="token operator">+</span><span class="token number">11</span>号<span class="token operator">+</span><span class="token number">12</span>号<span class="token operator">+</span><span class="token number">13</span>号， <span class="token number">14</span>号<span class="token operator">=</span><span class="token number">11</span>号<span class="token operator">+</span><span class="token number">12</span>号<span class="token operator">+</span><span class="token number">13</span>号<span class="token operator">+</span><span class="token number">14</span>号
pv5: 分组内当前行<span class="token operator">+</span>往前<span class="token number">3</span>行<span class="token operator">+</span>往后<span class="token number">1</span>行，如，<span class="token number">14</span>号<span class="token operator">=</span><span class="token number">11</span>号<span class="token operator">+</span><span class="token number">12</span>号<span class="token operator">+</span><span class="token number">13</span>号<span class="token operator">+</span><span class="token number">14</span>号<span class="token operator">+</span><span class="token number">15</span>号<span class="token operator">=</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">7</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">21</span>
pv6: 分组内当前行<span class="token operator">+</span>往后所有行，如，<span class="token number">13</span>号<span class="token operator">=</span><span class="token number">13</span>号<span class="token operator">+</span><span class="token number">14</span>号<span class="token operator">+</span><span class="token number">15</span>号<span class="token operator">+</span><span class="token number">16</span>号<span class="token operator">=</span><span class="token number">3</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">13</span>，
        <span class="token number">14</span>号<span class="token operator">=</span><span class="token number">14</span>号<span class="token operator">+</span><span class="token number">15</span>号<span class="token operator">+</span><span class="token number">16</span>号<span class="token operator">=</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">10</span>
</code></pre></div><p>如果不指定rows between,默认为从起点到当前行;</p> <p>如果不指定order by，则将分组内所有值累加;</p> <p>关键是理解rows between含义,也叫做window子句：</p> <p>preceding：往前</p> <p>following：往后</p> <p>current row：当前行</p> <p>unbounded：起点</p> <p>unbounded preceding 表示从前面的起点</p> <p>unbounded following：表示到后面的终点</p> <p>AVG，MIN，MAX，和SUM用法一样。</p> <h3 id="row-number、rank、dense-rank、ntile"><a href="#row-number、rank、dense-rank、ntile" class="header-anchor">#</a> row_number、rank、dense_rank、ntile</h3> <p>准备数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code>cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">5</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">7</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">3</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">2</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">4</span>
cookie1<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">4</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">3</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">5</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">6</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">14</span><span class="token punctuation">,</span><span class="token number">3</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">9</span>
cookie2<span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">7</span>
 
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_t2 <span class="token punctuation">(</span>
cookieid string<span class="token punctuation">,</span>
createtime string<span class="token punctuation">,</span>   <span class="token comment">--day </span>
pv <span class="token keyword">INT</span>
<span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED 
<span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> 
stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span>
  
加载数据：
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t2.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t2<span class="token punctuation">;</span>
</code></pre></div><ul><li><p>ROW_NUMBER()使用</p> <p>ROW_NUMBER()从1开始，按照顺序，生成分组内记录的序列。</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
pv<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn 
<span class="token keyword">FROM</span> test_t2<span class="token punctuation">;</span>
</code></pre></div><ul><li><p>RANK 和 DENSE_RANK使用</p> <p>RANK() 生成数据项在分组中的排名，排名相等会在名次中留下空位 。</p> <p>DENSE_RANK()生成数据项在分组中的排名，排名相等会在名次中不会留下空位。</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
pv<span class="token punctuation">,</span>
RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>
DENSE_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> pv <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn3 
<span class="token keyword">FROM</span> test_t2 
<span class="token keyword">WHERE</span> cookieid <span class="token operator">=</span> <span class="token string">'cookie1'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>NTILE</p> <p>有时会有这样的需求:如果数据排序后分为三部分，业务人员只关心其中的一部分，如何将这中间的三分之一数据拿出来呢?NTILE函数即可以满足。</p> <p>ntile可以看成是：把有序的数据集合平均分配到指定的数量（num）个桶中, 将桶号分配给每一行。如果不能平均分配，则优先分配较小编号的桶，并且各个桶中能放的行数最多相差1。</p> <p>然后可以根据桶号，选取前或后 n分之几的数据。数据会完整展示出来，只是给相应的数据打标签；具体要取几分之几的数据，需要再嵌套一层根据标签取出。</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
pv<span class="token punctuation">,</span>
NTILE<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>
NTILE<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2<span class="token punctuation">,</span>
NTILE<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn3
<span class="token keyword">FROM</span> test_t2 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">;</span>
</code></pre></div><h2 id="其他一些窗口函数"><a href="#其他一些窗口函数" class="header-anchor">#</a> 其他一些窗口函数</h2> <h3 id="lag-lead-first-value-last-value"><a href="#lag-lead-first-value-last-value" class="header-anchor">#</a> lag,lead,first_value,last_value</h3> <ul><li>LAG
<strong>LAG(col,n,DEFAULT) 用于统计窗口内往上第n行值</strong>第一个参数为列名，第二个参数为往上第n行（可选，默认为1），第三个参数为默认值（当往上第n行为NULL时候，取默认值，如不指定，则为NULL）</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
url<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>
LAG<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'1970-01-01 00:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last_1_time<span class="token punctuation">,</span>
LAG<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last_2_time 
<span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>
 
 
last_1_time: 指定了往上第<span class="token number">1</span>行的值，<span class="token keyword">default</span>为<span class="token string">'1970-01-01 00:00:00'</span>  
                 cookie1第一行，往上<span class="token number">1</span>行为<span class="token boolean">NULL</span><span class="token punctuation">,</span>因此取默认值 <span class="token number">1970</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span>
                 cookie1第三行，往上<span class="token number">1</span>行值为第二行值，<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>
                 cookie1第六行，往上<span class="token number">1</span>行值为第五行值，<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>
last_2_time: 指定了往上第<span class="token number">2</span>行的值，为指定默认值
         cookie1第一行，往上<span class="token number">2</span>行为<span class="token boolean">NULL</span>
         cookie1第二行，往上<span class="token number">2</span>行为<span class="token boolean">NULL</span>
         cookie1第四行，往上<span class="token number">2</span>行为第二行值，<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">00</span>:<span class="token number">02</span>
         cookie1第七行，往上<span class="token number">2</span>行为第五行值，<span class="token number">2015</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">10</span> <span class="token number">10</span>:<span class="token number">50</span>:<span class="token number">01</span>
</code></pre></div><ul><li>LEAD</li></ul> <p>与LAG相反<strong>LEAD(col,n,DEFAULT) 用于统计窗口内往下第n行值</strong>第一个参数为列名，第二个参数为往下第n行（可选，默认为1），第三个参数为默认值（当往下第n行为NULL时候，取默认值，如不指定，则为NULL）</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
url<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>
LEAD<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'1970-01-01 00:00:00'</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> next_1_time<span class="token punctuation">,</span>
LEAD<span class="token punctuation">(</span>createtime<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> next_2_time 
<span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>
</code></pre></div><ul><li><p>FIRST_VALUE</p> <p>取分组内排序后，截止到当前行，第一个值</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
 createtime<span class="token punctuation">,</span>
 url<span class="token punctuation">,</span>
 ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>
 FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> first1 
 <span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>
</code></pre></div><ul><li>LAST_VALUE</li></ul> <p>取分组内排序后，截止到当前行，最后一个值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
url<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>
LAST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last1 
<span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>
</code></pre></div><p>如果想要取分组内排序后最后一个值，则需要变通一下：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
url<span class="token punctuation">,</span>
ROW_NUMBER<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn<span class="token punctuation">,</span>
LAST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime<span class="token punctuation">)</span> <span class="token keyword">AS</span> last1<span class="token punctuation">,</span>
FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> createtime <span class="token keyword">DESC</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> last2 
<span class="token keyword">FROM</span> test_t4 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">,</span>createtime<span class="token punctuation">;</span>
</code></pre></div><p><strong>特别注意order  by</strong></p> <p>如果不指定ORDER BY，则进行排序混乱，会出现错误的结果</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cookieid<span class="token punctuation">,</span>
createtime<span class="token punctuation">,</span>
url<span class="token punctuation">,</span>
FIRST_VALUE<span class="token punctuation">(</span>url<span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> first2  
<span class="token keyword">FROM</span> test_t4<span class="token punctuation">;</span>
</code></pre></div><h3 id="cume-dist-percent-rank"><a href="#cume-dist-percent-rank" class="header-anchor">#</a> cume_dist,percent_rank</h3> <p>这两个序列分析函数不是很常用，<strong>注意：序列函数不支持WINDOW子句</strong></p> <ul><li>数据准备</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>d1<span class="token punctuation">,</span>user1<span class="token punctuation">,</span><span class="token number">1000</span>
d1<span class="token punctuation">,</span>user2<span class="token punctuation">,</span><span class="token number">2000</span>
d1<span class="token punctuation">,</span>user3<span class="token punctuation">,</span><span class="token number">3000</span>
d2<span class="token punctuation">,</span>user4<span class="token punctuation">,</span><span class="token number">4000</span>
d2<span class="token punctuation">,</span>user5<span class="token punctuation">,</span><span class="token number">5000</span>
 
<span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> test_t3 <span class="token punctuation">(</span>
dept STRING<span class="token punctuation">,</span>
userid string<span class="token punctuation">,</span>
sal <span class="token keyword">INT</span>
<span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED 
<span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> 
stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span>
 
加载数据：
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t3.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t3<span class="token punctuation">;</span>
</code></pre></div><hr> <ul><li><p>CUME_DIST  和order byd的排序顺序有关系</p> <p>CUME_DIST 小于等于当前值的行数/分组内总行数  order 默认顺序 正序 升序 比如，统计小于等于当前薪水的人数，所占总人数的比例</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code> <span class="token keyword">SELECT</span> 
 dept<span class="token punctuation">,</span>
 userid<span class="token punctuation">,</span>
 sal<span class="token punctuation">,</span>
 CUME_DIST<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>
 CUME_DIST<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> dept <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2 
 <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>
 
 rn1: 没有<span class="token keyword">partition</span><span class="token punctuation">,</span>所有数据均为<span class="token number">1</span>组，总行数为<span class="token number">5</span>，
      第一行：小于等于<span class="token number">1000</span>的行数为<span class="token number">1</span>，因此，<span class="token number">1</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">0.2</span>
      第三行：小于等于<span class="token number">3000</span>的行数为<span class="token number">3</span>，因此，<span class="token number">3</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">=</span><span class="token number">0.6</span>
 rn2: 按照部门分组，dpet<span class="token operator">=</span>d1的行数为<span class="token number">3</span><span class="token punctuation">,</span>
      第二行：小于等于<span class="token number">2000</span>的行数为<span class="token number">2</span>，因此，<span class="token number">2</span><span class="token operator">/</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">0.6666666666666666</span>
</code></pre></div><ul><li><p>PERCENT_RANK</p> <p>PERCENT_RANK 分组内当前行的RANK值-1/分组内总行数-1</p> <p>经调研 该函数显示现实意义不明朗 有待于继续考证</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">SELECT</span> 
  dept<span class="token punctuation">,</span>
  userid<span class="token punctuation">,</span>
  sal<span class="token punctuation">,</span>
  PERCENT_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn1<span class="token punctuation">,</span>   <span class="token comment">--分组内</span>
  RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn11<span class="token punctuation">,</span>          <span class="token comment">--分组内RANK值</span>
  <span class="token function">SUM</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> rn12<span class="token punctuation">,</span>     <span class="token comment">--分组内总行数</span>
  PERCENT_RANK<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">OVER</span><span class="token punctuation">(</span><span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> dept <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> sal<span class="token punctuation">)</span> <span class="token keyword">AS</span> rn2 
  <span class="token keyword">FROM</span> test_t3<span class="token punctuation">;</span>
  
  rn1: rn1 <span class="token operator">=</span> <span class="token punctuation">(</span>rn11<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>rn12<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 
      第一行<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">0</span>
      第二行<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">0.25</span>
      第四行<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">3</span><span class="token operator">/</span><span class="token number">4</span><span class="token operator">=</span><span class="token number">0.75</span>
  rn2: 按照dept分组，
       dept<span class="token operator">=</span>d1的总行数为<span class="token number">3</span>
       第一行，<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span>
       第三行，<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre></div><h3 id="grouping-sets-grouping-id-cube-rollup"><a href="#grouping-sets-grouping-id-cube-rollup" class="header-anchor">#</a> grouping sets,grouping__id,cube,rollup</h3> <p>这几个分析函数通常用于OLAP中，不能累加，而且需要根据不同维度上钻和下钻的指标统计，比如，分小时、天、月的UV数。</p> <ul><li>数据准备</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie1
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie5
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie7
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie3
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie2
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie4
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span>cookie4
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie2
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>cookie3
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">12</span><span class="token punctuation">,</span>cookie5
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">13</span><span class="token punctuation">,</span>cookie6
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span>cookie3
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">,</span>cookie2
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token punctuation">,</span><span class="token number">2020</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span>cookie1
 
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_t5 <span class="token punctuation">(</span>
<span class="token keyword">month</span> STRING<span class="token punctuation">,</span>
<span class="token keyword">day</span> STRING<span class="token punctuation">,</span> 
cookieid STRING 
<span class="token punctuation">)</span> <span class="token keyword">ROW</span> FORMAT DELIMITED 
<span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">','</span> 
stored <span class="token keyword">as</span> textfile<span class="token punctuation">;</span>
 
加载数据：
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">'/root/hivedata/test_t5.dat'</span> <span class="token keyword">into</span> <span class="token keyword">table</span> test_t5<span class="token punctuation">;</span>
</code></pre></div><hr> <ul><li>GROUPING SETS</li></ul> <p>grouping sets是一种将多个group by 逻辑写在一个sql语句中的便利写法。</p> <p>等价于将不同维度的GROUP BY结果集进行UNION ALL。</p> <p><strong>GROUPING__ID</strong>，表示结果属于哪一个分组集合。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
<span class="token keyword">month</span><span class="token punctuation">,</span>
<span class="token keyword">day</span><span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span>
GROUPING__ID 
<span class="token keyword">FROM</span> test_t5 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span> 
GROUPING SETS <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span>
 
grouping_id表示这一组结果属于哪个分组集合，
根据grouping sets中的分组条件<span class="token keyword">month</span>，<span class="token keyword">day</span>，<span class="token number">1</span>是代表<span class="token keyword">month</span>，<span class="token number">2</span>是代表<span class="token keyword">day</span>
 
等价于 
<span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> <span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span> <span class="token keyword">as</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token punctuation">;</span>
</code></pre></div><p>再如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
<span class="token keyword">month</span><span class="token punctuation">,</span>
<span class="token keyword">day</span><span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span>
GROUPING__ID 
<span class="token keyword">FROM</span> test_t5 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span> 
GROUPING SETS <span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span>
 
等价于
<span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> 
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span>
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>CUBE</li></ul> <p>根据GROUP BY的维度的所有组合进行聚合。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
<span class="token keyword">month</span><span class="token punctuation">,</span>
<span class="token keyword">day</span><span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span>
GROUPING__ID 
<span class="token keyword">FROM</span> test_t5 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span> 
<span class="token keyword">WITH</span> CUBE 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span>
 
等价于
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">0</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">1</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span> 
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">2</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span>
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span><span class="token number">3</span> <span class="token keyword">AS</span> GROUPING__ID <span class="token keyword">FROM</span> test_t5 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>ROLLUP</li></ul> <p>是CUBE的子集，以最左侧的维度为主，从该维度进行层级聚合。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>比如，以<span class="token keyword">month</span>维度进行层级聚合：
<span class="token keyword">SELECT</span> 
<span class="token keyword">month</span><span class="token punctuation">,</span>
<span class="token keyword">day</span><span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span>
GROUPING__ID  
<span class="token keyword">FROM</span> test_t5 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">month</span><span class="token punctuation">,</span><span class="token keyword">day</span>
<span class="token keyword">WITH ROLLUP</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span>
 
<span class="token comment">--把month和day调换顺序，则以day维度进行层级聚合：</span>
 
<span class="token keyword">SELECT</span> 
<span class="token keyword">day</span><span class="token punctuation">,</span>
<span class="token keyword">month</span><span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> cookieid<span class="token punctuation">)</span> <span class="token keyword">AS</span> uv<span class="token punctuation">,</span>
GROUPING__ID  
<span class="token keyword">FROM</span> test_t5 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token keyword">day</span><span class="token punctuation">,</span><span class="token keyword">month</span> 
<span class="token keyword">WITH ROLLUP</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> GROUPING__ID<span class="token punctuation">;</span>
（这里，根据天和月进行聚合，和根据天聚合结果一样，因为有父子关系，如果是其他维度组合的话，就会不一样）
</code></pre></div><h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ul><li>https://blog.csdn.net/weixin_44291548/article/details/119764887</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2021-09-07 18:30:09</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dw/hive/04-storageandcompression.html" class="prev">
        Hive-存储和压缩
      </a></span> <span class="next"><a href="/dw/hive/06-hiveexplainplan.html">
        Hive-HiveSQL执行计划
      </a>
      →
    </span></p></div> <div class="page_article_visit_tail" data-v-17815e06><img src="/assets/img/view/visit.png" alt="" data-v-17815e06>
         
        <span style="display:none;" data-v-17815e06>0</span></div> <div class="page_article_comment" data-v-17815e06></div></main> <div class="page-right-index-sidebar" data-v-17815e06><div class="content_index_title" data-v-17815e06>
      Hive-HiveSQL总结
    </div> <div class="page-right-index-toc" data-v-17815e06><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hivesql总结" aria-current="page" class="unactive_index_li" data-v-17815e06>HiveSQL总结
          </a> </li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive的ddl语法" aria-current="page" class="unactive_index_li" data-v-17815e06>hive的DDL语法
          </a> </li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#对数据库的操作" aria-current="page" class="unactive_index_li" data-v-17815e06>对数据库的操作
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#创建数据库" aria-current="page" class="unactive_index_li" data-v-17815e06>创建数据库:</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#修改数据库" aria-current="page" class="unactive_index_li" data-v-17815e06>修改数据库:</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#查看数据库详细信息" aria-current="page" class="unactive_index_li" data-v-17815e06>查看数据库详细信息</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#删除数据库" aria-current="page" class="unactive_index_li" data-v-17815e06>删除数据库</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#对数据表的操作" aria-current="page" class="unactive_index_li" data-v-17815e06>对数据表的操作
          </a> </li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#建内部表" aria-current="page" class="unactive_index_li" data-v-17815e06>建内部表:
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive建表时候的字段类型" aria-current="page" class="unactive_index_li" data-v-17815e06>hive建表时候的字段类型:</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#创建表并指定字段之间的分隔符" aria-current="page" class="unactive_index_li" data-v-17815e06>创建表并指定字段之间的分隔符</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#根据查询结果创建表" aria-current="page" class="unactive_index_li" data-v-17815e06>根据查询结果创建表</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#根据已经存在的表结构创建表" aria-current="page" class="unactive_index_li" data-v-17815e06>根据已经存在的表结构创建表</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#查询表的结构" aria-current="page" class="unactive_index_li" data-v-17815e06>查询表的结构</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#查询创建表的语句" aria-current="page" class="unactive_index_li" data-v-17815e06>查询创建表的语句</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#对外部表操作" aria-current="page" class="unactive_index_li" data-v-17815e06>对外部表操作
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#构建外部表" aria-current="page" class="unactive_index_li" data-v-17815e06>构建外部表</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#从本地文件系统向表中加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>从本地文件系统向表中加载数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#从hdfs文件系统向表中加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>从hdfs文件系统向表中加载数据</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#对分区表的操作" aria-current="page" class="unactive_index_li" data-v-17815e06>对分区表的操作
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#创建分区表的语法" aria-current="page" class="unactive_index_li" data-v-17815e06>创建分区表的语法</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#创建一个表带多个分区" aria-current="page" class="unactive_index_li" data-v-17815e06>创建一个表带多个分区</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#加载数据到一个分区的表中" aria-current="page" class="unactive_index_li" data-v-17815e06>加载数据到一个分区的表中</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#加载数据到一个多分区的表中去" aria-current="page" class="unactive_index_li" data-v-17815e06>加载数据到一个多分区的表中去</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#查看分区" aria-current="page" class="unactive_index_li" data-v-17815e06>查看分区</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#添加一个分区" aria-current="page" class="unactive_index_li" data-v-17815e06>添加一个分区</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#同时添加多个分区" aria-current="page" class="unactive_index_li" data-v-17815e06>同时添加多个分区</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#删除分区" aria-current="page" class="unactive_index_li" data-v-17815e06>删除分区</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#对分桶表操作" aria-current="page" class="unactive_index_li" data-v-17815e06>对分桶表操作
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#开启hive的捅表功能" aria-current="page" class="unactive_index_li" data-v-17815e06>开启hive的捅表功能</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#设置reduce的个数" aria-current="page" class="unactive_index_li" data-v-17815e06>设置reduce的个数</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#创建桶表" aria-current="page" class="unactive_index_li" data-v-17815e06>创建桶表</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#通过insert-overwrite给桶表中加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>通过insert  overwrite给桶表中加载数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#修改表名称" aria-current="page" class="unactive_index_li" data-v-17815e06>修改表名称</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#增加-修改列信息" aria-current="page" class="unactive_index_li" data-v-17815e06>增加/修改列信息</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#删除表操作" aria-current="page" class="unactive_index_li" data-v-17815e06>删除表操作</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#清空表操作" aria-current="page" class="unactive_index_li" data-v-17815e06>清空表操作</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#直接向分区表中插入数据" aria-current="page" class="unactive_index_li" data-v-17815e06>直接向分区表中插入数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#通过load方式加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>通过load方式加载数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#通过查询方式加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>通过查询方式加载数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#查询语句中创建表并加载数据" aria-current="page" class="unactive_index_li" data-v-17815e06>查询语句中创建表并加载数据</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#在创建表是通过location指定加载数据的路径" aria-current="page" class="unactive_index_li" data-v-17815e06>在创建表是通过location指定加载数据的路径</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#export导出与import-导入-hive表数据-内部表操作" aria-current="page" class="unactive_index_li" data-v-17815e06>export导出与import 导入 hive表数据（内部表操作）</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive表中数据导出" aria-current="page" class="unactive_index_li" data-v-17815e06>hive表中数据导出
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#insert导出" aria-current="page" class="unactive_index_li" data-v-17815e06>insert导出</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hadoop命令导出到本地" aria-current="page" class="unactive_index_li" data-v-17815e06>Hadoop命令导出到本地</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive-shell-命令导出" aria-current="page" class="unactive_index_li" data-v-17815e06>hive shell 命令导出</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#export导出到hdfs上" aria-current="page" class="unactive_index_li" data-v-17815e06>export导出到HDFS上</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive的dql查询语法" aria-current="page" class="unactive_index_li" data-v-17815e06>hive的DQL查询语法
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#单表查询" aria-current="page" class="unactive_index_li" data-v-17815e06>单表查询</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#where语句" aria-current="page" class="unactive_index_li" data-v-17815e06>WHERE语句</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#group-by-分组" aria-current="page" class="unactive_index_li" data-v-17815e06>GROUP BY 分组</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#join-连接" aria-current="page" class="unactive_index_li" data-v-17815e06>join 连接</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#order-by-排序" aria-current="page" class="unactive_index_li" data-v-17815e06>order by 排序</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#sort-by-局部排序" aria-current="page" class="unactive_index_li" data-v-17815e06>sort by 局部排序</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#cluster-by" aria-current="page" class="unactive_index_li" data-v-17815e06>cluster by</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive函数" aria-current="page" class="unactive_index_li" data-v-17815e06>Hive函数
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#聚合函数" aria-current="page" class="unactive_index_li" data-v-17815e06>聚合函数</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#关系运算" aria-current="page" class="unactive_index_li" data-v-17815e06>关系运算</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#数学运算" aria-current="page" class="unactive_index_li" data-v-17815e06>数学运算</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#逻辑运算" aria-current="page" class="unactive_index_li" data-v-17815e06>逻辑运算</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#数值运算" aria-current="page" class="unactive_index_li" data-v-17815e06>数值运算</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#条件函数" aria-current="page" class="unactive_index_li" data-v-17815e06>条件函数</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#日期函数" aria-current="page" class="unactive_index_li" data-v-17815e06>日期函数</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#字符串函数" aria-current="page" class="unactive_index_li" data-v-17815e06>字符串函数</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#复合类型构建操作" aria-current="page" class="unactive_index_li" data-v-17815e06>复合类型构建操作</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#复杂类型访问操作" aria-current="page" class="unactive_index_li" data-v-17815e06>复杂类型访问操作</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#复杂类型长度统计函数" aria-current="page" class="unactive_index_li" data-v-17815e06>复杂类型长度统计函数</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#hive当中的lateral-view-与-explode以及reflect和窗口函数" aria-current="page" class="unactive_index_li" data-v-17815e06>hive当中的lateral view 与 explode以及reflect和窗口函数
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#使用explode函数将hive表中的map和array字段数据进行拆分" aria-current="page" class="unactive_index_li" data-v-17815e06>使用explode函数将hive表中的Map和Array字段数据进行拆分</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#使用explode拆分json字符串" aria-current="page" class="unactive_index_li" data-v-17815e06>使用explode拆分json字符串</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#配合lateral-view使用" aria-current="page" class="unactive_index_li" data-v-17815e06>配合LATERAL  VIEW使用</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#行转列" aria-current="page" class="unactive_index_li" data-v-17815e06>行转列</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#列转行" aria-current="page" class="unactive_index_li" data-v-17815e06>列转行</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#reflect函数" aria-current="page" class="unactive_index_li" data-v-17815e06>reflect函数</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#窗口函数与分析函数" aria-current="page" class="unactive_index_li" data-v-17815e06>窗口函数与分析函数
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#sum、avg、min、max" aria-current="page" class="unactive_index_li" data-v-17815e06>sum、avg、min、max</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#row-number、rank、dense-rank、ntile" aria-current="page" class="unactive_index_li" data-v-17815e06>rownumber、rank、denserank、ntile</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#其他一些窗口函数" aria-current="page" class="unactive_index_li" data-v-17815e06>其他一些窗口函数
          </a> <ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#lag-lead-first-value-last-value" aria-current="page" class="unactive_index_li" data-v-17815e06>lag,lead,firstvalue,lastvalue</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#cume-dist-percent-rank" aria-current="page" class="unactive_index_li" data-v-17815e06>cumedist,percentrank</a></li></ul><ul data-v-17815e06><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#grouping-sets-grouping-id-cube-rollup" aria-current="page" class="unactive_index_li" data-v-17815e06>grouping sets,grouping__id,cube,rollup</a></li></ul></li><li data-v-17815e06><a href="/dw/hive/05-hivesql.html#参考文章" aria-current="page" class="unactive_index_li" data-v-17815e06>参考文章
          </a> </li></ul> <div style="height:10px" data-v-17815e06></div></div></div> <div class="page-right-tool-sidebar" data-v-17815e06><div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/phone.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>手机看</div></div> <div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/wechat.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>公众号</div></div> <div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/communication.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>讨论</div></div> <div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/leftclose.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>左栏</div></div> <div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/fullscreen.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>全屏</div></div> <div style="display:none;" data-v-17815e06><a href="/dw/hive/05-hivesql.html" aria-current="page" class="router-link-exact-active router-link-active" data-v-17815e06><div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/prev.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>上一篇</div></div></a></div> <div style="display:none;" data-v-17815e06><a href="/dw/hive/05-hivesql.html" aria-current="page" class="router-link-exact-active router-link-active" data-v-17815e06><div class="tool_bar_div" data-v-17815e06><img src="/assets/img/toolbar/next.png" class="tool_bar_img_icon" data-v-17815e06> <div data-v-17815e06>下一篇</div></div></a></div></div> <div id="qrCodeDiv" class="toolbar_qrcode_unactive" data-v-17815e06><div class=" toolbar_head_tile" data-v-17815e06>扫一扫 手机阅读</div> <img src="" class="img-qrcode" data-v-17815e06> <h5 data-v-17815e06>可分享给好友和朋友圈</h5></div> <div id="wxmpDiv" class="toolbar_wxmp_active" style="display:none;" data-v-17815e06><div class="toolbar_head_tile" data-v-17815e06>扫描关注公众号，回复&quot;资料&quot;，下载相关图书和资料</div> <img src="/assets/img/wx/wxmp.jpg" class="img-wx-mp" data-v-17815e06> <h5 data-v-17815e06>公众号:智能后端和架构</h5></div> <div id="coummpDiv" class="toolbar_communication_active" style="display:none;" data-v-17815e06><div class="toolbar_head_tile" data-v-17815e06>QQ群:569556849 <br data-v-17815e06>问题咨询和技术交流</div> <img src="/assets/img/qq/qqgroup.png" class="img-wx-mp" data-v-17815e06> <h5 data-v-17815e06>PS 备注:智能后端和架构</h5></div> <div class="topDivImg" style="display:none;" data-v-17815e06><img src="/assets/img/toolbar/top.png" class="tool_top_img_icon" data-v-17815e06></div> <div style="display:none" data-v-17815e06><script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1279777129&web_id=1279777129" data-v-17815e06></script></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.db30138a.js" defer></script><script src="/assets/js/5.df8bf371.js" defer></script><script src="/assets/js/1.60d99fe1.js" defer></script><script src="/assets/js/483.e2271a83.js" defer></script>
  </body>
</html>
